/*! Fiera.js Copyright 2016, www.homeTLT.ru (Denis Ponomarev <ponomarevtlt@gmail.com>) */
var fiera=function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=42)}([function(t,e){t.exports=fabric},function(t,e,i){(function(e){function n(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function a(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var o=i(3);o.object=i(2),o.compile=i(4);var s=function(t,e,i,n){this.buttons=[],i&&i.button&&o.object.extend(this.tools.button,i.button),t.generatedActions||s.makeActions(t,n),e.constructor===String&&(e=$(document.getElementById(e))),e.length&&Object.keys(t.generatedActions).length&&(this.generateMenu(t,e,i,t.generatedActions),this.onCreate(),e.show()),s.initKeys(t.generatedActions)};s._getKeyString=function(t){var e="";return t.ctrlKey&&(e+="Ctrl + "),t.altKey&&(e+="Alt + "),t.shiftKey&&(e+="Shift + "),t.key&&(e+=t.key),e},s._getActionValue=function(t,e){do{if(t.actions&&t.actions[e])return t.actions[e]}while(t=t.__proto__);return null},s.makeActions=function(t,e){e||(e={},_.each(t.tools,function(i){var n=s._getActionValue(t,i);n&&(e[i]=n)}));var i={};for(var n in e){var a=this.makeAction(n,e[n],t);a&&(i[n]=a)}t.generatedActions=i},s.makeAction=function(t,i,r){function c(t,e){if(t.constructor==String){var i=!1;return"!"==t[0]&&(t=t.substr(1),i=!0),e?function(){return r&&!!r[t]^i}:function(){return u&&!!u[t]^i}}return t.constructor==Function?t.bind(u):null}i.constructor===Function&&(i=i.call(u));var u;u=i.target&&i.target.constructor==Function?i.target.call(r):i.target||r;var l=i.target,h=i.parent;delete i.parent,delete i.target;var d=o.object.cloneDeep(i);if(i.parent=h,i.target=l,d.parent=h,d.target=u,d.id=a(t),d.type||(d.menu?d.type="menu":d.type="button"),d.action||"button"==d.type&&(d.action=t),d.action&&(d.action.constructor==String&&(d.action=u[d.action]),i.args?d._action=d.action.bind(u,i.args):d._action=d.action.bind(u),d.action=function(){d.disabled||d._action.apply(this,arguments)}),i.menu&&i.menu.constructor==Function&&(d.menu=i.menu.bind(u)),i.active&&(d.active=c(i.active)),i.visible&&(d.visible=c(i.visible)),i.enabled&&(d.enabled=c(i.enabled)),!i.value)switch(i.type){case"color":case"text":case"number":case"range":case"label":case"select":case"checkbox":i.value=t}if(i.value){var g,f,p;if(i.value.constructor==String){var m="set"+n(i.value,!0),v="get"+n(i.value,!0),b="min"+n(i.value,!0),I="max"+n(i.value,!0),C=function(t){u[m](t)},y=u[v],M=u[b],w=u[I];g=C||(i.args?function(t,e){this[i.value][e]=t}:function(t){this[i.value]=t}),f=y||(i.args?function(t){return this[i.value][t]}:function(){return this[i.value]}),d.value={min:M,max:w}}else g=i.value.set,f=i.value.get,p=i.value.options;void 0!==d.value.min&&d.value.min.constructor==String&&(d.value.min=u[d.value.min]),void 0!==d.value.max&&d.value.max.constructor==String&&(d.value.max=u[d.value.max]),void 0!==d.value.step&&d.value.step.constructor==String&&(d.value.step=u[d.value.step]);var A=d.value.min,j=d.value.max,x=d.value.step;g&&(d.value.set=i.args?g.bind(u,i.args):g.bind(u)),f&&(d.value.get=i.args?f.bind(u,i.args):f.bind(u)),A&&A.constructor==Function&&(d.value.min=i.args?A.bind(u,i.args):A.bind(u)),j&&j.constructor==Function&&(d.value.max=i.args?j.bind(u,i.args):j.bind(u)),x&&x.constructor==Function&&(d.value.step=i.args?x.bind(u,i.args):x.bind(u)),p&&(d.value.options=i.args?p.bind(u,i.args):p.bind(u))}if(i.data&&(d.data=i.data.call(u)),d.menu){if(i.menu.constructor===Function&&(d.menu=i.menu.call(u)),"options"==d.type)for(var T in d.menu)d.menu[T].parent=d,d.menu[T].type="option",d.menu[T].title||(d.menu[T].title=T),d.menu[T].option||(d.menu[T].option=T);for(var T in d.menu)d.menu[T].constructor==String&&(d.menu[T]=e.util.object.clone(d.target.actions[d.menu[T]]),d.menu[T].parent=d),d.menu[T]=s.makeAction(T,d.menu[T],u),d.menu[T]||delete d.menu[T]}return!1!==i.keyboard&&(i.key||i.shiftKey||i.altKey||i.ctrlKey||i.metaKey)&&(i.keyCode&&i.keyCode.constructor==String&&(d.keyCode=i.keyCode.toUpperCase().charCodeAt(0),d.key=String.fromCharCode(d.keyCode)),d.keyboard=!0),d},s.getButtons=function(t){var e=[];for(var i in t){var n=t[i];n.keyboard&&(n.title+=" ("+s._getKeyString(n)+")",e.push(n)),t.menu&&(e=e.concat(s.getButtons(t.menu)))}return e},s.initKeys=function(t){var e=s.getButtons(t);$("body").on("keydown",function(t){for(var i in e){var n=e[i];n.enabled&&!n.enabled()||(n.disabled||n.disabled||n.disabled||n.hidden||n.keyCode!=t.keyCode&&n.key!=t.key||void 0!==n.ctrlKey&&n.ctrlKey!=t.ctrlKey||void 0!==n.altKey&&n.altKey!=t.altKey||void 0!==n.shiftKey&&n.shiftKey!=t.shiftKey||void 0!==n.metaKey&&n.metaKey!=t.metaKey||(t.preventDefault(),t.stopPropagation(),void 0!==n.option?n.action.call(n.target,n.option,t):n.action.call(n.target,t)))}})},s.prototype={tools:{label:{scope:function(t,e){return{getValue:t.value.get,valueCurrent:t.value.get()}},template:'<span class="object-menu-item object-menu-label" title="{title}">',render:function(t,i,n,a,s){var r=e.util.object.defaults(a.scope.call(this,i,n),i);t.html(i.template.format(i.value.get())),o.compile.compileElement(t,r)}},number:{scope:function(t,e){return{getInputValue:function(){return parseFloat(t.$item.find("input").val())},getValue:t.value.get,setValue:t.value.set,minValue:t.value.min&&t.value.min(),maxValue:t.value.max&&t.value.max(),valueCurrent:t.value.get(),onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<span class="object-menu-item object-menu-number" title="{title}"><input type="number" min="{minValue}" max="{maxValue}" value="{valueCurrent}" onchange="onchange(event)">',render:function(t,e,i,n,a){t.find("input").val(e.value.get())}},range:{scope:function(t,e){return{minValue:t.value.min?"function"==typeof t.value.min?t.value.min():t.value.min:0,maxValue:t.value.max?"function"==typeof t.value.max?t.value.max():t.value.max:1,valueStep:t.value.step?"function"==typeof t.value.step?t.value.step():t.value.step:.1,valueCurrent:t.value.get(),onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<span class="object-menu-item object-menu-range" title="{title}"><input type="range" step="{valueStep}" min="{minValue}" max="{maxValue}" value="{valueCurrent}" onchange="onchange(event)">',render:function(t,e,i,n,a){t.find("input").val(e.value.get())}},checkbox:{scope:function(t,e){return{onchange:function(e){t.value.set(e.target.checked)},valueCurrent:t.value.get()}},template:'<span class="object-menu-item object-menu-checkbox" title="{title}"><input type="checkbox" onchange="onchange(event)" dp-checked="{valueCurrent}" id="checkbox-{id}"><label for="checkbox-{id}"  class="btn button-{id} {className}">',render:function(t,e,i,n,a){t.find("input").val(a)}},menu:{template:'<div class="object-menu-item object-menu-menu" title="{title}"><label dp-if="title" for="button-{id}">{title}</label><button class="btn button-menu-trigger button-{id} {className}" id="button-{id}"/><div class="object-menu submenu" transclude/>',post:function(t,e,i,n){e.hovered&&(t.addClass("hovered"),this.toggleByHover(t,n,null,e)),e.toggled&&(t.addClass("toggled"),this.toggleByButton(t,n)),this.generateMenu(e.target,n,i,e.menu)}},button:{scope:function(t,e){return{buttonsTitle:e.buttons&&e.buttons.title||!1,buttonscClassName:e.buttons&&e.buttons.className||""}},template:'<span class="object-menu-item" title="{title}"><button class="btn button-{id} {className} {buttonscClassName}"  onclick="!disabled && option ? action(option) : action()"><img dp-if="icon" dp-src="icon"><span dp-include="svg" dp-if="svg"></span><span dp-if="buttonsTitle" class="button-title">{title}</span>'}},onCreate:function(){},destroy:function(t){for(var e=this.buttons.length;e--;){var i=this.buttons[e];t&&i.target!=t||this.buttons.splice(e,1)}},createInput:function(t,e,i){var n=e.target,a=$("<input>").attr("type",i).attr("min",e.value.min()).attr("max",e.value.max());a.val(e.value.get()),e.value.observe&&n.on(e.value.observe,function(t){a.val(e.value.get())}),a.change(function(t){e.value.set(parseFloat(a.val()))}),t.append(a)},initItem:function(t,e){e.active&&e.active.call(e.target,e.option)&&t.addClass("active"),void 0!==e.visible&&(e.visible.constructor==Function?e.visible.call(e.target)||t.hide():e.visible||t.hide()),e.disabled=!1,void 0!==e.enabled&&e.enabled.constructor==Function&&(e.enabled.call(e.target)||(t.attr("disabled",!0),e.disabled=!0)),e.observe&&(e.visible&&e.visible.constructor==Function&&e.target&&e.target.on(e.observe,function(){e.visible.call(e.target)?(t.show(),e.hidden=!1):(t.hide(),e.hidden=!0)}),"options"==e.type&&e.target&&e.target.on(e.observe,function(){var t=e.value.get();$("[name="+e.id+"]").prop("checked",!1),$("[name="+e.id+"][value="+t+"]").prop("checked",!0)}),e.enabled&&e.enabled.constructor==Function&&e.target&&e.target.on(e.observe,function(){e.enabled.call(e.target)?(t.removeAttr("disabled"),e.disabled=!1):(t.attr("disabled",!0),e.disabled=!0)}))},toggleByHover:function(t,e,i,n){var a;e.hide(),t.mouseout(function(){e.hide(),a&&a()}),t.mouseover(function(){e.show(),a=i&&i()}),t.click(function(){n&&n.immediately&&n.action()})},toggleByButton:function(t,e,i,n){var a,o=function(i){var n=$(i.target).parents();for(var o in n)if(n[o]===t[0])return!1;"none"!==e.css("display")&&(e.hide(),a&&a())};e.click(function(t){t.stopPropagation()}),e.hide(),t.click(function(){"none"!==e.css("display")?(e.hide(),a&&a(),$(window).off("click",o)):(e.show(),$(window).on("click",o),a=i&&i(),n&&n.immediately&&n.action())})},generateMenu:function(t,i,n,a){n=n||{title:!1},n.buttons=n.buttons||{className:"",title:!1},i.empty();var s=this;for(var r in a){var c=a[r];if(c&&(void 0===c.insert||c.insert)){c.type=c.type||"button";var t=c.target,u=this.tools[c.type];if(u){var l=c;u.scope&&(l=e.util.object.defaults(u.scope.call(this,c,n),c));var h=$(u.template.format(l)),d=h.find("[transclude]");l.$item=c.$item=h,c.template&&h.html(c.template.format(c.value.get())),o.compile.compileElement(h,l),c.value&&c.value.observe&&t.on(c.value.observe,function(t){u.post&&u.post.call(s,h,l,n,d.length?d:null),u.render&&u.render.call(s,h,c,n,u,t)}),this.initItem(h,c),u.post&&u.post.call(this,h,l,n,d.length?d:null),this.fire(c.type+":created",{item:h,data:c,options:n,tool:u}),i.append(h)}}}}},o.observable(s.prototype),s.single=function(t,e){t.$item=e,t.type=t.type||"button";var i=s.prototype.tools[t.type];if(s.prototype.initItem(e,t),t.value&&t.value.observe&&t.target.on(t.value.observe,function(n){i.render(e,t,{},i,n)}),i.post){var n=e.find("[transclude]");i.post.call(s.prototype,e,t,{},n.length?n:null)}var a=t;i.scope&&(a=_.defaults(t,i.scope.call(s.prototype,t,{}))),e.eachSelf("*",function(){for(var t,e=[],i=[],n=0,o=this.attributes,s=o.length;n<s;n++)t=o[n],e.push(t.nodeName),i.push(t.nodeValue),this.setAttribute(t.nodeName,t.nodeValue.format(a))}),o.compile.compileElement(e,a)},t.exports=s}).call(e,i(0))},function(t,e){var i={extendArraysObject:function(t,e){var i={};for(var n in t)t[n].constructor==Array?i[n]=[].concat(t[n]):i[n]=[t[n]];for(var n in e)i[n]?i[n].push(e[n]):i[n]=[e[n]];return i},filterValues:function(t,e){var i=[];for(var n in t){var a={};for(var o in e)a[e[o]]=t[n][e[o]];i.push(a)}return i},shuffle:function(t){if(t.length){for(var e=t.length;--e;){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t}},deepExtend:function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var t,e,n,a,o=arguments[0],s=Array.prototype.slice.call(arguments,1);return s.forEach(function(s){if("object"==typeof s)for(t in s)t in s&&(n=o[t],e=i.cloneDeep(s[t]),"object"!=typeof n||null===n?o[t]=e:Array.isArray(e)?(a=Array.isArray(n)?n:[],e.forEach(function(t){a.push(i.cloneDeep(t))}),o[t]=a):(a=Array.isArray(n)?{}:n,o[t]=i.deepExtend(a,e)))}),o},cloneDeep:function(t){if(void 0!==t){if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return RegExp(t);if(t.cloneSync)return t.cloneSync();if(t.constructor==Object)return i.deepExtend({},t);if(t.constructor==Array){for(var e=[],n=0;n<t.length;n++)e.push(i.cloneDeep(t[n]));return e}return t}},rearrange:function(t,e){var i={};for(var n in e)void 0!==t[e[n]]&&(i[e[n]]=t[e[n]]);return i},sortBy:_.sortBy,defaults:_.defaults,where:_.where,findWhere:_.findWhere,filter:_.filter,pick:_.pick,extend:function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}};t.exports=i},function(t,e,i){var n=i(2),a={flex:function(t,e){var i=[],n=0;e.forEach(function(e,i){void 0===e.value?n++:t-=e.value});var a=t/n;return e.forEach(function(t){i.push(void 0===t.value?a:t.value)}),i},worker:function(t){if(window.Worker){var e=""+t;e="onmessage=function("+e.substring(e.indexOf("(")+1,e.indexOf(","))+"){"+e.substring(e.indexOf(",")+1,e.indexOf(")"))+"= postMessage;"+e.substring(e.indexOf("{")+1);var i=new Blob([e]),n=window.URL.createObjectURL(i);return new Worker(n)}var a={terminate:function(){},postMessage:function(e){setTimeout(function(){t({data:e},function(t){a.onmessage&&a.onmessage({data:t})})})}};return a},observable:function(t){_.extend(t,{fire:function(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,a=i.length;n<a;n++)i[n].call(this,e||{});return this}}},on:function(t,e){if(t.constructor==Object){for(var i in t)this.on(i,t[i]);return this}var n=t.split(" ");for(var i in n)this.observe(n[i],e);return this},observe:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},off:function(t,e){function i(t,e){if(this.__eventListeners[t])if(e){var i=this.__eventListeners[t].indexOf(e);-1!==i&&this.__eventListeners[t].splice(i,1)}else this.__eventListeners[t].length=0}if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in t)i.call(this,n,t[n]);else i.call(this,t,e);return this}}})},inOrder:function(t,e,i){function n(){++a<t.length?e(t[a],a,n):i&&i()}var a=0;e(t[a],a,n)},queryString:function(t){t=t?t.substr(t.indexOf("?")+1):window.location.search.substring(1);var e={},i=0;if(!t)return e;for(var n=t.split("&"),a=0;a<n.length;a++){var o=n[a].split("="),s=o[0],r=o[1];if(void 0===e[s])e[s]=r||"",Object.defineProperty(e,i,{value:s,enumerable:!1}),i++;else if("string"==typeof e[s]){var c=[e[s],r];e[s]=c,Object.defineProperty(e,i,{value:s,enumerable:!1}),i++}else e[s].push(r),Object.defineProperty(e,i,{value:s,enumerable:!1}),i++}return Object.defineProperty(e,"length",{value:i,enumerable:!1}),e},copyValue:function(t){if(null==t)return null;if(void 0!=t)switch(t.constructor){case Object:return n.deepExtend({},t);case Array:return n.deepExtend([],t);case String:case Number:case Boolean:return t;default:return n.deepExtend({},t)}},clearValue:function(t){switch(t.constructor){case Object:for(var e in t)delete t[e];break;case Array:t.length=0;break;default:delete t}},objectsDifference:function(t,e){var i={};for(var n in e)if(!t||t[n]!==e[n])if("object"==typeof e[n]){var o=a.objectsDifference(t[n],e[n]);_.isEmpty(o)||(i[n]=o)}else i[n]=e[n];return i},splitBy:function(t,e){var i=[],n=0,a=0,o=0;if(""==t)return[];for(var s=0;s<t.length;s++){var r=t[s];"("==r?(n++,a=1):")"==r&&n--,0==n&&1==a&&(a=0),-1!=e.indexOf(r)&&0==n&&0==a&&(i.push(t.substring(o,s)),o=s+1)}return i.push(t.substring(o)),i},queueLoad:function(t,e,i){var n=function(t){n.loaded.push(t),n.progressCB&&n.progressCB(n.loaded.length,n.total,t,n.loaded),n.loaded.length==n.total&&(n.completeCB&&n.completeCB(n.loaded),n.fire("loaded"))};return n.completeCB=e,n.progressCB=i,n.total=t,n.loaded=[],a.observable(n),n}};t.exports=a},function(module,exports,__webpack_require__){String.prototype.format=function(){var t=""+this;if(arguments.length){var e=typeof arguments[0],i="string"==e||"number"==e?Array.prototype.slice.call(arguments):arguments[0];t=t.replace(/\{([^}]*)\}/g,function(t,e){return utils.evalInContext(e,i)})}return t},utils={extractVariables:function(t){return t.match(/(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*/gi)},evalInContext:function(js){js=js.replace(/\s+/g,"");for(var keys=[],values=[],i=1;i<arguments.length;i++){keys=keys.concat(Object.keys(arguments[i]));for(var j in arguments[i])values.push(arguments[i][j])}var arr=utils.extractVariables(js);for(var i in arr)-1===keys.indexOf(arr[i])&&(keys.push(arr[i]),values.push(void 0));js="var foo = function("+keys.join(",")+"){ var __return__value = "+js+" ;return __return__value;}; foo;";try{var foo=eval(js);return foo.apply(this,values)}catch(t){return}},compileElement:function(t,e){function i(t,e,i){t.find(e).each(i),t.is(e)&&i.call(t[0])}i(t,"[onclick]",function(){var t=$(this).attr("onclick");$(this).removeAttr("onclick"),$(this).click(function(i){utils.evalInContext(t,e,{event:i})})}),i(t,"[onchange]",function(){var t=$(this).attr("onchange");$(this).removeAttr("onchange"),$(this).change(function(i){utils.evalInContext(t,e,{event:i})})}),i(t,"[dp-checked]",function(){var t=$(this).attr("dp-checked");utils.evalInContext(t,e)?$(this).attr("checked","checked"):$(this).removeAttr("checked")}),i(t,"[dp-src]",function(){var t=$(this).attr("dp-src"),i=utils.evalInContext(t,e);i&&$(this).attr("src",i)}),i(t,"[dp-if]",function(){var t=$(this).attr("dp-if");if("false"===t&&$(this).remove(),"true"===t);else{utils.evalInContext(t,e)||$(this).remove()}}),i(t,"[dp-include]",function(){var t=$(this),i=t.attr("dp-include"),n=utils.evalInContext(i,e);t.load(n)})},parseTemplate:function(t,e){var i=$(t.format(e));return _.compileElement(i,e),i}},module.exports=utils},function(t,e){t.exports={resolve:function(t){for(var e=t.split("/"),i=0,n=e.length;n-- >0;)if(".."==e[n])i++;else for(;i>0;)e.splice(n,1),e.splice(n--,1),i--;return e.join("/")},getParentDirectoryUrl:function(t){return t.substr(0,t.lastIndexOf("/")+1)}}},function(t,e,i){(function(t){var e={animated:!1,fitIndex:.8,optionsOrder:["originalWidth","originalHeight","width","height","*"],setAnimated:function(e){e&&t.util.requestAnimFrame(function e(){this.renderAll(),t.util.requestAnimFrame(e)}.bind(this))},find:function(e){return"string"==typeof e&&(e={type:e}),t.util.object.where(this._objects,e)},_update_background_image:function(){var e=this.backgroundImage;if(e&&e.constructor!=Object&&e.constructor!=String)if("resize"==this.backgroundPosition)this.originalWidth=e.width,this.originalHeight=e.height;else if("manual"!=this.backgroundPosition){var i=this.originalWidth||this.width,n=this.originalHeight||this.height;if(e._originalElement)var a=t.util.getProportions(e._originalElement,{width:i,height:n},this.backgroundPosition);else a={width:i,height:n};var o;o="center"==this.backgroundImage.originX?i/2:(i-a.width)/2;var s;s="center"==this.backgroundImage.originY?n/2:(n-a.height)/2,this.backgroundImage.set({left:o+this.viewportTransform[4],top:s+this.viewportTransform[5],width:a.width,height:a.height})}},setBackgroundImage:function(e,i){var n=function(t){this.backgroundImage=t,this.backgroundImage.canvas=this,this._update_background_image(),this.originalWidth||this.originalHeight||(this.originalWidth=t.width,this.originalHeight=t.height),this.fire("background-image:loaded",{target:t}),i&&i()};if(!e)return this.backgroundImage=null,i();if(e instanceof HTMLImageElement||e instanceof Image){n.call(this,new t.Image(e,{width:e.naturalWidth,height:e.naturalHeight}))}e.constructor==String&&(e={src:e});var a=this.application.prototypes;a&&a.SlideCanvas&&a.SlideCanvas.backgroundImageProperties&&t.util.object.extend(e,a.SlideCanvas.backgroundImageProperties),e.application=this.application,e.type=e.type||"image",t.util.createObject(e,n.bind(this))},createObjects:function(e,i){function n(t){s.fire("progress:complete",{objects:e});for(var n in t)s.add(t[n].object);s.renderAll(),i&&i.call(s)}function a(e,i){s.fire("progress",{loaded:e,total:i}),t.util.loaderDebug}if(this.application)for(var o in e)e[o].constructor==String&&(e[o]=this.application.objects[e[o]]);var s=this,r=[];if(!e||!e.length)return this.fire("progress:complete",0),void n(r);var c=t.util.queueLoad(e.length,function(){n(r)},a);c.data=(this.title||"")+"objects";for(var o in e)(function(e){var i={object:null,options:e};r.push(i),e.application=s.application,t.util.createObject(e,function(t){i.object=t,c()})}).call(this,e[o])},applyOptions:function(t,e){this._objects.forEach(function(i){for(var n in t)if(i[n]!==t[n])return;i.setOptions(e)})},createObject:function(e,i,n){function a(t){t.canvas||("center"==r&&o.fitObject(t),o.add(t),s&&o.setActiveObject(t),n&&n(t))}"string"!=typeof e?(n=i,i=t.util.object.clone(e),e=null):(i=t.util.object.clone(i),i.type=e);var o=this;i.application=this.application;var s=i.active,r=i.position;delete i.active,delete i.position;var c=t.util.createObject(i,a);return c&&a(c),c},onLoad:function(t){this.processing=!1,this.loaded=!0,this.fire("loading:end",{type:"slide",target:this}),this.renderAll(),t&&t.call(this)},load:function(t,e){this.originalWidth=0,this.originalHeight=0,t&&(this.virtual||this.clear(),t.width&&(t.originalWidth=t.width,t.originalHeight=t.height),this.processing=!0,this.fire("loading:begin",{type:"slide",target:this}),this.set(t,this.onLoad.bind(this,e)),this.plugins&&this.plugins.preloaders.forEach(function(e){e.call(this,t),this.onResize()}.bind(this)))},setObjects:function(t,e){this.createObjects(t,function(){for(var t in this._objects)this._objects[t].setCoords();e()})},onResize:function(){Math.min(1,800/this.width);this.setDimensions({width:this.width,height:this.height})},getCenter:function(t){return{top:(this.originalHeight||this.getHeight())/2,left:(this.originalWidth||this.getWidth())/2}},fitObject:function(e){var i,n;if(e.movementLimits&&e.movementLimits.constructor!==Function){var a=e.movementLimits;i={left:a.left*a.scaleX,width:a.width*a.scaleX,top:a.top*a.scaleY,height:a.height*a.scaleY}}else{var o=this.getZoom(),s=this.originalWidth||this.width/o,r=this.originalHeight||this.height/o;i={width:this.offsets?s-this.offsets.left-this.offsets.right:s,height:this.offsets?r-this.offsets.top-this.offsets.bottom:r}}n={width:i.width*this.fitIndex,height:i.height*this.fitIndex};var c=t.util.getProportions(e,n,"fit");e.resizable?(e.setOptions({width:e.width*c.scale,height:e.height*c.scale}),e.updateElement()):e.setOptions({scaleX:c.scale,scaleY:c.scale}),this.centerObject(e),e.setCoords()},setOriginalSize:function(t,e){return this.originalWidth=e?t:t.naturalWidth||t.width,this.originalHeight=e||(t.naturalHeight||t.height),this}};t.util.object.extend(t.StaticCanvas.prototype,e),t.util.object.extend(t.Canvas.prototype,e)}).call(e,i(0))},function(t,e,i){(function(t){t.ImageMixin={setElementFromMenu:function(t){this.setElement(t.image)},initProportinalSize:!0,_setWidthHeight:function(t){var e=this.getOriginalSize();"width"in t?this.width=t.width:e.width?this.initProportinalSize&&"height"in t?this.width=t.height/e.height*e.width:this.width=e.width:this.width=0,"height"in t?this.height=t.height:e.height?this.initProportinalSize&&"width"in t?this.height=t.width/e.width*e.height:this.height=e.height:this.height=0}},t.Application.prototype.getLibraryElements=function(t){return[]}}).call(e,i(0))},function(t,e,i){(function(e){var i=function(){function t(){return"undefined"!=typeof Canvas?new Canvas:document.createElement("canvas")}function n(t,e,i){if(1==arguments.length)for(var n in arguments[0])this[n]=arguments[0][n];else this.data=new Uint8Array(i||t*e),this.width=t,this.height=e,this.count=0,this.bounds={minX:1/0,minY:1/0,maxY:-1,maxX:-1}}function a(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function o(t){return"ImageData"==t.constructor.name?t:t.getImageData(0,0,t.canvas.width,t.canvas.height)}function s(t,e,i){var n,a,o,s,r,c,u,l=t.width,h=t.height,d=t.data,g=new Uint8Array(d),f=t.bounds.minX,p=t.bounds.maxX,m=t.bounds.minY,v=t.bounds.maxY,b=l*h,I=new Uint8Array(b),C=[],y=Math.max(f,1),M=Math.min(p,l-2),w=Math.max(m,1),A=Math.min(v,h-2);if(i&&i.length>0)for(r=0;r<b;r++)1===i[r]&&(g[r]=1);for(s=w;s<A+1;s++)for(n=y;n<M+1;n++)r=s*l+n,0!==d[r]&&(c=r+l,u=r-l,0!==g[r+1]&&0!==g[r-1]&&0!==g[c]&&0!==g[c+1]&&0!==g[c-1]&&0!==g[u]&&0!==g[u+1]&&0!==g[u-1]||C.push(r));if(0==f)for(s=m;s<v+1;s++)1===d[s*l]&&C.push(s*l);if(p==l-1)for(s=m;s<v+1;s++)1===d[s*l+p]&&C.push(s*l+p);if(0==m)for(n=f;n<p+1;n++)1===d[n]&&C.push(n);if(v==h-1)for(n=f;n<p+1;n++)1===d[v*l+n]&&C.push(v*l+n);var j,x,T=[],N=e+l,S=e+h,_=2*e+1;for(b=C.length,o=0;o<b;o++){for(r=C[o],I[r]=1,T.push(r),n=r%l,s=(r-n)/l,j=e-n>0?e-n:0,x=N-n<_?N-n:_,c=r-e,a=j;a<x;a++)u=c+a,0===I[u]&&(I[u]=1,T.push(u));for(j=e-s>0?e-s:0,x=S-s<_?S-s:_,c=r-e*l,a=j;a<x;a++)u=c+a*l,0===I[u]&&(I[u]=1,T.push(u))}return T}function r(t){var e,i,n=t.width,a=t.data,o=t.bounds.minX,s=t.bounds.maxX,r=t.bounds.minY,c=t.bounds.maxY,u=s-o+3,l=c-r+3,h=new Uint8Array(u*l);for(i=r;i<c+1;i++)for(e=o;e<s+1;e++)1===a[i*n+e]&&(h[(i-r+1)*u+(e-o+1)]=1);return{data:h,width:u,height:l,offset:{x:o-1,y:r-1}}}function c(t,e,i){t/=255,e/=255,i/=255;var n,a,o=Math.max(t,e,i),s=Math.min(t,e,i),r=(o+s)/2;if(o==s)n=a=0;else{var c=o-s;switch(a=r>.5?c/(2-o-s):c/(o+s),o){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4}n/=6}return[255*n,255*a,255*r]}var u={};return u.SelectionMask=n,n.prototype.debug=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d");this.render(e,{fill:"#fff",outerFill:"#000"}),e.debug()},n.prototype.makeCache=function(e){this.cache=t(),this.cache.width=this.bounds.maxX-this.bounds.minX+1,this.cache.height=this.bounds.maxY-this.bounds.minY+1,this.context=this.cache.getContext("2d"),e=e||{},this.render(this.context,{fill:"#fff",outerFill:"#000",cache:!1,left:-this.bounds.minX,top:-this.bounds.minY})},n.prototype.add=function(t){var e,i,n;for(i=t.bounds.minX;i<=t.bounds.maxX;i++)for(n=t.bounds.minY;n<=t.bounds.maxY;n++)e=t.width*n+i,t.data[e]&&!this.data[e]&&(this.data[e]=1,this.count++);this.bounds.minX=Math.min(t.bounds.minX,this.bounds.minX),this.bounds.maxX=Math.max(t.bounds.maxX,this.bounds.maxX),this.bounds.minY=Math.min(t.bounds.minY,this.bounds.minY),this.bounds.maxY=Math.max(t.bounds.maxY,this.bounds.maxY)},n.prototype.render=function(t,i){function n(t){if(t.constructor==String){if("#"==t[0]){var i=a(t);return[i.r,i.g,i.b,255]}t=new e.Color(t)._source,t[3]*=255}return t}if(this.count){i=i||{},i.left=i.left||0,i.top=i.top||0,i.fill=i.fill||!1,i.intersectionColor=i.intersectionColor||!1,i.outerFill=i.outerFill||!1,i.outerIntersectionColor=i.outerIntersectionColor||!1;for(var o=this.bounds.maxX-this.bounds.minX+1,s=this.bounds.maxY-this.bounds.minY+1,r=t.getImageData(this.bounds.minX,this.bounds.minY,o,s),c=n(i.fill),u=n(i.intersectionColor),l=n(i.outerFill),h=n(i.outerIntersectionColor),d=this.bounds.minX;d<=this.bounds.maxX;d++)for(var g=this.bounds.minY;g<=this.bounds.maxY;g++){var f=this.width*g+d,p=o*(g-this.bounds.minY)+d-this.bounds.minX;if(this.data[f]){var m=r.data[4*p+3]?u:c;if(!m)continue;r.data[4*p]=m[0],r.data[4*p+1]=m[1],r.data[4*p+2]=m[2],r.data[4*p+3]=m[3]}else{var m=r.data[4*p+3]?h:l;if(!m)continue;r.data[4*p]=m[0],r.data[4*p+1]=m[1],r.data[4*p+2]=m[2],r.data[4*p+3]=m[3]}}t.putImageData(r,this.bounds.minX,this.bounds.minY)}},n.prototype.getIntervalsArray=function(t,e){for(var i=[],n=0,a=0;n<array.length;n++)a!=array[n]&&(i.push(n),a=array[n]);return i},n.prototype.renderBorder=function(t,e){e=e||{},e.left=e.left||0,e.top=e.top||0,e.hatchOffset=e.hatchOffset||0,e.hatchLength=e.hatchLength||4,e.opacity=e.opacity||1;var n=t.getImageData(0,0,this.width,this.height);this.cacheInd||(this.cacheInd=i.getBorderIndices(this));var a,o,s,r,c,u=n.width,l=(n.height,n.data),h=this.cacheInd.length;for(r=0;r<h;r++)s=this.cacheInd[r],a=s%u,o=(s-a)/u,c=4*(o*u+a),(a+o+e.hatchOffset)%(2*e.hatchLength)<e.hatchLength?(l[c]=0,l[c+1]=0,l[c+2]=0,l[c+3]=255):(l[c]=255,l[c+1]=255,l[c+2]=255,l[c+3]=255);t.save(),t.globalAlpha=e.opacity,t.putImageData(n,e.left||0,e.top||0),t.restore()},u.createMask=function(t,e,i){return new n(t,e,i)},u.difference=function(t,e){return Math.max(!1!==e[0]?Math.abs(e[0]-t[0]):0,!1!==e[1]?Math.abs(e[1]-t[1]):0,!1!==e[2]?Math.abs(e[2]-t[2]):0,!1!==e[3]?Math.abs(e[3]-t[3]):0)},u.acceptable=function(t,e,i,n,a,o){if(1===n[e*i.width+t])return!1;var s=(e*i.width+t)*u.bytes,r=[i.data[s],i.data[s+1],i.data[s+2],i.data[s+3]];return!(!1!==a[0]&&Math.abs(a[0]-r[0])>o)&&(!(!1!==a[1]&&Math.abs(a[1]-r[1])>o)&&(!(!1!==a[2]&&Math.abs(a[2]-r[2])>o)&&!(!1!==a[3]&&Math.abs(a[3]-r[3])>o)))},u.selectAll=function(t,e,i,n){var a=(i*t.width+e)*u.bytes,o=t.data,s=[o[a],o[a+1],o[a+2],o[a+3]];return u.selectAllByColor(t,s,n)},u.rgbToHsl=function(t,e,i){t/=255,e/=255,i/=255;var n,a,o=Math.max(t,e,i),s=Math.min(t,e,i),r=(o+s)/2;if(o==s)n=a=0;else{var c=o-s;switch(a=r>.5?c/(2-o-s):c/(o+s),o){case t:n=(e-i)/c+(e<i?6:0);break;case e:n=(i-t)/c+2;break;case i:n=(t-e)/c+4}n/=6}return[n,a,r]},u.selectColored=function(t,e){var i=new n(t.width,t.height);i.bounds={minX:t.width,minY:t.height,maxY:-1,maxX:-1};var a,o;for(o=0;o<t.height;o++)for(a=0;a<t.width;a++){var s=o*t.width+a,r=s*u.bytes;if(!(e.aMin&&t.data[r+3]<e.aMin)){var l=c(t.data[r],t.data[r+1],t.data[r+2]);e.sMin&&l[1]<e.sMin||e.sMax&&l[1]>e.sMax||e.bMin&&l[2]<e.bMin||e.bMax&&l[2]>e.bMax||(i.data[s]=1,i.count++,i.bounds.minX=Math.min(i.bounds.minX,a),i.bounds.maxX=Math.max(i.bounds.maxX,a),i.bounds.minY=Math.min(i.bounds.minY,o),i.bounds.maxY=Math.max(i.bounds.maxY,o))}}return i},u.selectAllByColor=function(t,e,a){var s=o(t),r=new n(s.width,s.height);r.bounds={minX:1/0,minY:1/0,maxY:-1,maxX:-1};var c,l,h=new Uint8Array(s.width*s.height);for(l=0;l<s.height;l++)for(c=0;c<s.width;c++)u.acceptable(c,l,s,r.data,e,a)&&i.floodFill(s,c,l,a,{sampleColor:e,activeMask:r,visitedPoints:h});return r},u.drawImage=function(t,e,i,n,a){for(var o=e.getContext("2d"),s=t.getImageData(0,0,i.width,i.height),r=o.getImageData(n,a,i.width,i.height),c=i.bounds,u=c.minX;u<=c.maxX;u++)for(var l=c.minY;l<=c.maxY;l++){var h=l*i.width+u;i.data[h]&&(s.data[4*h]=r.data[4*h],s.data[4*h+1]=r.data[4*h+1],s.data[4*h+2]=r.data[4*h+2],s.data[4*h+3]=r.data[4*h+3])}t.putImageData(s,0,0)},u.fillMask=function(t,e,i){for(var n=o(t),a=e.bounds,s=n.width,r=n.height,c=a.minX;c<=a.maxX;c++)for(var u=a.minY;u<=a.maxY;u++){var l=u*s+c;e.data[l]&&(n.data[4*l]=i[0],n.data[4*l+1]=i[1],n.data[4*l+2]=i[2],n.data[4*l+3]=i[3])}"ImageData"!=t.constructor.name&&(t.clearRect(0,0,s,r),t.putImageData(n,0,0))},u.selectBackground=function(t,e,a){function s(t,n){if(u.acceptable(t,n,r,c.data,e,a)){if(!e){var o=4*(n*r.width+t);g=[l[o],l[o+1],l[o+2],l[o+3]]}var s=i.floodFill(r,t,n,a,null,g);c=i.add(c,s)}}var r=o(t);a=a||15;var c=new n(r.width,r.height);c.bounds={minX:1/0,minY:1/0,maxY:-1,maxX:-1};var l=r.data;e=e||[l[0],l[1],l[2],l[3]];var h,d,g=e;for(h=0;h<r.width;h++)s(h,0);for(h=0;h<r.width;h++)s(h,r.height-1);for(d=0;d<r.height;d++)s(r.width-1,d);for(d=0;d<r.height;d++)s(0,d);return c},u.extractColors=function(t,e){e=e||60;for(var n,a=u.getImageData(t),o=[],s=1;s<a.width;s+=3)for(var r=1;r<a.height;r+=3){var c=4*(s+r*a.width),l=4*(s-1+r*a.width),h=4*(s+1+r*a.width),d=4*(s-1+(r+1)*a.width),g=4*(s+1+(r+1)*a.width);if(!(a.data[c+3]<255)){n=[a.data[c],a.data[c+1],a.data[c+2]];var f=[a.data[l],a.data[l+1],a.data[l+2]],p=[a.data[h],a.data[h+1],a.data[h+2]],m=[a.data[d],a.data[d+1],a.data[d+2]],v=[a.data[g],a.data[g+1],a.data[g+2]];if(n[0]==f[0]&&f[0]==p[0]&&p[0]==m[0]&&m[0]==v[0]&&n[1]==f[1]&&f[1]==p[1]&&p[1]==m[1]&&m[1]==v[1]&&n[2]==f[2]&&f[2]==p[2]&&p[2]==m[2]&&m[2]==v[2]){var b=!0;for(var I in o)if(i.difference(o[I],n)<e){b=!1;break}b&&o.push(n)}}}return o},u.maskSelection=function(e,n,a,o,s){if(n=n||0,a=a||0,"HTMLImageElement"==e.constructor.name){var r=t();r.width=e.width,r.height=e.height;r.getContext("2d").drawImage(e,0,0),e=r}var c=e.getContext("2d"),u=c.getImageData(0,0,e.width,e.height),o=o||i.createMask(e.width,e.height),l=Math.max(0,-n),h=Math.max(0,-a),d=Math.min(o.width-n,e.width);_y2=Math.min(o.height-a,e.height);for(var g=l;g<d;g++)for(var f=h;f<_y2;f++){var p=4*(e.width*f+g);if(u.data[p]>20){var m=o.width*(f+a)+g+n;o.data[m]=1,o.count++}}return o},u.selectRectangle=function(t,e,i,a,o){for(var s=new n(t.width,t.height),r=Math.min(e,a),c=Math.max(e,a),u=Math.min(i,o),l=Math.max(i,o),h=t.width,d=(t.height,t.data),g=u;g<=l;g++)for(var f=r;f<=c;f++)d[4*(g*h+f)+3]&&(s.data[g*h+f]=1,s.count++);return s.bounds={minX:r,minY:u,maxX:c,maxY:l},s},u.bytes=4,u.__floodFill=function(t,e){function i(t,e){if(1===w[e*n.width+t])return!1;var i=(e*n.width+t)*u.bytes,a=[n.data[i],n.data[i+1],n.data[i+2],n.data[i+3]];return!(!1!==A[0]&&Math.abs(A[0]-a[0])>s)&&(!(!1!==A[1]&&Math.abs(A[1]-a[1])>s)&&(!(!1!==A[2]&&Math.abs(A[2]-a[2])>s)&&!(!1!==A[3]&&Math.abs(A[3]-a[3])>s)))}b=t.data;var n=b[0],a=b[1],o=b[2],s=b[3],r=b[4];r=r||{};var c,l,h,d,g,f,p,m,v,b=n.data,I=n.width,C=n.height,y=u.bytes,M=o*I+a;M*=y;var w=r.visitedPoints||new Uint8Array(I*C),A=r.sampleColor||[b[M],b[M+1],b[M+2],b[M+3]],j=r.activeMask;if(1===w[M])return null;var x=[{y:o,left:a-1,right:a+1,dir:1}];do{for(h=x.shift(),v=!1,c=h.left+1;c<h.right;c++)if(f=h.y*I,i(c,h.y)){for(!1,v=!0,j.count++,j.data[f+c]=1,w[f+c]=1,g=c-1;g>-1&&(p=f+g,i(g,h.y));)j.count++,j.data[p]=1,w[p]=1,g--;for(d=c+1;d<I&&(m=f+d,i(d,h.y));)j.count++,j.data[m]=1,w[m]=1,d++;g<j.bounds.minX&&(j.bounds.minX=g+1),d>j.bounds.maxX&&(j.bounds.maxX=d-1),l=h.y-h.dir,l>=0&&l<C&&g<d&&x.push({y:l,left:g,right:d,dir:-h.dir}),l=h.y+h.dir,l>=0&&l<C&&g<d&&x.push({y:l,left:g,right:d,dir:h.dir})}v&&(h.y<j.bounds.minY&&(j.bounds.minY=h.y),h.y>j.bounds.maxY&&(j.bounds.maxY=h.y))}while(x.length>0);return e&&e(j),j},u.extendMask=function(t,e){var i=new n(t.width+2,t.height+2);e&&i.data.fill(e);for(var a=0;a<t.height;a++)for(var o=0;o<t.width;o++)i.data[(a+1)*i.width+o+1]=t.data[a*t.width+o];return i.count=t.count,i.bounds=e?t.bounds:{minX:t.bounds.minX+1,maxX:t.bounds.maxX+1,maxY:t.bounds.maxY+1,minY:t.bounds.minY+1},i},u.floodFill=function(t,e,i,a,o,s,r){return o=o||{},o.activeMask=o.activeMask||new n(t.width,t.height),u.__floodFill({data:[t,e,i,a,o,s]},r)},u.substract=function(t,e){for(var i=new n(t.width,t.height),a=e.bounds,o=(t.height,a.minX);o<=a.maxX;o++)for(var s=a.minY;s<=a.maxY;s++){var r=t.width*s+o;!t.data[r]&&e.data[r]&&(i.data[r]=1,i.count++,i.bounds.minY>s&&(i.bounds.minY=s),i.bounds.maxY<s&&(i.bounds.maxY=s),i.bounds.minX>o&&(i.bounds.minX=o),i.bounds.maxX<o&&(i.bounds.maxX=o))}return i},u.getImageData=function(e){var i;if("Image"==e.constructor.name||"HTMLImageElement"==e.constructor.name){var n=t();n.width=e.width,n.height=e.height;n.getContext("2d").drawImage(e,0,0),i=n}else i=e;if("HTMLCanvasElement"==i.constructor.name||"Canvas"==i.constructor.name)var a=i.getContext("2d").getImageData(0,0,i.width,i.height);else a=e;return a},u.getColoredPixels=function(t){for(var e=u.getImageData(t),i=e.data,n=0,a=3;a<i.length;a+=4)i[a]&&(n+=i[a]/255);return n},u.invertMask=function(t){var e=new n(t.width,t.height);e.bounds={minX:1/0,minY:1/0,maxY:-1,maxX:-1};for(var i=0;i<t.width;i++)for(var a=0;a<t.height;a++){var o=t.width*a+i;t.data[o]||(e.data[o]=1,e.count++,e.bounds.minY>a&&(e.bounds.minY=a),e.bounds.maxY<a&&(e.bounds.maxY=a),e.bounds.minX>i&&(e.bounds.minX=i),e.bounds.maxX<i&&(e.bounds.maxX=i))}return e},u.exclude=function(t,e){for(var i=new n(t.width,t.height),a={minX:Math.min(t.bounds.minX,e.bounds.minX),maxX:Math.max(t.bounds.maxX,e.bounds.maxX),minY:Math.min(t.bounds.minY,e.bounds.minY),maxY:Math.max(t.bounds.maxY,e.bounds.maxY)},o=!1,s=t.height,r=!1,c=-1,u=a.minX;u<=a.maxX;u++)for(var l=a.minY;l<=a.maxY;l++){var h=e.width*l+u;t.data[h]^e.data[h]&&(i.data[h]=1,i.count++,r=u,s>l&&(s=l),c<l&&(c=l),!1===o&&(o=u))}return i.bounds={minX:o,maxX:r,minY:s,maxY:c},i},u.intersect=function(t,e){for(var i,a,o,s,r=new n(t.width,t.height),c={minX:Math.max(t.bounds.minX,e.bounds.minX),maxX:Math.min(t.bounds.maxX,e.bounds.maxX),minY:Math.max(t.bounds.minY,e.bounds.minY),maxY:Math.min(t.bounds.maxY,e.bounds.maxY)},i=!1,o=t.height,a=!1,s=-1,u=c.minX;u<=c.maxX;u++)for(var l=c.minY;l<=c.maxY;l++){var h=e.width*l+u;t.data[h]&&e.data[h]&&(r.data[h]=1,r.count++,a=u,o>l&&(o=l),s<l&&(s=l),!1===i&&(i=u))}return r.bounds={minX:i,maxX:a,minY:o,maxY:s},r},u.add=function(t,e){var i=new n(t.width,t.height);i.bounds={minX:Math.min(t.bounds.minX,e.bounds.minX),maxX:Math.max(t.bounds.maxX,e.bounds.maxX),minY:Math.min(t.bounds.minY,e.bounds.minY),maxY:Math.max(t.bounds.maxY,e.bounds.maxY)};for(var a=i.bounds.minX;a<=i.bounds.maxX;a++)for(var o=i.bounds.minY;o<=i.bounds.maxY;o++){var s=e.width*o+a;(t.data[s]||e.data[s])&&(i.data[s]=1,i.count++)}return i},u.gaussBlur=function(t,e){var i,n,a,o,s,r,c,u,l=2*e+1,h=e*e,d=new Float32Array(l),g=0,f=t.width,p=t.height,m=t.data,v=t.bounds.minX,b=t.bounds.maxX,I=t.bounds.minY,C=t.bounds.maxY,y=0;for(i=0;i<e;i++){var M=(e-i)*(e-i),w=Math.exp(-M/(2*h))/(2*Math.PI*h);d[e+i]=d[e-i]=w,g+=2*w}for(i=0;i<l;i++)d[i]/=g;var A=new Uint8Array(f*p),j=e+f,x=e+p;for(s=I;s<C+1;s++)for(o=v;o<b+1;o++){for(r=0,n=s*f+o,c=e-o>0?e-o:0,u=j-o<l?j-o:l,a=n-e,i=c;i<u;i++)r+=m[a+i]*d[i];for(c=e-s>0?e-s:0,u=x-s<l?x-s:l,a=n-e*f,i=c;i<u;i++)r+=m[a+i*f]*d[i];r>.5?(A[n]=1,y++):A[n]=0}return{count:y,data:A,width:f,height:p,bounds:{minX:v,minY:I,maxX:b,maxY:C}}},u.gaussBlurOnlyBorder=function(t,e,i){var a,o,r,c,u,l,h,d,g,f,p,m=s(t,e,i),v=2*e+1,b=2*e*e,I=new Float32Array(v),C=0,y=t.width,M=t.height,w=t.data,A=t.bounds.minX,j=t.bounds.maxX,x=t.bounds.minY,T=t.bounds.maxY,N=m.length;for(r=0;r<e;r++)o=(e-r)*(e-r),a=Math.exp(-o/b)/Math.PI,I[e+r]=I[e-r]=a,C+=2*a;for(r=0;r<v;r++)I[r]/=C;var S=new n(y,M,w),_=e+y,L=e+M;for(r=0;r<N;r++){for(u=m[r],g=0,h=u%y,d=(u-h)/y,f=e-h>0?e-h:0,p=_-h<v?_-h:v,l=u-e,c=f;c<p;c++)g+=w[l+c]*I[c];if(g>.5)S.data[u]=1,S.count++,h<A&&(A=h),h>j&&(j=h),d<x&&(x=d),d>T&&(T=d);else{for(f=e-d>0?e-d:0,p=L-d<v?L-d:v,l=u-e*y,c=f;c<p;c++)g+=w[l+c*y]*I[c];g>.5?(S.data[u]=1,S.count++,h<A&&(A=h),h>j&&(j=h),d<x&&(x=d),d>T&&(T=d)):S.data[u]=0}}return S.bounds={minX:A,minY:x,maxX:j,maxY:T},S},u.createBorderMask=function(t){var e,i,n,a,o,s=t.width,r=t.height,c=t.data,u=t.bounds.minX,l=t.bounds.maxX,h=t.bounds.minY,d=t.bounds.maxY,g=l-u+1,f=d-h+1,p=new Uint8Array(g*f),m=Math.max(u,1),v=Math.min(l,s-2),b=Math.max(h,1),I=Math.min(d,r-2),C=0;for(i=b;i<I+1;i++)for(e=m;e<v+1;e++)n=i*s+e,0!==c[n]&&(a=n+s,o=n-s,0!==c[n+1]&&0!==c[n-1]&&0!==c[a]&&0!==c[a+1]&&0!==c[a-1]&&0!==c[o]&&0!==c[o+1]&&0!==c[o-1]||(p[(i-h)*g+(e-u)]=1,C++));if(0==u)for(i=h;i<d+1;i++)1===c[i*s]&&(p[(i-h)*g]=1,C++);if(l==s-1)for(i=h;i<d+1;i++)1===c[i*s+l]&&(p[(i-h)*g+(l-u)]=1,C++);if(0==h)for(e=u;e<l+1;e++)1===c[e]&&(p[e-u]=1,C++);if(d==r-1)for(e=u;e<l+1;e++)1===c[d*s+e]&&(p[(d-h)*g+(e-u)]=1,C++);return{count:C,data:p,width:g,height:f,offset:{x:u,y:h}}},u.getBorderIndices=function(t){var e,i,n,a,o,s=t.width,r=t.height,c=t.data,u=[],l=s-1,h=r-1;for(i=1;i<h;i++)for(e=1;e<l;e++)n=i*s+e,0!==c[n]&&(a=n+s,o=n-s,0!==c[n+1]&&0!==c[n-1]&&0!==c[a]&&0!==c[a+1]&&0!==c[a-1]&&0!==c[o]&&0!==c[o+1]&&0!==c[o-1]||u.push(n));for(i=0;i<r;i++)1===c[i*s]&&u.push(i*s);for(e=0;e<s;e++)1===c[e]&&u.push(e);for(n=s-1,i=0;i<r;i++)1===c[i*s+n]&&u.push(i*s+n);for(n=(r-1)*s,e=0;e<s;e++)1===c[n+e]&&u.push(n+e);return u},u.traceContours=function(t){var e,i,n,a,o,s,c,u,l,h,d,g,f,p,m,v,b,I=r(t),C=[],y=0,M=I.width,w=2*M,A=I.height,j=I.data,x=I.offset.x,T=I.offset.y,N=new Uint8Array(j),S=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(s=1;s<A-1;s++)for(o=1;o<M-1;o++)if(c=s*M+o,1===j[c])for(n=-M;n<w;n+=w)if(0===j[c+n]&&0===N[c+n]){for(h=n===M,y++,l=[],e={minX:M,minY:A,maxX:-1,maxY:-1},d=h?2:6,p=m=g={x:o,y:s},f=null;;){for(N[p.y*M+p.x]=y,a=0;a<8;a++){if(d=(d+1)%8,b=S[d],v={x:p.x+b[0],y:p.y+b[1]},u=v.y*M+v.x,1===j[u]){N[u]=y;break}N[u]=-1,v=null}if(null===v)break;if(p=v,f){if(m.x===g.x&&m.y===g.y&&p.x===f.x&&p.y===f.y)break}else f=v;i={x:m.x+x,y:m.y+T},e.minX>i.x&&(e.minX=i.x),e.maxX<i.x&&(e.maxX=i.x),e.minY>i.y&&(e.minY=i.y),e.maxY<i.y&&(e.maxY=i.y),l.push(i),m=p,d=(d+4)%8}null!=v&&(i={x:g.x+x,y:g.y+T},e.minX>i.x&&(e.minX=i.x),e.maxX<i.x&&(e.maxX=i.x),e.minY>i.y&&(e.minY=i.y),e.maxY<i.y&&(e.maxY=i.y),l.push(i),C.push({inner:h,label:y,points:l,bounds:e}))}return C},u.simplifyContour=function(t,e,i){var n,a,t,o,s,r,c,u,l,h,d,g,f,p,m,v,b,I,C,y;if(o=t.points,(s=t.points.length)<i){for(r=[],a=0;a<s;a++)r.push({x:o[a].x,y:o[a].y});return{bounds:t.bounds,inner:t.inner,label:t.label,points:r,initialCount:s}}c=[0,s-1],u=[{first:0,last:s-1}];do{if(l=u.shift(),!(l.last<=l.first+1)){for(h=-1,d=l.first,n=l.first+1;n<l.last;n++)I=o[n],C=o[l.first],y=o[l.last],v=I.x-C.x,b=I.y-C.y,f=Math.sqrt(v*v+b*b),v=I.x-y.x,b=I.y-y.y,p=Math.sqrt(v*v+b*b),v=C.x-y.x,b=C.y-y.y,m=Math.sqrt(v*v+b*b),(g=f>=Math.sqrt(p*p+m*m)?p:p>=Math.sqrt(f*f+m*m)?f:Math.abs((b*I.x-v*I.y+C.x*y.y-y.x*C.y)/m))>h&&(d=n,h=g);h>e&&(c.push(d),u.push({first:l.first,last:d}),u.push({first:d,last:l.last}))}}while(u.length>0);for(r=[],s=c.length,c.sort(function(t,e){return t-e}),a=0;a<s;a++)r.push({x:o[c[a]].x,y:o[c[a]].y});return{bounds:t.bounds,inner:t.inner,label:t.label,points:r,initialCount:t.points.length}},u.simplifyContours=function(t,e,i){for(var n=t.length,a=[],o=0;o<n;o++)a.push(u.simplifyContour(t[o],e,i));return a},u}();t.exports=i}).call(e,i(0))},function(t,e){t.exports=$},function(t,e){t.exports="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIKICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICB4bWxuczpuczE9Imh0dHA6Ly9zb3ppLmJhaWVyb3VnZS5mciIKICAgIGlkPSJzdmc0ODg4IgogICAgc29kaXBvZGk6ZG9jbmFtZT0id2FybmluZ19idXR0b24uc3ZnIgogICAgdmlld0JveD0iMCAwIDQwMCA0MDAiCiAgICB2ZXJzaW9uPSIxLjEiCiAgICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ4LjAgcjk2NTQiCiAgPgogIDxkZWZzCiAgICAgIGlkPSJkZWZzNDg5MCIKICAgID4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDg0MTEiCiAgICAgICAgeTI9IjM2Ny44OCIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICB5MT0iMjg3LjQ5IgogICAgICAgIHgyPSIzMTUuNDciCiAgICAgICAgeDE9IjI0MS40MSIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wNDE1OCIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmYiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDQxNjAiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTowIgogICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAvPgogICAgPC9saW5lYXJHcmFkaWVudAogICAgPgogICAgPGZpbHRlcgogICAgICAgIGlkPSJmaWx0ZXI2MTI2IgogICAgICAgIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXI2MTI4IgogICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjUzMDM1NzEzIgogICAgICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICAvPgogICAgPC9maWx0ZXIKICAgID4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgIGlkPSJsaW5lYXJHcmFkaWVudDg0MTMiCiAgICAgICAgeTI9IjM5MS40NSIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICB5MT0iMzAwLjg2IgogICAgICAgIHgyPSIzNDIiCiAgICAgICAgeDE9IjI3NS42MSIKICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgID4KICAgICAgPHN0b3AKICAgICAgICAgIGlkPSJzdG9wNzIwMSIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiM1NTAwMDAiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDcyMDMiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmYwMDAwIgogICAgICAgICAgb2Zmc2V0PSIxIgogICAgICAvPgogICAgPC9saW5lYXJHcmFkaWVudAogICAgPgogICAgPHJhZGlhbEdyYWRpZW50CiAgICAgICAgaWQ9InJhZGlhbEdyYWRpZW50ODQxNSIKICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgICBjeD0iMzEyLjc4IgogICAgICAgIGN5PSIzODYuNTciCiAgICAgICAgcj0iNTMuMDM2IgogICAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoLS41OTMyNyAtLjU5MzI3IC43MTUwNSAtLjcxNTA1IDI0My4yNyA4NDkuMDMpIgogICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgPgogICAgICA8c3RvcAogICAgICAgICAgaWQ9InN0b3A3MTEzLTciCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmO3N0b3Atb3BhY2l0eTouNDA4MTYiCiAgICAgICAgICBvZmZzZXQ9IjAiCiAgICAgIC8+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDcxMTUtNyIKICAgICAgICAgIHN0eWxlPSJzdG9wLWNvbG9yOiNmZmZmZmY7c3RvcC1vcGFjaXR5OjAiCiAgICAgICAgICBvZmZzZXQ9IjEiCiAgICAgIC8+CiAgICA8L3JhZGlhbEdyYWRpZW50CiAgICA+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgICBpZD0ibGluZWFyR3JhZGllbnQxMDQ0OSIKICAgICAgICB5Mj0iMzM4LjgyIgogICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgIHkxPSIyODYuNjciCiAgICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCguOTU1MzQgMCAwIC45NTUzNCAxMzYuMTIgMTQuMDU1KSIKICAgICAgICB4Mj0iMzAwLjI3IgogICAgICAgIHgxPSIyNTUuMzIiCiAgICAgICAgaW5rc2NhcGU6Y29sbGVjdD0iYWx3YXlzIgogICAgICA+CiAgICAgIDxzdG9wCiAgICAgICAgICBpZD0ic3RvcDQxNTAiCiAgICAgICAgICBzdHlsZT0ic3RvcC1jb2xvcjojZmZmZmZmIgogICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAvPgogICAgICA8c3RvcAogICAgICAgICAgaWQ9InN0b3A0MTUyIgogICAgICAgICAgc3R5bGU9InN0b3AtY29sb3I6I2ZmZmZmZjtzdG9wLW9wYWNpdHk6MCIKICAgICAgICAgIG9mZnNldD0iMSIKICAgICAgLz4KICAgIDwvbGluZWFyR3JhZGllbnQKICAgID4KICAgIDxmaWx0ZXIKICAgICAgICBpZD0iZmlsdGVyMTE0MjgiCiAgICAgICAgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIgogICAgICAgIGlua3NjYXBlOmNvbGxlY3Q9ImFsd2F5cyIKICAgICAgPgogICAgICA8ZmVHYXVzc2lhbkJsdXIKICAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjExNDMwIgogICAgICAgICAgc3RkRGV2aWF0aW9uPSIxLjI0MzQ2NzgiCiAgICAgICAgICBpbmtzY2FwZTpjb2xsZWN0PSJhbHdheXMiCiAgICAgIC8+CiAgICA8L2ZpbHRlcgogICAgPgogIDwvZGVmcwogID4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgIGlkPSJiYXNlIgogICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii04IgogICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijk4OCIKICAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICAgaW5rc2NhcGU6em9vbT0iMC43MDcxMDY3OCIKICAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgICBpbmtzY2FwZTpjeD0iMzA0Ljg5NDA5IgogICAgICBpbmtzY2FwZTpjeT0iMzQxLjUyMTg2IgogICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2ODAiCiAgICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAvPgogIDxnCiAgICAgIGlkPSJsYXllcjEiCiAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC02NTIuMzYpIgogICAgPgogICAgPGcKICAgICAgICBpZD0iZzExNDMyIgogICAgICAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSI5MCIKICAgICAgICBpbmtzY2FwZTpleHBvcnQteGRwaT0iOTAiCiAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMi45MDUxIDAgMCAyLjkwNTEgLTEwMDEuOSAtNzguOTYxKSIKICAgICAgPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGg3Mjc2IgogICAgICAgICAgc29kaXBvZGk6cng9IjUzLjAzNTcxMyIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI1My4wMzU3MTMiCiAgICAgICAgICBzdHlsZT0iZmlsbDojOTk5OTk5IgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguOTczNTQgMCAwIC45NzM1NCAxMjAuMDkgLTEyLjYyOCkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI3OCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDg0MTEpIgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguOTU5NjAgMCAwIC45NTk2MCAxMjQuMzMgLTcuODAxNCkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4MCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcjYxMjYpO2ZpbGw6I2VjZWNlYyIKICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgIGQ9Im0zNTYuNzkgMzQ2LjExYzAgMjkuMjkxLTIzLjc0NSA1My4wMzYtNTMuMDM2IDUzLjAzNnMtNTMuMDM2LTIzLjc0NS01My4wMzYtNTMuMDM2IDIzLjc0NS01My4wMzYgNTMuMDM2LTUzLjAzNiA1My4wMzYgMjMuNzQ1IDUzLjAzNiA1My4wMzZ6IgogICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLjg3MzU1IDAgMCAuODczNTUgMTUwLjQ3IDIxLjk4MSkiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4MiIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbHRlcjp1cmwoI2ZpbHRlcjYxMjYpO2ZpbGw6Izk5OTk5OSIKICAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgIGQ9Im0zNTYuNzkgMzQ2LjExYzAgMjkuMjkxLTIzLjc0NSA1My4wMzYtNTMuMDM2IDUzLjAzNnMtNTMuMDM2LTIzLjc0NS01My4wMzYtNTMuMDM2IDIzLjc0NS01My4wMzYgNTMuMDM2LTUzLjAzNiA1My4wMzYgMjMuNzQ1IDUzLjAzNiA1My4wMzZ6IgogICAgICAgICAgdHJhbnNmb3JtPSJtYXRyaXgoLjgzODM4IDAgMCAuODM4MzggMTYxLjE1IDM0LjE1MikiCiAgICAgICAgICBzb2RpcG9kaTpjeT0iMzQ2LjExMjE4IgogICAgICAgICAgc29kaXBvZGk6Y3g9IjMwMy43NSIKICAgICAgLz4KICAgICAgPHBhdGgKICAgICAgICAgIGlkPSJwYXRoNzI4NCIKICAgICAgICAgIHNvZGlwb2RpOnJ4PSI1My4wMzU3MTMiCiAgICAgICAgICBzb2RpcG9kaTpyeT0iNTMuMDM1NzEzIgogICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNsaW5lYXJHcmFkaWVudDg0MTMpIgogICAgICAgICAgc29kaXBvZGk6dHlwZT0iYXJjIgogICAgICAgICAgZD0ibTM1Ni43OSAzNDYuMTFjMCAyOS4yOTEtMjMuNzQ1IDUzLjAzNi01My4wMzYgNTMuMDM2cy01My4wMzYtMjMuNzQ1LTUzLjAzNi01My4wMzYgMjMuNzQ1LTUzLjAzNiA1My4wMzYtNTMuMDM2IDUzLjAzNiAyMy43NDUgNTMuMDM2IDUzLjAzNnoiCiAgICAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCguODA1ODcgMCAwIC44MDU4NyAxNzEuMDMgNDUuNDA1KSIKICAgICAgICAgIHNvZGlwb2RpOmN5PSIzNDYuMTEyMTgiCiAgICAgICAgICBzb2RpcG9kaTpjeD0iMzAzLjc1IgogICAgICAvPgogICAgICA8cGF0aAogICAgICAgICAgaWQ9InBhdGg3Mjg2IgogICAgICAgICAgc29kaXBvZGk6cng9IjUzLjAzNTcxMyIKICAgICAgICAgIHNvZGlwb2RpOnJ5PSI1My4wMzU3MTMiCiAgICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI3JhZGlhbEdyYWRpZW50ODQxNSkiCiAgICAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICAgICBkPSJtMzU2Ljc5IDM0Ni4xMWMwIDI5LjI5MS0yMy43NDUgNTMuMDM2LTUzLjAzNiA1My4wMzZzLTUzLjAzNi0yMy43NDUtNTMuMDM2LTUzLjAzNiAyMy43NDUtNTMuMDM2IDUzLjAzNi01My4wMzYgNTMuMDM2IDIzLjc0NSA1My4wMzYgNTMuMDM2eiIKICAgICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KC43NTgyNSAwIDAgLjc1ODI1IDE4Ni43NSA2My45MDYpIgogICAgICAgICAgc29kaXBvZGk6Y3k9IjM0Ni4xMTIxOCIKICAgICAgICAgIHNvZGlwb2RpOmN4PSIzMDMuNzUiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDcyODgiCiAgICAgICAgICBzdHlsZT0ib3BhY2l0eTouMzE3NzE7ZmlsbDp1cmwoI2xpbmVhckdyYWRpZW50MTA0NDkpIgogICAgICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIKICAgICAgICAgIGQ9Im00MTQuOCAyODQuMTVjLTEzLjMzMSAwLjMwMDY5LTI2LjE4NiA3LjM1OC0zMy4zMzYgMTkuNzQyLTcuNjkwMyAxMy4zMi02LjcxMzkgMjkuMjY2IDEuMTU0NSA0MS4zMzEgMC44NTMwNi0yNi41MzIgMjEuMTMyLTQ2LjUxNSA0Ni4zMjQtNDUuMDU0IDguMjU4OSAwLjQ3OTA3IDE2LjA1NCAzLjIwMDEgMjIuODU5IDcuNTkwOC0zLjI1NzgtNy40NDk4LTguODE3MS0xMy45NTMtMTYuMzk0LTE4LjMyNy02LjQ4NjctMy43NDUxLTEzLjYyNS01LjQzOTMtMjAuNjA4LTUuMjgxOHoiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icmVjdDczNzAiCiAgICAgICAgICBkPSJtNDAyLjg4IDMwMC4wOS0xMS41ODEgMTEuNTgxIDEzLjI5NSAxMy4yOTUtMTMuMjk1IDEzLjI4MSAxMS41ODEgMTEuNTgxIDEzLjI4MS0xMy4yOTUgMTMuMjk1IDEzLjI5NSAxMS41ODEtMTEuNTgxLTEzLjI4MS0xMy4yODEgMTMuMjgxLTEzLjI5NS0xMS41ODEtMTEuNTgxLTEzLjI5NSAxMy4yODEtMTMuMjgxLTEzLjI4MXoiCiAgICAgICAgICBzdHlsZT0iZmlsdGVyOnVybCgjZmlsdGVyMTE0MjgpO2ZpbGw6IzFhMWExYSIKICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgIC8+CiAgICAgIDxwYXRoCiAgICAgICAgICBpZD0icGF0aDEwNDU3IgogICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZiIKICAgICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICAgICBkPSJtNDAzLjQ1IDMwMS4xNS0xMS4wODcgMTEuMDg3IDEyLjcyOCAxMi43MjgtMTIuNzI4IDEyLjcxNCAxMS4wODcgMTEuMDg3IDEyLjcxNC0xMi43MjggMTIuNzI4IDEyLjcyOCAxMS4wODctMTEuMDg3LTEyLjcxNC0xMi43MTQgMTIuNzE0LTEyLjcyOC0xMS4wODctMTEuMDg3LTEyLjcyOCAxMi43MTQtMTIuNzE0LTEyLjcxNHoiCiAgICAgIC8+CiAgICA8L2cKICAgID4KICA8L2cKICA+CiAgPG1ldGFkYXRhCiAgICA+CiAgICA8cmRmOlJERgogICAgICA+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgPgogICAgICAgIDxkYzpmb3JtYXQKICAgICAgICAgID5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQKICAgICAgICA+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIKICAgICAgICAvPgogICAgICAgIDxjYzpsaWNlbnNlCiAgICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyIKICAgICAgICAvPgogICAgICAgIDxkYzpwdWJsaXNoZXIKICAgICAgICAgID4KICAgICAgICAgIDxjYzpBZ2VudAogICAgICAgICAgICAgIHJkZjphYm91dD0iaHR0cDovL29wZW5jbGlwYXJ0Lm9yZy8iCiAgICAgICAgICAgID4KICAgICAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICAgICAgPk9wZW5jbGlwYXJ0PC9kYzp0aXRsZQogICAgICAgICAgICA+CiAgICAgICAgICA8L2NjOkFnZW50CiAgICAgICAgICA+CiAgICAgICAgPC9kYzpwdWJsaXNoZXIKICAgICAgICA+CiAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICA+ZXJyb3IgYnV0dG9uPC9kYzp0aXRsZQogICAgICAgID4KICAgICAgICA8ZGM6ZGF0ZQogICAgICAgICAgPjIwMTEtMDItMjRUMTc6NDU6NDU8L2RjOmRhdGUKICAgICAgICA+CiAgICAgICAgPGRjOmRlc2NyaXB0aW9uCiAgICAgICAgLz4KICAgICAgICA8ZGM6c291cmNlCiAgICAgICAgICA+aHR0cHM6Ly9vcGVuY2xpcGFydC5vcmcvZGV0YWlsLzEyMjQyNS9lcnJvci1idXR0b24tYnktcmljYXJkb21haWE8L2RjOnNvdXJjZQogICAgICAgID4KICAgICAgICA8ZGM6Y3JlYXRvcgogICAgICAgICAgPgogICAgICAgICAgPGNjOkFnZW50CiAgICAgICAgICAgID4KICAgICAgICAgICAgPGRjOnRpdGxlCiAgICAgICAgICAgICAgPnJpY2FyZG9tYWlhPC9kYzp0aXRsZQogICAgICAgICAgICA+CiAgICAgICAgICA8L2NjOkFnZW50CiAgICAgICAgICA+CiAgICAgICAgPC9kYzpjcmVhdG9yCiAgICAgICAgPgogICAgICAgIDxkYzpzdWJqZWN0CiAgICAgICAgICA+CiAgICAgICAgICA8cmRmOkJhZwogICAgICAgICAgICA+CiAgICAgICAgICAgIDxyZGY6bGkKICAgICAgICAgICAgICA+YnV0dG9uPC9yZGY6bGkKICAgICAgICAgICAgPgogICAgICAgICAgICA8cmRmOmxpCiAgICAgICAgICAgICAgPmNhbmNlbDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgICAgPHJkZjpsaQogICAgICAgICAgICAgID5jaXJjbGU8L3JkZjpsaQogICAgICAgICAgICA+CiAgICAgICAgICAgIDxyZGY6bGkKICAgICAgICAgICAgICA+ZGVsZXRlPC9yZGY6bGkKICAgICAgICAgICAgPgogICAgICAgICAgICA8cmRmOmxpCiAgICAgICAgICAgICAgPnJlZDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgICAgPHJkZjpsaQogICAgICAgICAgICAgID5yb3VuZDwvcmRmOmxpCiAgICAgICAgICAgID4KICAgICAgICAgIDwvcmRmOkJhZwogICAgICAgICAgPgogICAgICAgIDwvZGM6c3ViamVjdAogICAgICAgID4KICAgICAgPC9jYzpXb3JrCiAgICAgID4KICAgICAgPGNjOkxpY2Vuc2UKICAgICAgICAgIHJkZjphYm91dD0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvcHVibGljZG9tYWluLyIKICAgICAgICA+CiAgICAgICAgPGNjOnBlcm1pdHMKICAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyNSZXByb2R1Y3Rpb24iCiAgICAgICAgLz4KICAgICAgICA8Y2M6cGVybWl0cwogICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zI0Rpc3RyaWJ1dGlvbiIKICAgICAgICAvPgogICAgICAgIDxjYzpwZXJtaXRzCiAgICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjRGVyaXZhdGl2ZVdvcmtzIgogICAgICAgIC8+CiAgICAgIDwvY2M6TGljZW5zZQogICAgICA+CiAgICA8L3JkZjpSREYKICAgID4KICA8L21ldGFkYXRhCiAgPgo8L3N2Zwo+Cg=="},function(t,e,i){i(35),i(39),i(32),i(6),i(40),i(34),i(33),i(38),i(41),i(36),i(37),i(47),i(53),i(49),i(51),i(48),i(50),i(64),i(56),i(58),i(62),i(52),i(65),i(54),i(46),i(63),i(60),i(55),i(61),i(25),i(28),i(31),i(30),i(27),i(26),i(29),i(68),i(69),i(70),i(71)},function(t,e,i){function n(){return!("undefined"!=typeof window&&window.document)}function a(t,e,i){function n(t){u.recoursive(t,function(t,e,i){if(/^url\(.*\)$/.test(e)){var n=/^url\((\.?\/)?(.*)\)$/.exec(e),a=n[2];"/"==n[1]&&(a=window.APP_STATIC_PATH+a),"./"==n[1]&&(a=o.getParentDirectoryUrl(h)+a),i[t]=o.resolve(a)}});var n=s.queueLoad(1,function(){if(g)for(var n=g.split("/"),a=0;a<n.length;a++)t=t[n[a]];l.length?i&&i(l):(e&&e(t),c=t)});u.recoursive(t,function(t,e,i){if(/^\/\/.*$/.test(e)||/^@comment\(.*\)$/.test(e)||"@comment"==t)i.constructor==Array?i.splice(t,1):delete i[t];else if(/^@extend.*$/.test(t))n.total++,a(e,function(t){var e=r.deepExtend(t,i);r.deepExtend(i,e),delete i["@extend"],n()},function(t,e){l.push(e),n()});else if(/^@extend\(.*\)$/.test(e)){var s=/^@extend\((\.\/)?(.*)\)$/.exec(e),c=s[2];s[1]&&(c=o.getParentDirectoryUrl(h)+c),n.total++,a(c,function(e){i[t]=e,n()},function(t,e){l.push(e),n()})}else if(/^@mixin\(.*\)$/.test(e)){var s=/^@mixin\((\.\/)?(.*)\)$/.exec(e),c=s[2];s[1]&&(c=o.getParentDirectoryUrl(h)+c),n.total++,a(c,function(e){if(i.constructor==Array){i.splice(t,1);for(var a in e)i.push(e[a])}else{delete i[t];for(var a in e)i[a]=e[a]}n()},function(t,e){l.push(e),n()})}else if(/^@load\((.*)\)$/.test(e)){var s=/^@load\((\.?\/)?(.*)\)$/.exec(e),c=s[2];"/"==s[1]&&(c=window.APP_STATIC_PATH+c),"./"==s[1]&&(c=o.getParentDirectoryUrl(h)+c),n.total++,u.getInlineJson(c,"html",function(e){i[t]=e,n()},function(t,e){l.push(e),n()})}}),n()}var c=null,l=[];if(t.constructor==String){var h,d,g;d=/^([^#]*)#?(.*)$/.exec(t),h=d[1],g=d[2],u.getInlineJson(h,"json",n,function(t){l.push(t),i&&i(t)})}else n(t);return c}var o=i(5),s=i(3),r=i(2);if(n())var c=i(77);var u={CACHED_JSON:{},loadJsonSync:function(t){var e;return a(t,function(t){e=t}),e},loadJson:function(t,e,i){return a(t,function(t){e&&e(t)},function(t){i&&i(t)})},removeComments:function(t){return t=t.replace(/^\s*(\/\/.*|(?:\/\*[\s\S]*?)\*\/\s*)$/gm,"")},recoursive:function(t,e){var i=[];if(t)return function t(n){if(-1==i.indexOf(n))if(i.push(n),n instanceof Array)for(var a=n.length;a--;)if(!n[a]||n[a].constructor!=Object&&n[a].constructor!=Array){e(a,n[a],n)}else t(n[a]);else for(var a in n)if(!n[a]||n[a].constructor!=Object&&n[a].constructor!=Array){e(a,n[a],n)}else t(n[a])}(t)},parseCSV:function(t){var e=t.split(/\n/),i=e[0].split(",");e.splice(0,1);for(var n=0;n<e.length;n++){for(var a={},o=[],s=!1,r=-1,c=-1,u=e[n];++c<u.length;)if(s)u[c]==s&&(s=!1);else if("'"!=u[c]&&'"'!=u[c]||(s=u[c]),","==u[c]){var l=u.substring(r,c);'"'==l[0]&&'"'==l[l.length-1]&&(l=l.substring(1,l.length-1)),o.push(l),r=c+1}for(var c in o)a[i[c]]=o[c];e[n]=a}return e},parseData:function(t,e){var i;if("csv"==e)i=u.parseCSV(t);else if("json"==e){i=t.trim(),i=u.removeComments(i);try{var i=JSON.parse(i)}catch(e){return{status:"error",message:""+e,data:t}}}return{status:"success",data:i}},load:function(t,e,i,a){if(n())try{var o=c.readFileSync(t,"utf8");o=o.replace(/^\uFEFF/,"");var s=u.parseData(o,e);if("error"==s.status)return void a({status:"error",message:s.message,data:s.data});i(s.data)}catch(t){if("ENOENT"!==t.code)throw t;a(o)}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var n=r.responseText,o=u.parseData(n,e);if("error"==o.status)return void a({status:r.status,message:o.message,response:r.responseText});i(o.data)}else a(t,r)},r.open("GET",t),r.send()}},getInlineJson:function(t,e,i,n){if(e.constructor!=String&&(n=i,i=e,e="json"),void 0!==u.CACHED_JSON&&u.CACHED_JSON&&u.CACHED_JSON[t])return void i(u.CACHED_JSON[t]);if("undefined"!=typeof $&&"undefined"!=typeof document){var a=$("script[id='"+t+"']");if(a.length>0){var o=a[0].innerText||a[0].textContent||a[0].text;if("json"==e){var o=u.removeComments(o);i(JSON.parse(o))}else i(o);return}}u.load(t,e,i,n)}};t.exports=u},function(t,e){t.exports={loadScript:function(t,e,i){var n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.onerror=i,a.onreadystatechange=function(){"complete"==this.readyState&&e(a,__src)},a.addEventListener("load",e,!0),a.src=t,n.appendChild(a)},scriptURL:function(){if(document.currentScript)return document.currentScript.src;for(var t=document.getElementsByTagName("script"),e=t.length-1;e--;)if(t[e].src)return t[e].src;return!1}}},function(t,e){var i={VALUE_CREATED:"created",VALUE_UPDATED:"updated",VALUE_DELETED:"deleted",VALUE_UNCHANGED:"unchanged",map:function(t,e){if(this.isFunction(t)||this.isFunction(e))throw"Invalid argument. Function given, object expected.";if(this.isValue(t)||this.isValue(e))return{_map_type:this.compareValues(t,e),_map_data:void 0===e?t:e};if(_.isArray(e))var i=!0,n=[];else var n={};for(var a in t)if(!this.isFunction(t[a])){var o=void 0;void 0!==e[a]&&(o=e[a]),n[a]=this.map(t[a],o)}for(var a in e)if(!this.isFunction(e[a])&&void 0===n[a]){var s=this.map(void 0,e[a]);i?n.push(s):n[a]=s}return{_map_type:"",_map_data:n}},compareValues:function(t,e){return t===e?this.VALUE_UNCHANGED:void 0===t?this.VALUE_CREATED:void 0===e?this.VALUE_DELETED:this.VALUE_UPDATED},isFunction:function(t){return"[object Function]"==={}.toString.apply(t)},isArray:function(t){return"[object Array]"==={}.toString.apply(t)},isObject:function(t){return"[object Object]"==={}.toString.apply(t)},isValue:function(t){return!this.isObject(t)&&!this.isArray(t)}};t.exports={differenceMap:i.map.bind(i),syntaxHighlight:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,null,2)),t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"}),t=t.replace(/[^,\n][^\n]*/g,function(t){return"<span>"+t+"</span>"})},differenceHighlight:function(t,e){function i(t,e,n,a,o){var s=$("<p>");if(s.append($("<span>").addClass("object-key").append($("<span>").text(Array(e).join(" ")))),o&&s.append($("<span>").text('"').addClass("invisible"),$("<span>").addClass("key").text(o),$("<span>").text('"').addClass("invisible"),$("<span>").text(": ")),t&&void 0!==t._map_type)if(s.addClass(t._map_type),_.isArray(t._map_data)){s.append($("<span>").text("["));var r=t._map_data.length-1;for(var c in t._map_data)i(t._map_data[c],e+1,s,c!=r);s.append($("<p>").text(Array(e).join(" ")+"]"+(a?",":"")))}else if(_.isObject(t._map_data)){s.append($("<span>").text("{"));var r=Object.keys(t._map_data).pop();for(var c in t._map_data)i(t._map_data[c],e+1,s,c!=r,c);s.append($("<p>").text(Array(e).join(" ")+"}"+(a?",":"")))}else _.isNull(t._map_data)?s.append($("<span>").text(JSON.stringify(t._map_data,null,2))):t._map_data.constructor===String?s.append($("<span>").text('"'),$("<span>").addClass("string").text(t._map_data),$("<span>").text('"')):t._map_data.constructor===Number||t._map_data.constructor===Boolean?s.append($("<span>").addClass("number").text(t._map_data)):s.append($("<span>").text(JSON.stringify(t._map_data,null,2))),a&&s.append($("<span>").text(","));else s.append($("<span>").text(JSON.stringify(t,null,2))),a&&s.append($("<span>").text(","));n.append(s)}return e?e.empty():e=$("<pre>"),i(t,1,e),e}}},function(t,e){t.exports=function(){throw Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){t.exports="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLjAzOTY1IDAgMCAuMDM5NjUgMS4xNjMgMS4xNjMpIiBmaWxsPSIjNGQ0ZDRkIj48cGF0aCBkPSJtMjUwLjIgODEuNjFjOTcuNDMgMCAxNzkuNzUgNDMuNDMgMTc5Ljc1IDk0LjgzIDAgMTIuNDQ5LTQuOTM0IDI0LjQ0OS0xMy42NDUgMzUuNDY1bDM1LjQwMiAxMC40MDRjOC42MTMtMTQuMjI3IDEzLjUzMy0yOS42MjkgMTMuNTMzLTQ1Ljg2OSAwLTcyLjk2NS05NC40Ni0xMzAuMTItMjE1LjA0LTEzMC4xMi0xMjAuNTcgMC0yMTUuMDQgNTcuMTYtMjE1LjA0IDEzMC4xMiAwIDI2LjkxOCAxMi45MzYgNTEuNjQzIDM1LjE5IDcyLjE3LTYuOTUxIDQuNTAyLTEzLjc1NiAxMC41MDItMTguODM2IDE4Ljk4NC0xMC40NTMgMTcuNDQ5LTEwLjY2IDM5LjA5LS42NDUgNjQuMzUgOS40MzMgMjMuNzkxIDcuMTI1IDMyLjU4MiA1LjY5MyAzNS4yNC0zLjM1NCA2LjMyMi0xOC4xMyA5LjUxNC0zMi4zODUgMTIuNTk2LTMuNDg2Ljc1OC03LjA0IDEuNTMxLTEwLjU4MiAyLjM3MS05LjQ4NCAyLjI0LTE1LjM1MyAxMS43MjUtMTMuMTMgMjEuMjMgMS45MDIgOC4xMTEgOS4xNjQgMTMuNTk2IDE3LjE2IDEzLjU5NiAxLjM0IDAgMi43MDktLjE2IDQuMDY4LS40NjcgMy4zMi0uNzkxIDYuNjU2LTEuNTE4IDkuOTMyLTIuMjI3IDIxLjExLTQuNTY0IDQ1LjAyLTkuNzQyIDU2LjA4LTMwLjQ4MiA4LjQ4Ni0xNS45MDIgNy4xOTUtMzYuNTE2LTQuMDMtNjQuODUtNS43MjUtMTQuNDM1LTYuMzg1LTI1LjU2NC0xLjk0Ny0zMy4xIDQuOTY1LTguNDUxIDE2LjE0LTEyLjIwNyAyMi4xOS0xMy40NjcgMzUuNzA1IDE5LjkwMiA4Mi44NSAzMi4zNTQgMTM1LjU5IDMzLjg2OWwtMTAuNTA0LTM1Ljc0Yy04Ny44Ny01Ljc1OC0xNTguNTYtNDYuNDUtMTU4LjU2LTk0LjA3LjAwMDEtNTEuNCA4Mi4zMi05NC44MyAxNzkuNzUtOTQuODMiLz48cGF0aCBkPSJtNDg3LjU3IDI2OS42M2wtMjIyLjA1LTY1LjI3Yy0xLjExNS0uMzM4LTIuMjQ0LS40ODItMy4zNzMtLjQ4Mi0zLjExMyAwLTYuMTU4IDEuMjI3LTguNDM0IDMuNS0zLjA5NiAzLjA4LTQuMjU4IDcuNjEzLTMuMDIgMTEuNzg5bDY1LjI3IDIyMi4xYzEuMzQgNC42MTMgNS4zNTIgNy45ODIgMTAuMTQzIDguNS40NTMuMDQ3Ljg5MS4wNjQgMS4zMjIuMDY0IDQuMzA5IDAgOC4zMDctMi4zMzggMTAuNDM5LTYuMTYybDU0LjA4LTk4LjA0IDk4LjAzLTU0LjA5YzQuMjI1LTIuMzIyIDYuNjI5LTYuOTUxIDYuMS0xMS43MjctLjUxNC00Ljc4Ny0zLjg3NC04LjgwNS04LjUwMi0xMC4xNzYiLz48L2c+PC9zdmc+Cg=="},function(t,e){t.exports="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHdpZHRoPScxODhweCcgaGVpZ2h0PScxODhweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiIGNsYXNzPSJ1aWwtc3BpbiI+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9Im5vbmUiIGNsYXNzPSJiayI+PC9yZWN0PjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDUwKSI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMCkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjBzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNSIgdG89IjEiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2NpcmNsZT48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoNDUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjEycyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC4xMnMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDkwKSB0cmFuc2xhdGUoMzQgMCkiPjxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjY2ZmZmRmIj48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC4yNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuMjVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPjwvY2lyY2xlPjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgxMzUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjM3cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC4zN3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDE4MCkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuNXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDIyNSkgdHJhbnNsYXRlKDM0IDApIj48Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iOCIgZmlsbD0iI2NmZmZkZiI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAuMSIgYmVnaW49IjAuNjJzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGZyb209IjEuNSIgdG89IjEiIGJlZ2luPSIwLjYycyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZVRyYW5zZm9ybT48L2NpcmNsZT48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjcwKSB0cmFuc2xhdGUoMzQgMCkiPjxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSI4IiBmaWxsPSIjY2ZmZmRmIj48YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiBmcm9tPSIxIiB0bz0iMC4xIiBiZWdpbj0iMC43NXMiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+PGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgZnJvbT0iMS41IiB0bz0iMSIgYmVnaW49IjAuNzVzIiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlVHJhbnNmb3JtPjwvY2lyY2xlPjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMTUpIHRyYW5zbGF0ZSgzNCAwKSI+PGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjgiIGZpbGw9IiNjZmZmZGYiPjxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIGZyb209IjEiIHRvPSIwLjEiIGJlZ2luPSIwLjg3cyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT48YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBmcm9tPSIxLjUiIHRvPSIxIiBiZWdpbj0iMC44N3MiIGR1cj0iMXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGVUcmFuc2Zvcm0+PC9jaXJjbGU+PC9nPjwvZz48L3N2Zz4="},function(t,e){t.exports="PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjEuMTQzIDkuNjY3Yy0uNzMzLTEuMzkyLTEuOTE0LTMuMDUtMy42MTctNC43NTMtMi45NzctMi45NzgtNS40NzgtMy45MTQtNi43ODUtMy45MTQtLjQxNCAwLS43MDguMDk0LS44Ni4yNDZsLTEuMzYxIDEuMzZjLTEuODk5LS4yMzYtMy40Mi4xMDYtNC4yOTQuOTgzLS44NzYuODc1LTEuMTY0IDIuMTU5LS43OTIgMy41MjMuNDkyIDEuODA2IDIuMzA1IDQuMDQ5IDUuOTA1IDUuMzc1LjAzOC4zMjMuMTU3LjYzOC40MDUuODg1LjU4OC41ODggMS41MzUuNTg2IDIuMTIxIDBzLjU4OC0xLjUzMy4wMDItMi4xMTljLS41ODgtLjU4Ny0xLjUzNy0uNTg4LTIuMTIzLS4wMDFsLS4xNy4yNTZjLTIuMDMxLS43NjUtMy4zOTUtMS44MjgtNC4yMzItMi45bDMuODc5LTMuODc1Yy40OTYgMi43MyA2LjQzMiA4LjY3NiA5LjE3OCA5LjE3OGwtNy4xMTUgNy4xMDdjLS4yMzQuMTUzLTIuNzk4LS4zMTYtNi4xNTYtMy42NzUtMy4zOTMtMy4zOTMtMy4xNzUtNS4yNzEtMy4wMjctNS40OThsMS44NTktMS44NTZjLS40MzktLjM1OS0uOTI1LTEuMTAzLTEuMTQxLTEuNjg5bC0yLjEzNCAyLjEzMWMtLjQ0NS40NDYtLjY4NSAxLjA2NC0uNjg1IDEuODIgMCAxLjYzNCAxLjEyMSAzLjkxNSAzLjcxMyA2LjUwNiAyLjc2NCAyLjc2NCA1LjU4IDQuMjQzIDcuNDMyIDQuMjQzLjY0OCAwIDEuMTgtLjE5NSAxLjU0Ny0uNTYybDguMDg2LTguMDc4Yy45MS44NzQtLjc3OCAzLjUzOC0uNzc4IDQuNjQ4IDAgMS4xMDQuODk2IDEuOTk5IDIgMS45OTkgMS4xMDUgMCAyLS44OTYgMi0yIDAtMy4xODQtMS40MjUtNi44MS0yLjg1Ny05LjM0em0tMTYuMjA5LTUuMzcxYy41MjctLjUzIDEuNDcxLS43OTEgMi42NTYtLjc2MWwtMy4yMDkgMy4yMDZjLS4yMzYtLjk3OC0uMDQ5LTEuODQ1LjU1My0yLjQ0NXptOS4yOTIgNC4wNzlsLS4wMy0uMDI5Yy0xLjI5Mi0xLjI5Mi0zLjgwMy00LjM1Ni0zLjA5Ni01LjA2My43MTUtLjcxNSAzLjQ4OCAxLjUyMSA1LjA2MiAzLjA5Ni44NjIuODYyIDIuMDg4IDIuMjQ3IDIuOTM3IDMuNDU4LTEuNzE3LTEuMDc0LTMuNDkxLTEuNDY5LTQuODczLTEuNDYyeiIvPjwvc3ZnPg=="},function(t,e){t.exports="iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAANlAAADZQBELD/fAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAXPSURBVHic5dt/yF5lGQfwz7U555aatpEopk6yLba16IegDCk0C0kD2woJDZr9IbUg0zYi+yMSQvtFhhG1aOI/Of/QLLEgcggzzcpBc1CT2oqsXNhqsznbrv647xffPXuf7Xmec57z7p1fuDmcc+4f1/W9r3Of+1zXdSIzvRoQEfPxucz8/GHXXw0ERMRC/ARzM/Otk+/Nmh6RukNEXIgtuHiq+yc0ARHxNkX5i/rVOWEJiIgrsRln4Yl+9U5IAiLievwYp+Jb+Fi/uiccARGxDhsxR1n11+JQv/ondSXYuBERs/ANrMX/cGNmbjxWuxOCgIiYi3uxCvuwKjMfGaTtjCcgIs7Ag7gMz+OqzHxq0PYzmoCIOBePYCmexfsyc8cwfRyxCEbE4oh4bTsijg8RsRSPK8r/GpcOqzxTW8DVuDMi/oxt+F0t2/BMZr44stQtISIuU8z+DPxUeeb3jtRZZh5WcBr+hZyiHMQOPIDbcR2W4+TefsZVlIVuf5XnHswZoM2SWv/pI+71afDl2uAp3IwNym7qP32IeRnP4D58AR/EYsxuWfm1dRKyyhgDthuagLPxEg7g3EnXA4vwfqxXXj2/nTQjvWU/nq711td2iwYVvGfciUk5iLVDth+OgNpoQ230lQEGmF1n/NpqAfcpa8bLfYjZWy3q+9XCrsQ5ffqeU019gtDVI1hOXwL6+gMi4s1Vib14Q2bumbLiURARJ1dilmJZLUtxoam34S94ZeHdpjxW6ypBe/CBzNw8ghxLsB1bs8cfcCzmfqQwt77lZ3ke3o4bcAcexk5TW0viL1jeYLzhLaAytxKP4TlckJkHhmV/GETE6YqFTLaYebguM3c16Hc0C6jkPK6wt6ZNK+iyOIoFDPI5fEc93hIRMeosHK8YhIAH8XuFxavHK073OCYBmXkIX62nt45XnO4xqEfoHvwdKyPikjHK0zkGIiAz9+OuevrZ8YnTPYbxCd6tbIquiYg3jUmezjEwAZn5Ar5X29wyNok6xrBe4a8rDscbIuKsMcjTOYYioO7Gfoi5+NRYJOoYo8QF7qzHmyLi1DaFmQ4MTUBmbsXPcCZubF2ijjFqZGhie/zpiJjRnuWRCMjMn+M3OA8fblWijtEkNjixFszo7XETAjbhT1hRQ9EzEiMTkJkH8bV6OmO3x03D4xvwT1xeszFmHBoRkCVKdHc9nZFrQRsJEnfhv1gdERe00F+naExAZj6PHyixgZub9jcmLOp7pyWn4xuViM0+LDgOnKBzcAW+iT96xb0+eGRohEE31UFumyalX4ePKB9rexweV/iD4ta7dJwEXFwH+wfmdaT0RfgMHlU+0ydHsR9TXs9LjtpHywI9WgW4aUwKz8ZK5Vtke88s/xv3K9GmhQP32bKAV00yuVkt9XmakhOwEbt7lN6p5AG+14g5Cm0TEEpgM5WsjVH7OQ+fUPJ/Xpqk8CE8iduwohWZ2ySgCv/RKuwTQxL3TnxRySeYPMsv4iF8HGe3Lm+Lii/GGsVxOiH87VjWp/48JWHiO/hrj9LP4bu4BvPbVrpVAqri91fz7Bfe/iXeoiQur1HCbft66mzFl+rbZKgMkial0Q8TNT6wBQuUbJBf4RdKbtFyvBuX4BTl1TSrmjsl/WazkoPwUGbuHFmQJmg4+xML3r14TZ86c5Uc3omZ3oTVOL2rWR7LI6DsrxO7DGCySk5Q4orpVnpyafIxNBEY2ZWDPUfP1uOZDcZsHw0s4CQlofKgY8wq3qHEFQ/h/Ome9VYegarYJxWzPqCkvF2v5hXi9fgQvl2VHyjlbkYRUBW91ZGJkn8z9WvxXdOtcG9p5b/BiDhHcYa8R/ENzFd8hU8qi9/Cai3bMnNZ4wFbROs/TtZEqgWZubvn2g4lQfL8bJDy1jZa/2kqC3b3XlN2g7Ci7TGbYDr+GjtlGsbsi04IqP/1XF5Pt3cx5qDoygLWKRunLUoS9HGDrgjYo4TRVmXbq25D/B9PLfo3EMEZiwAAAABJRU5ErkJggg=="},function(t,e,i){!function(e){t.exports=e(i(9))}(function(t){"use strict";var e,i={init:function(i){e=t.extend({hide_fallbacks:!1,selected:function(t){},opened:function(){},closed:function(){},initial:"",fonts:[]},i);var n=this,a=t(this);n.selectedCallback=e.selected,n.openedCallback=e.opened,n.closedCallback=e.closed;var o=!1,s=!1,r=function(t){if(e.hide_fallbacks){var i=t.indexOf(",");return-1==i?t:t.substr(0,i)}return t},c=function(t,e){n.find("span").html(r(t).replace(/["']{1}/gi,"")),n.css("font-family",t),s=t,e||n.selectedCallback(s)},u=function(){var e,i;e=t(n).offset().left,i=t(n).offset().top+t(n).outerHeight(),t(d).css({position:"absolute",left:e+"px",top:i+"px",width:t(n).outerWidth()+"px"})},l=function(){d.slideUp("fast",function(){o=!1}),a.removeClass("fontSelectOpen"),n.closedCallback()},h=function(){d.slideDown("fast",function(){o=!0}),a.addClass("fontSelectOpen"),n.openedCallback()};a.prepend("<span>"+e.initial.replace(/'/g,"&#039;")+"</span>");var d=t('<ul class="fontSelectUl"></ul>').appendTo("body");d.hide(),u();for(var g=0;g<e.fonts.length;g++){var f=t("<li>"+r(e.fonts[g])+"</li>").appendTo(d);f.css("font-family",e.fonts[g]),f[0].data=e.fonts[g]}""!=e.initial&&c(e.initial,!0),d.find("li").click(function(){o&&(u(),l(),c(this.data))}),a.click(function(t){o||(t.stopPropagation(),u(),h())}),t("html").click(function(){o&&l()})},selected:function(){return this.data},select:function(t){this.find("span").html(t.substr(0,t.indexOf(",")).replace(/["']{1}/gi,"")),this.css("font-family",t)}};t.fontSelector={},t.fn.fontSelector=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.fontSelector"):i.init.apply(this,arguments)}})},function(t,e,i){/*
 * jQuery MiniColors: A tiny color picker built on jQuery
 *
 * Copyright: Cory LaViska for A Beautiful Site, LLC: http://www.abeautifulsite.net/
 *
 * Contribute: https://github.com/claviska/jquery-minicolors
 *
 * @license: http://opensource.org/licenses/MIT
 *
 */
!function(e){t.exports=e(i(9))}(function(t){"use strict";function e(e,i){var n,a,o,s,r,u,l=t('<div class="minicolors" />'),h=t.minicolors.defaults;if(!e.data("minicolors-initialized")){if(T=i=t.extend(!0,{},h,i),l.addClass("minicolors-theme-"+i.theme).toggleClass("minicolors-with-opacity",i.opacity).toggleClass("minicolors-no-data-uris",!0!==i.dataUris),void 0!==i.position&&t.each(i.position.split(" "),function(){l.addClass("minicolors-position-"+this)}),n="rgb"===i.format?i.opacity?"25":"20":i.keywords?"11":"7",N=e,e.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",i).prop("size",n).wrap(l).after('<div class="minicolors-panel minicolors-slider-'+i.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),i.inline||(e.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>'),e.next(".minicolors-input-swatch").on("click",function(t){t.preventDefault(),e.focus()})),r=e.parent().find(".minicolors-panel"),r.on("selectstart",function(){return!1}).end(),i.swatches&&0!==i.swatches.length)for(i.swatches.length>7&&(i.swatches.length=7),r.addClass("minicolors-with-swatches"),a=t('<ul class="minicolors-swatches"></ul>').appendTo(r),u=0;u<i.swatches.length;++u)s=i.swatches[u],s=v(s)?f(s,!0):j(g(s,!0)),t('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></li>').appendTo(a).data("swatch-color",i.swatches[u]).find(".minicolors-swatch-color").css({backgroundColor:y(s),opacity:s.a}),i.swatches[u]=s;i.text&&(r.addClass("minicolors-with-text"),o=t('<div class="minicolors-text"></div>').appendTo(r),x=t('<input type="text">').appendTo(o),t(x).change(function(){e.val(x.val()),c(e,!0)})),i.inline&&e.parent().addClass("minicolors-inline"),c(e,!1),e.data("minicolors-initialized",!0)}}function i(t){var e=t.parent();t.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),e.before(t).remove()}function n(t){var e=t.parent(),i=e.find(".minicolors-panel"),n=t.data("minicolors-settings");!t.data("minicolors-initialized")||t.prop("disabled")||e.hasClass("minicolors-inline")||e.hasClass("minicolors-focus")||(a(),e.addClass("minicolors-focus"),i.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(t.get(0))}))}function a(){t(".minicolors-focus").each(function(){var e=t(this),i=e.find(".minicolors-input"),n=e.find(".minicolors-panel"),a=i.data("minicolors-settings");n.fadeOut(a.hideSpeed,function(){a.hide&&a.hide.call(i.get(0)),e.removeClass("minicolors-focus")})})}function o(t,e,i){var n,a,o,r,c=t.parents(".minicolors").find(".minicolors-input"),u=c.data("minicolors-settings"),l=t.find("[class$=-picker]"),h=t.offset().left,d=t.offset().top,g=Math.round(e.pageX-h),f=Math.round(e.pageY-d),p=i?u.animationSpeed:0;e.originalEvent.changedTouches&&(g=e.originalEvent.changedTouches[0].pageX-h,f=e.originalEvent.changedTouches[0].pageY-d),g<0&&(g=0),f<0&&(f=0),g>t.width()&&(g=t.width()),f>t.height()&&(f=t.height()),t.parent().is(".minicolors-slider-wheel")&&l.parent().is(".minicolors-grid")&&(n=75-g,a=75-f,o=Math.sqrt(n*n+a*a),r=Math.atan2(a,n),r<0&&(r+=2*Math.PI),o>75&&(o=75,g=75-75*Math.cos(r),f=75-75*Math.sin(r)),g=Math.round(g),f=Math.round(f)),t.is(".minicolors-grid")?l.stop(!0).animate({top:f+"px",left:g+"px"},p,u.animationEasing,function(){s(c,t)}):l.stop(!0).animate({top:f+"px"},p,u.animationEasing,function(){s(c,t)})}function s(t,e){function i(t,e){var i,n;return t.length&&e?(i=t.offset().left,n=t.offset().top,{x:i-e.offset().left+t.outerWidth()/2,y:n-e.offset().top+t.outerHeight()/2}):null}var n,a,o,s,c,l,h,d=t.val(),g=t.attr("data-opacity"),f=t.parent(),p=t.data("minicolors-settings"),v=f.find(".minicolors-input-swatch"),b=f.find(".minicolors-grid"),I=f.find(".minicolors-slider"),C=f.find(".minicolors-opacity-slider"),y=b.find("[class$=-picker]"),w=I.find("[class$=-picker]"),A=C.find("[class$=-picker]"),j=i(y,b),x=i(w,I),T=i(A,C);if(e.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(p.control){case"wheel":s=b.width()/2-j.x,c=b.height()/2-j.y,l=Math.sqrt(s*s+c*c),h=Math.atan2(c,s),h<0&&(h+=2*Math.PI),l>75&&(l=75,j.x=69-75*Math.cos(h),j.y=69-75*Math.sin(h)),a=m(l/.75,0,100),n=m(180*h/Math.PI,0,360),o=m(100-Math.floor(x.y*(100/I.height())),0,100),d=M({h:n,s:a,b:o}),I.css("backgroundColor",M({h:n,s:a,b:100}));break;case"saturation":n=m(parseInt(j.x*(360/b.width()),10),0,360),a=m(100-Math.floor(x.y*(100/I.height())),0,100),o=m(100-Math.floor(j.y*(100/b.height())),0,100),d=M({h:n,s:a,b:o}),I.css("backgroundColor",M({h:n,s:100,b:o})),f.find(".minicolors-grid-inner").css("opacity",a/100);break;case"brightness":n=m(parseInt(j.x*(360/b.width()),10),0,360),a=m(100-Math.floor(j.y*(100/b.height())),0,100),o=m(100-Math.floor(x.y*(100/I.height())),0,100),d=M({h:n,s:a,b:o}),I.css("backgroundColor",M({h:n,s:a,b:100})),f.find(".minicolors-grid-inner").css("opacity",1-o/100);break;default:n=m(360-parseInt(x.y*(360/I.height()),10),0,360),a=m(Math.floor(j.x*(100/b.width())),0,100),o=m(100-Math.floor(j.y*(100/b.height())),0,100),d=M({h:n,s:a,b:o}),b.css("backgroundColor",M({h:n,s:100,b:100}))}g=p.opacity?parseFloat(1-T.y/C.height()).toFixed(2):1,r(t,d,g)}else v.find("span").css({backgroundColor:d,opacity:g}),u(t,d,g)}function r(t,e,i){var n,a=t.parent(),o=t.data("minicolors-settings"),s=a.find(".minicolors-input-swatch");o.opacity&&t.attr("data-opacity",i),"rgb"===o.format?(n=v(e)?f(e,!0):j(g(e,!0)),i=""===t.attr("data-opacity")?1:m(parseFloat(t.attr("data-opacity")).toFixed(2),0,1),!isNaN(i)&&o.opacity||(i=1),e=t.minicolors("rgbObject").a<=1&&n&&o.opacity?"rgba("+n.r+", "+n.g+", "+n.b+", "+parseFloat(i)+")":"rgb("+n.r+", "+n.g+", "+n.b+")"):(v(e)&&(e=C(e)),e=d(e,o.letterCase)),t.val(e),x&&x.val(e),s.find("span").css({backgroundColor:e,opacity:i}),u(t,e,i)}function c(e,i){var n,a,o,s,r,c,l,h,I,y,A=T,j=e.parent(),S=j.find(".minicolors-input-swatch"),_=j.find(".minicolors-grid"),L=j.find(".minicolors-slider"),D=j.find(".minicolors-opacity-slider"),z=_.find("[class$=-picker]"),k=L.find("[class$=-picker]"),O=D.find("[class$=-picker]");switch(v(e.val())?(n=C(e.val()),(r=m(parseFloat(b(e.val())).toFixed(2),0,1))&&e.attr("data-opacity",r)):n=d(g(e.val(),!0),A.letterCase),n||(n=d(p(A.defaultValue,!0),A.letterCase)),a=w(n),s=A.keywords?t.map(A.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],c=""!==e.val()&&t.inArray(e.val().toLowerCase(),s)>-1?d(e.val()):v(e.val())?f(e.val()):n,i||(N.val(c),x&&x.val(c)),T=A,A.opacity&&(o=""===e.attr("data-opacity")?1:m(parseFloat(e.attr("data-opacity")).toFixed(2),0,1),isNaN(o)&&(o=1),e.attr("data-opacity",o),S.find("span").css("opacity",o),h=m(D.height()-D.height()*o,0,D.height()),O.css("top",h+"px")),"transparent"===e.val().toLowerCase()&&S.find("span").css("opacity",0),S.find("span").css("backgroundColor",n),A.control){case"wheel":I=m(Math.ceil(.75*a.s),0,_.height()/2),y=a.h*Math.PI/180,l=m(75-Math.cos(y)*I,0,_.width()),h=m(75-Math.sin(y)*I,0,_.height()),z.css({top:h+"px",left:l+"px"}),h=150-a.b/(100/_.height()),""===n&&(h=0),k.css("top",h+"px"),L.css("backgroundColor",M({h:a.h,s:a.s,b:100}));break;case"saturation":l=m(5*a.h/12,0,150),h=m(_.height()-Math.ceil(a.b/(100/_.height())),0,_.height()),z.css({top:h+"px",left:l+"px"}),h=m(L.height()-a.s*(L.height()/100),0,L.height()),k.css("top",h+"px"),L.css("backgroundColor",M({h:a.h,s:100,b:a.b})),j.find(".minicolors-grid-inner").css("opacity",a.s/100);break;case"brightness":l=m(5*a.h/12,0,150),h=m(_.height()-Math.ceil(a.s/(100/_.height())),0,_.height()),z.css({top:h+"px",left:l+"px"}),h=m(L.height()-a.b*(L.height()/100),0,L.height()),k.css("top",h+"px"),L.css("backgroundColor",M({h:a.h,s:a.s,b:100})),j.find(".minicolors-grid-inner").css("opacity",1-a.b/100);break;default:l=m(Math.ceil(a.s/(100/_.width())),0,_.width()),h=m(_.height()-Math.ceil(a.b/(100/_.height())),0,_.height()),z.css({top:h+"px",left:l+"px"}),h=m(L.height()-a.h/(360/L.height()),0,L.height()),k.css("top",h+"px"),_.css("backgroundColor",M({h:a.h,s:100,b:100}))}e.data("minicolors-initialized")&&u(e,c,o)}function u(t,e,i){var n,a,o=t.data("minicolors-settings"),s=t.data("minicolors-lastChange");if(!s||s.value!==e||s.opacity!==i){if(t.data("minicolors-lastChange",{value:e,opacity:i}),o.swatches&&0!==o.swatches.length){for(n=v(e)?f(e,!0):j(e),-1,a=0;a<o.swatches.length;++a)if(n.r===o.swatches[a].r&&n.g===o.swatches[a].g&&n.b===o.swatches[a].b&&n.a===o.swatches[a].a){a;break}t.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected"),-1!==a&&t.parent().find(".minicolors-swatches .minicolors-swatch").eq(a).addClass("selected")}o.change&&(o.changeDelay?(clearTimeout(t.data("minicolors-changeTimeout")),t.data("minicolors-changeTimeout",setTimeout(function(){o.change.call(t.get(0),e,i)},o.changeDelay))):o.change.call(t.get(0),e,i)),t.trigger("change").trigger("input")}}function l(e){var i=g(t(e).val(),!0),n=j(i),a=t(e).attr("data-opacity");return n?(void 0!==a&&t.extend(n,{a:parseFloat(a)}),n):null}function h(e,i){var n=g(t(e).val(),!0),a=j(n),o=t(e).attr("data-opacity");return a?(void 0===o&&(o=1),i?"rgba("+a.r+", "+a.g+", "+a.b+", "+parseFloat(o)+")":"rgb("+a.r+", "+a.g+", "+a.b+")"):null}function d(t,e){return"uppercase"===e?t.toUpperCase():t.toLowerCase()}function g(t,e){return t=t.replace(/^#/g,""),t.match(/^[A-F0-9]{3,6}/gi)?3!==t.length&&6!==t.length?"":(3===t.length&&e&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t):""}function f(t,e){var i=t.replace(/[^\d,.]/g,""),n=i.split(",");return n[0]=m(parseInt(n[0],10),0,255),n[1]=m(parseInt(n[1],10),0,255),n[2]=m(parseInt(n[2],10),0,255),n[3]&&(n[3]=m(parseFloat(n[3],10),0,1)),e?{r:n[0],g:n[1],b:n[2],a:n[3]?n[3]:null}:void 0!==n[3]&&n[3]<=1?"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")":"rgb("+n[0]+", "+n[1]+", "+n[2]+")"}function p(t,e){return v(t)?f(t):g(t,e)}function m(t,e,i){return t<e&&(t=e),t>i&&(t=i),t}function v(t){var e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!e||4!==e.length)}function b(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i),t&&6===t.length?t[4]:"1"}function I(t){var e={},i=Math.round(t.h),n=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0===n)e.r=e.g=e.b=a;else{var o=a,s=(255-n)*a/255,r=i%60*(o-s)/60;360===i&&(i=0),i<60?(e.r=o,e.b=s,e.g=s+r):i<120?(e.g=o,e.b=s,e.r=o-r):i<180?(e.g=o,e.r=s,e.b=s+r):i<240?(e.b=o,e.r=s,e.g=o-r):i<300?(e.b=o,e.g=s,e.r=s+r):i<360?(e.r=o,e.g=s,e.b=o-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}}function C(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}function y(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,function(t,e){1===e.length&&(i[t]="0"+e)}),"#"+i.join("")}function M(t){return y(I(t))}function w(t){var e=A(j(t));return 0===e.s&&(e.h=360),e}function A(t){var e={h:0,s:0,b:0},i=Math.min(t.r,t.g,t.b),n=Math.max(t.r,t.g,t.b),a=n-i;return e.b=n,e.s=0!==n?255*a/n:0,0!==e.s?t.r===n?e.h=(t.g-t.b)/a:t.g===n?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e}function j(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}}t.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]}},t.extend(t.fn,{minicolors:function(o,s){switch(o){case"destroy":return t(this).each(function(){i(t(this))}),t(this);case"hide":return a(),t(this);case"opacity":return void 0===s?t(this).attr("data-opacity"):(t(this).each(function(){c(t(this).attr("data-opacity",s))}),t(this));case"rgbObject":return l(t(this));case"rgbString":case"rgbaString":return h(t(this),"rgbaString"===o);case"settings":return void 0===s?t(this).data("minicolors-settings"):(t(this).each(function(){var e=t(this).data("minicolors-settings")||{};i(t(this)),t(this).minicolors(t.extend(!0,e,s))}),t(this));case"show":return n(t(this).eq(0)),t(this);case"value":return void 0===s?t(this).val():(t(this).each(function(){"object"==typeof s?(s.opacity&&t(this).attr("data-opacity",m(s.opacity,0,1)),s.color&&t(this).val(s.color)):t(this).val(s),c(t(this))}),t(this));default:return"create"!==o&&(s=o),t(this).each(function(){e(t(this),s)}),t(this)}}});var x,T,N;t(document).on("mousedown.minicolors touchstart.minicolors",function(e){t(e.target).parents().add(e.target).hasClass("minicolors")||a()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(e){var i=t(this);e.preventDefault(),t(document).data("minicolors-target",i),o(i,e,!0)}).on("mousemove.minicolors touchmove.minicolors",function(e){var i=t(document).data("minicolors-target");i&&o(i,e)}).on("mouseup.minicolors touchend.minicolors",function(){t(this).removeData("minicolors-target")}).on("click.minicolors",".minicolors-swatches li",function(e){e.preventDefault();var i=t(this),n=i.parents(".minicolors").find(".minicolors-input"),a=i.data("swatch-color");r(n,a,b(a)),c(n)}).on("mousedown.minicolors touchstart.minicolors",".minicolors-input-swatch",function(e){var i=t(this).parent().find(".minicolors-input");e.preventDefault(),"none"!==i.parent().find(".minicolors-panel").css("display")||n(i)}).on("focus.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&n(e)}).on("blur.minicolors",".minicolors-input",function(){var e,i,n,a,o,s=t(this),r=s.data("minicolors-settings");s.data("minicolors-initialized")&&(e=r.keywords?t.map(r.keywords.split(","),function(e){return t.trim(e.toLowerCase())}):[],""!==s.val()&&t.inArray(s.val().toLowerCase(),e)>-1?o=s.val():(v(s.val())?n=f(s.val(),!0):(i=g(s.val(),!0),n=i?j(i):null),o=null===n?r.defaultValue:"rgb"===r.format?f(r.opacity?"rgba("+n.r+","+n.g+","+n.b+","+s.attr("data-opacity")+")":"rgb("+n.r+","+n.g+","+n.b+")"):y(n)),a=r.opacity?s.attr("data-opacity"):1,"transparent"===o.toLowerCase()&&(a=0),s.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",a),s.val(o),""===s.val()&&s.val(p(r.defaultValue,!0)),s.val(d(s.val(),r.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(e){var i=t(this);if(i.data("minicolors-initialized"))switch(e.keyCode){case 9:a();break;case 13:case 27:a(),i.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&c(e,!0)}).on("paste.minicolors",".minicolors-input",function(){var e=t(this);e.data("minicolors-initialized")&&setTimeout(function(){c(e,!0)},1)})})},function(t,e,i){var n,a,o="undefined"!=typeof Buffer&&"undefined"==typeof window,s=!o&&function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,i=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},s=t.webkitRequestFileSystem,r=t.requestFileSystem||s||t.mozRequestFileSystem,c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=0,l=function(e){var n=function(){"string"==typeof e?i().revokeObjectURL(e):e.remove()};t.chrome?n():setTimeout(n,500)},h=function(t,e,i){e=[].concat(e);for(var n=e.length;n--;){var a=t["on"+e[n]];if("function"==typeof a)try{a.call(t,i||t)}catch(t){c(t)}}},d=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},g=function(e,c,g){g||(e=d(e));var f,p,m,v=this,b=e.type,I=!1,C=function(){h(v,"writestart progress write writeend".split(" "))},y=function(){if(!I&&f||(f=i().createObjectURL(e)),p)p.location.href=f;else{void 0==t.open(f,"_blank")&&"undefined"!=typeof safari&&(t.location.href=f)}v.readyState=v.DONE,C(),l(f)},M=function(t){return function(){if(v.readyState!==v.DONE)return t.apply(this,arguments)}},w={create:!0,exclusive:!1};return v.readyState=v.INIT,c||(c="download"),a?(f=i().createObjectURL(e),n.href=f,n.download=c,void setTimeout(function(){o(n),C(),l(f),v.readyState=v.DONE})):(t.chrome&&b&&"application/octet-stream"!==b&&(m=e.slice||e.webkitSlice,e=m.call(e,0,e.size,"application/octet-stream"),I=!0),s&&"download"!==c&&(c+=".download"),("application/octet-stream"===b||s)&&(p=t),r?(u+=e.size,void r(t.TEMPORARY,u,M(function(t){t.root.getDirectory("saved",w,M(function(t){var i=function(){t.getFile(c,w,M(function(t){t.createWriter(M(function(i){i.onwriteend=function(e){p.location.href=t.toURL(),v.readyState=v.DONE,h(v,"writeend",e),l(t)},i.onerror=function(){var t=i.error;t.code!==t.ABORT_ERR&&y()},"writestart progress write abort".split(" ").forEach(function(t){i["on"+t]=v["on"+t]}),i.write(e),v.abort=function(){i.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),y)}),y)};t.getFile(c,{create:!1},M(function(t){t.remove(),i()}),M(function(t){t.code===t.NOT_FOUND_ERR?i():y()}))}),y)}),y)):void y())},f=g.prototype,p=function(t,e,i){return new g(t,e,i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return i||(t=d(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(f.abort=function(){var t=this;t.readyState=t.DONE,h(t,"abort")},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,p)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=s:null!==i(15)&&null!=i(16)&&(n=[],void 0!==(a=function(){return s}.apply(e,n))&&(t.exports=a))},function(t,e,i){var n;!function(){function a(t,e,i){return t.call.apply(t.bind,arguments)}function o(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function s(t,e,i){return s=Function.prototype.bind&&-1!=(""+Function.prototype.bind).indexOf("native code")?a:o,s.apply(null,arguments)}function r(t,e){this.a=t,this.m=e||t,this.c=this.m.document}function c(t,e,i,n){if(e=t.c.createElement(e),i)for(var a in i)i.hasOwnProperty(a)&&("style"==a?e.style.cssText=i[a]:e.setAttribute(a,i[a]));return n&&e.appendChild(t.c.createTextNode(n)),e}function u(t,e,i){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),a=0;a<e.length;a+=1){for(var o=!1,s=0;s<n.length;s+=1)if(e[a]===n[s]){o=!0;break}o||n.push(e[a])}for(e=[],a=0;a<n.length;a+=1){for(o=!1,s=0;s<i.length;s+=1)if(n[a]===i[s]){o=!0;break}o||e.push(n[a])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var i=t.className.split(/\s+/),n=0,a=i.length;n<a;n++)if(i[n]==e)return!0;return!1}function g(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function f(t){return t.m.location.hostname||t.a.location.hostname}function p(t,e,i){function n(){r&&a&&o&&(r(s),r=null)}e=c(t,"link",{rel:"stylesheet",href:e,media:"all"});var a=!1,o=!0,s=null,r=i||null;rt?(e.onload=function(){a=!0,n()},e.onerror=function(){a=!0,s=Error("Stylesheet failed to load"),n()}):setTimeout(function(){a=!0,n()},0),u(t,"head",e)}function m(t,e,i,n){var a=t.c.getElementsByTagName("head")[0];if(a){var o=c(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&a.removeChild(o))},a.appendChild(o),setTimeout(function(){s||(s=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function v(){this.a=0,this.c=null}function b(t){return t.a++,function(){t.a--,C(t)}}function I(t,e){t.c=e,C(t)}function C(t){0==t.a&&t.c&&(t.c(),t.c=null)}function y(t){this.a=t||"-"}function M(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(t){return x(t)+" "+t.f+"00 300px "+A(t.c)}function A(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function j(t){return t.a+t.f}function x(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function T(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function N(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new y("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function S(t){t.g&&h(t.f,[t.a.c("wf","loading")]),L(t,"loading")}function _(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),h(t.f,i,n)}L(t,"inactive")}function L(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,j(i)):t.h[e]())}function D(){this.c={}}function z(t,e,i){var n,a=[];for(n in e)if(e.hasOwnProperty(n)){var o=t.c[n];o&&a.push(o(e[n],i))}return a}function k(t,e){this.c=t,this.f=e,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function O(t){u(t.c,"body",t.a)}function P(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+A(t.c)+";font-style:"+x(t)+";font-weight:"+t.f+"00;"}function Y(t,e,i,n,a,o){this.g=t,this.j=e,this.a=n,this.c=i,this.f=a||3e3,this.h=o||void 0}function E(t,e,i,n,a,o,s){this.v=t,this.B=e,this.c=i,this.a=n,this.s=s||"BESbswy",this.f={},this.w=a||3e3,this.u=o||null,this.o=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.o=new k(this.c,this.s),t=new M(this.a.c+",serif",j(this.a)),t=P(t),this.g.a.style.cssText=t,t=new M(this.a.c+",sans-serif",j(this.a)),t=P(t),this.h.a.style.cssText=t,t=new M("serif",j(this.a)),t=P(t),this.j.a.style.cssText=t,t=new M("sans-serif",j(this.a)),t=P(t),this.o.a.style.cssText=t,O(this.g),O(this.h),O(this.j),O(this.o)}function Z(){if(null===ut){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ut=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return ut}function W(t,e,i){for(var n in ct)if(ct.hasOwnProperty(n)&&e===t.f[ct[n]]&&i===t.f[ct[n]])return!0;return!1}function R(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=Z()&&W(t,i,n)),e?st()-t.A>=t.w?Z()&&W(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?G(t,t.v):G(t,t.B):U(t):G(t,t.v)}function U(t){setTimeout(s(function(){R(this)},t),50)}function G(t,e){setTimeout(s(function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.o.a),e(this.a)},t),0)}function B(t,e,i){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=i}function X(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),L(t,"active")):_(t.a))}function F(t){this.j=t,this.a=new D,this.h=0,this.f=this.g=!0}function H(t,e,i,n,a){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=a||null,r=n||null||{};if(0===i.length&&o)_(e.a);else{e.f+=i.length,o&&(e.j=o);var c,u=[];for(c=0;c<i.length;c++){var l=i[c],d=r[l.c],g=e.a,f=l;g.g&&h(g.f,[g.a.c("wf",f.c,""+j(f),"loading")]),L(g,"fontloading",f),g=null,null===lt&&(lt=!!window.FontFace&&(!(f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(f[1],10))),g=lt?new Y(s(e.g,e),s(e.h,e),e.c,l,e.s,d):new E(s(e.g,e),s(e.h,e),e.c,l,e.s,t,d),u.push(g)}for(c=0;c<u.length;c++)u[c].start()}},0)}function J(t,e,i){var n=[],a=i.timeout;S(e);var n=z(t.a,i,t.c),o=new B(t.c,e,a);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){H(t,o,e,i,n)})}function Q(t,e){this.c=t,this.a=e}function V(t,e,i){var n=g(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),n+"//"+t+"/"+e+".js"+(i?"?v="+i:"")}function K(t,e){this.c=t,this.a=e}function $(t,e,i){this.c=t||e+ht,this.a=[],this.f=[],this.g=i||""}function q(t,e){for(var i=e.length,n=0;n<i;n++){var a=e[n].split(":");3==a.length&&t.f.push(a.pop());var o="";2==a.length&&""!=a[1]&&(o=":"),t.a.push(a.join(o))}}function tt(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function et(t){this.f=t,this.a=[],this.c={}}function it(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),a=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var s,r=n[1];if(s=[],r)for(var r=r.split(","),c=r.length,u=0;u<c;u++){var l;if(l=r[u],l.match(/^[\w-]+$/)){var h=pt.exec(l.toLowerCase());if(null==h)l="";else{if(l=h[2],l=null==l||""==l?"n":ft[l],null==(h=h[1])||""==h)h="4";else var d=gt[h],h=d||(isNaN(h)?"4":h.substr(0,1));l=""+l+h}}else l="";l&&s.push(l)}0<s.length&&(o=s),3==n.length&&(n=n[2],s=[],n=n?n.split(","):s,0<n.length&&(n=dt[n[0]])&&(t.c[a]=n))}for(t.c[a]||(n=dt[a])&&(t.c[a]=n),n=0;n<o.length;n+=1)t.a.push(new M(a,o[n]))}}function nt(t,e){this.c=t,this.a=e}function at(t,e){this.c=t,this.a=e}function ot(t,e){this.c=t,this.f=e,this.a=[]}var st=Date.now||function(){return+new Date},rt=!!window.FontFace;y.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},Y.prototype.start=function(){var t=this.c.m.document,e=this,i=st(),n=new Promise(function(n,a){function o(){st()-i>=e.f?a():t.fonts.load(w(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(o,25)},function(){a()})}o()}),a=new Promise(function(t,i){setTimeout(i,e.f)});Promise.race([a,n]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var ct={D:"serif",C:"sans-serif"},ut=null;E.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=st(),R(this)};var lt=null;B.prototype.g=function(t){var e=this.a;e.g&&h(e.f,[e.a.c("wf",t.c,""+j(t),"active")],[e.a.c("wf",t.c,""+j(t),"loading"),e.a.c("wf",t.c,""+j(t),"inactive")]),L(e,"fontactive",t),this.o=!0,X(this)},B.prototype.h=function(t){var e=this.a;if(e.g){var i=d(e.f,e.a.c("wf",t.c,""+j(t),"active")),n=[],a=[e.a.c("wf",t.c,""+j(t),"loading")];i||n.push(e.a.c("wf",t.c,""+j(t),"inactive")),h(e.f,n,a)}L(e,"fontinactive",t),X(this)},F.prototype.load=function(t){this.c=new r(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,J(this,new N(this.c,t),t)},Q.prototype.load=function(t){function e(){if(o["__mti_fntLst"+n]){var i,a=o["__mti_fntLst"+n](),s=[];if(a)for(var r=0;r<a.length;r++){var c=a[r].fontfamily;void 0!=a[r].fontStyle&&void 0!=a[r].fontWeight?(i=a[r].fontStyle+a[r].fontWeight,s.push(new M(c,i))):s.push(new M(c))}t(s)}else setTimeout(function(){e()},50)}var i=this,n=i.a.projectId,a=i.a.version;if(n){var o=i.c.m;m(this.c,V(i,n,a),function(a){a?t([]):(o["__MonotypeConfiguration__"+n]=function(){return i.a},e())}).id="__MonotypeAPIScript__"+n}else t([])},K.prototype.load=function(t){var e,i,n=this.a.urls||[],a=this.a.families||[],o=this.a.testStrings||{},s=new v;for(e=0,i=n.length;e<i;e++)p(this.c,n[e],b(s));var r=[];for(e=0,i=a.length;e<i;e++)if(n=a[e].split(":"),n[1])for(var c=n[1].split(","),u=0;u<c.length;u+=1)r.push(new M(n[0],c[u]));else r.push(new M(n[0]));I(s,function(){t(r,o)})};var ht="//fonts.googleapis.com/css",dt={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},gt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ft={i:"i",italic:"i",n:"n",normal:"n"},pt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,mt={Arimo:!0,Cousine:!0,Tinos:!0};nt.prototype.load=function(t){var e=new v,i=this.c,n=new $(this.a.api,g(i),this.a.text),a=this.a.families;q(n,a);var o=new et(a);it(o),p(i,tt(n),b(e)),I(e,function(){t(o.a,o.c,mt)})},at.prototype.load=function(t){var e=this.a.id,i=this.c.m;e?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],a=0;a<e.length;a+=2)for(var o=e[a],s=e[a+1],r=0;r<s.length;r++)n.push(new M(o,s[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},ot.prototype.load=function(t){var e=this.f.id,i=this.c.m,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var a=0,o=i.fonts.length;a<o;++a){var s=i.fonts[a];n.a.push(new M(s.name,T("font-weight:"+s.weight+";font-style:"+s.style)))}t(n.a)},m(this.c,g(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+f(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var vt=new F(window);vt.a.c.custom=function(t,e){return new K(e,t)},vt.a.c.fontdeck=function(t,e){return new ot(e,t)},vt.a.c.monotype=function(t,e){return new Q(e,t)},vt.a.c.typekit=function(t,e){return new at(e,t)},vt.a.c.google=function(t,e){return new nt(e,t)};var bt={load:s(vt.load,vt)};void 0!==(n=function(){return bt}.call(e,i,e,t))&&(t.exports=n)}()},function(t,e,i){(function(t){t.util.object.extend(t.BaseBrush.prototype,{useDrawingColor:!0,setOptions:function(t){for(var e in t)this[e]=t[e]},type:"base-brush",initialize:function(t,e){this.canvas=t,e=e||{},this.canvas.application&&this.canvas.application.fire("entity:created",{target:this,options:e}),this.setOptions(e)},convertColor:function(e,i){if(i=i||"name",e instanceof Array){if("source"==i)return e;e="#"+t.Color.fromSource(e).toHex()}if(("hex"==i||"source"==i)&&(t.Color.colorNameMap[e]&&(e=t.Color.colorNameMap[e]),"source"==i)){if("transparent"==e)return[0,0,0,0];var n=t.Color.fromHex(e).getSource();return n[3]*=255,n}return e},getColor:function(t){var e=this.useDrawingColor&&this.canvas.drawingColor||this.color;return this.convertColor(e,t)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.MagicWand=i(8),t.PaintBucketBrush=t.util.createClass(t.BaseBrush,{type:"paint-bucket-brush",initialize:function(t){this.callSuper("initialize",t),this._points=[]},getTarget:function(){return this.canvas.drawingContext},onMouseUp:function(){},onMouseMove:function(){},onMouseDown:function(t){this._fill(t)},_fill:function(e){e={x:Math.floor(e.x),y:Math.floor(e.y)};var i=this.getTarget().getImageData(0,0,this.getTarget().canvas.width,this.getTarget().canvas.height);t.MagicWand.floodFill(i,e.x,e.y,1,{},null,function(t){var e=this.getColor("source"),i=this.getTarget(),n=t.bounds.maxX-t.bounds.minX+1,a=t.bounds.maxY-t.bounds.minY+1,o=i.getImageData(t.bounds.minX,t.bounds.minY,n,a);t.render(i,{intersectionColor:e,fill:e,cache:!1,left:t.bounds.minX,top:t.bounds.minY}),this.canvas.fire("draw:after",{target:this.getTarget(),redo:i.getImageData(t.bounds.minX,t.bounds.minY,n,a),undo:o,left:t.bounds.minX,top:t.bounds.minY,color:this.getColor().slice()}),this.canvas.renderAll()}.bind(this))},getHistoryRecord:function(t){return{canvas:this.canvas,object:t.target,type:"draw:bucket",left:t.left,top:t.top,undoData:t.undo,redoData:t.redo,color:this.convertColor(t.color,"source"),undo:function(t){t.object.putImageData(t.undoData,t.left,t.top),t.canvas.renderAll()},redo:function(t){t.object.putImageData(t.redoData,t.left,t.top),t.canvas.renderAll()}}}}),t.SlideCanvas.prototype.drawingTools.PaintBucketBrush={icon:"data:image/svg+xml;base64,"+i(19),title:"Bucket Brush"},t.SlideCanvas.prototype.activeDrawingTools.push("PaintBucketBrush")}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.PaintPenBrush=t.util.createClass(t.BaseBrush,{type:"paint-pen-brush",initialize:function(t){this.callSuper("initialize",t),this._points=[]},getTarget:function(){return this.canvas.drawingContext},onMouseDown:function(t){this._reset(),this._fill(t)},onMouseMove:function(t){this._fill(t)},onMouseUp:function(){this.canvas.fire("draw:after",{target:this.getTarget(),points:this._points.slice(),color:this.getColor("source")})},_fill:function(t){if(t={x:Math.floor(t.x),y:Math.floor(t.y)},!_.findWhere(this._points,t)){var e=this.getTarget().getImageData(t.x,t.y,1,1);t.color=Array.prototype.slice.call(e.data),this._points.push(t);var i=this.getColor("source");e.data[0]=i[0],e.data[1]=i[1],e.data[2]=i[2],e.data[3]=i[3],this.getTarget().putImageData(e,t.x,t.y),this.canvas.renderAll()}},undoPaintAction:function(t){var e=t.object;for(var i in t.points){var n=t.points[i],a=t.brush.getActionColor(n.color);0==a[3]?e.clearRect(n.x,n.y,1,1):(e.fillStyle="rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")",e.fillRect(n.x,n.y,1,1))}t.canvas.renderAll()},redoPaintAction:function(t){var e=t.object,i=t.brush.getActionColor(t.color),n=t.points;if(0==i[3])for(var a in n)e.clearRect(n[a].x,n[a].y,1,1);else{e.fillStyle="rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]+")";for(var a in n)e.fillRect(n[a].x,n[a].y,1,1)}t.canvas.renderAll()},_reset:function(){this._points.length=0,this.getTarget().fillStyle=this.color},getHistoryRecord:function(t){return{canvas:this.canvas,type:"draw:pen",object:t.target,points:t.points,brush:this,color:t.color,undo:this.undoPaintAction,redo:this.redoPaintAction}}}),t.SlideCanvas.prototype.drawingTools.PaintPenBrush={className:"fa fa-paint-brush",title:"Pen Brush"},t.SlideCanvas.prototype.activeDrawingTools.push("PaintPenBrush")}).call(e,i(0))},function(t,e,i){(function(t){t.PencilBrush.prototype.initialize=function(t){this.callSuper("initialize",t),this._points=[]},t.PencilBrush.prototype.type="pencil-brush",t.PencilBrush.prototype._render=function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,i=this._points[0],n=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),t.lineWidth=1/this.canvas.viewportTransform[0],2===this._points.length&&i.x===n.x&&i.y===n.y&&(i.x-=.5/this.canvas.viewportTransform[0],n.x+=.5/this.canvas.viewportTransform[0]),t.moveTo(i.x,i.y);for(var a=1,o=this._points.length;a<o;a++){var s=i.midPointFrom(n);t.quadraticCurveTo(i.x,i.y,s.x,s.y),i=this._points[a],n=this._points[a+1]}t.lineTo(i.x,i.y),t.stroke(),t.restore()},t.PencilBrush.prototype.createPath=function(e){var i=new t.Path(e,{stroke:this.getColor(),strokeWidth:this.width,application:this.canvas.application});return this.shadow&&(this.shadow.affectStroke=!0,i.setShadow(this.shadow)),i},t.PencilBrush.prototype.minLength=3,t.PencilBrush.prototype.accuracy=0,t.PencilBrush.prototype._finalizeAndAddPath=function(){if(!(this._points.length<2)){if(this.canvas.contextTop.closePath(),this.canvas.clearContext(this.canvas.contextTop),this.accuracy){for(var t in this._points)this._points[t].x=+this._points[t].x.toFixed(this.accuracy),this._points[t].y=+this._points[t].y.toFixed(this.accuracy);for(t=this._points.length-1;t--;)this._points[t].x==this._points[t+1].x&&this._points[t].y==this._points[t+1].y&&this._points.splice(t,1)}if(!(this._points.length<2)){var e=this.convertPointsToSVGPath(this._points).join("");if(this._points.length<this.minLength||"M 0 0 Q 0 0 0 0 L 0 0"===e)return this.canvas.renderAll();var i=this.createPath(e);this.canvas.add(i),i.setCoords(),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:i})}}},t.SlideCanvas.prototype.drawingTools.PencilBrush={className:"fa fa-pencil",title:"Pencil Brush"},t.SlideCanvas.prototype.activeDrawingTools.push("PencilBrush")}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.PointsBrush=t.util.createClass(t.BaseBrush,{type:"points-brush",maximumPoints:0,initialize:function(t){this.callSuper("initialize",t),this.reset()},currentPoint:1,getPoints:function(){return t.util.object.where(this.canvas._objects,{type:"material-point"})},checkPosition:null,onMouseDown:function(t){},onMouseMove:function(t){},reset:function(){},onMouseUp:function(e){var i=this.getPoints(),n={left:e.x-.5,top:e.y-.5};if(this.checkPosition&&!this.checkPosition(e))return void this.canvas.fire("point:rejected",{point:e});if(this.maximumPoints&&i.length>=this.maximumPoints){this.currentPoint>this.maximumPoints&&(this.currentPoint=1),this.wholeCoordinates&&(e.x=Math.round(e.x)+.5,e.y=Math.round(e.y)+.5);var a=t.util.object.findWhere(i,{number:this.currentPoint++}),o={original:{left:a.left,top:a.top},modified:{left:e.x-.5,top:e.y-.5}};return a.set(o.modified).setCoords().fire("modified",{states:o}),this.canvas.fire("object:modified",{target:a,states:o}),this.canvas.setActiveObject(a),void this.canvas.renderAll()}for(this.currentPoint=1;t.util.object.findWhere(i,{number:this.currentPoint});)this.currentPoint++;var a=new t.MaterialPoint({number:this.currentPoint,application:this.canvas.application,left:n.left,top:n.top});this.currentPoint++,this.canvas.add(a),this.canvas.fire("point:created",{point:a}),this.canvas.setActiveObject(a),this.canvas.renderAll()},_render:function(){}}),t.SlideCanvas.prototype.drawingTools.PointsBrush={className:"fa fa-circle-o",title:"Points Brush"}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.PolygonBrush=t.util.createClass(t.BaseBrush,{resultObjectType:"Polyline",type:"polygon-brush",virtualObject:!1,maximumPoints:0,individualDrawing:!0,initialize:function(t){this.callSuper("initialize",t),this.reset()},onMouseDown:function(e){if(this.individualDrawing||!this.target){var i={x:e.x,y:e.y};this.points.push(i),this.virtualObject||(this.target=this.canvas.createObject(t.util.object.extend({},this.resultObjectProperties,{type:this.resultObjectType,points:[i],active:!0})))}else this._create_active_point(e);this.virtualObject?(this._setBrushStyles(),this._setShadow(),this._render()):this.canvas.renderAll()},_create_active_point:function(t){var e={x:t.x,y:t.y};this.activePoint=e,this.activeTargetPoint={x:t.x-this.target.left,y:t.y-this.target.top},this.points.push(this.activePoint),this.target.addPoint(this.activeTargetPoint)},onMouseMove:function(e){var i={x:e.x-this.target.left,y:e.y-this.target.top};if(this.activePoint){this.activePoint.x=e.x,this.activePoint.y=e.y;var n=this.target.points.length;this.target.setPoint("p"+n,{x:e.x-this.target.left,y:e.y-this.target.top})}else{t.Point.prototype.distanceFrom.call(this.points[0],i)>10&&this._create_active_point(e)}this.canvas.renderAll()},reset:function(){this.points=[],this.target=null,this.activePoint=null,this.activeTargetPoint=null},onMouseUp:function(){this.target.updateBbox(),this.points.length==this.maximumPoints&&this.reset(),this.activePoint=null,this.canvas.renderAll()},_render:function(){this.canvas.fire("before:brush:render",{target:this});var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]);var n=t[this.resultObjectType].prototype;e.lineWidth=n.strokeWidth,e.strokeStyle=n.stroke,e.fillStyle=n.fill,e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y);for(var a=1;a<this.points.length;a++)e.lineTo(this.points[a].x,this.points[a].y);e.closePath(),e.fill(),e.stroke(),e.restore(),this.canvas.fire("brush:render",{target:this})},drawingLimits:null,minHeight:50,minWidth:50,_checkRectangle:function(e){var i=this.drawingLimits;if(i&&"backgroundImage"==i&&(i=this.canvas.backgroundImage),e={left:e.left,top:e.top,width:e.width,height:e.height},e.left-=t.Rect.prototype.strokeWidth/2,e.top-=t.Rect.prototype.strokeWidth/2,i){if(e.left+e.width<i.left||e.top+e.height<i.top||e.left>i.width||e.top>i.height)return!1;e.top<i.top&&(e.height+=e.top,e.top=i.top),e.left<i.left&&(e.width+=e.left,e.left=i.left)}if(this.minWidth&&e.width<this.minWidth&&(e.width=this.minWidth),this.minHeight&&e.height<this.minHeight&&(e.height=this.minHeight),i){var n=e.left+e.width-i.width;n>0&&(e.width-=n,this.minWidth&&e.width<this.minWidth&&(e.left-=this.minWidth-e.width,e.width=this.minWidth));var a=e.top+e.height-i.height;a>0&&(e.height-=a,this.minHeight&&e.height<this.minHeight&&(e.top-=this.minHeight-e.height,e.height=this.minHeight))}return e},resultObjectProperties:{}}),t.SlideCanvas.prototype.drawingTools.PolygonBrush={icon:"data:image/png;base64,"+i(20),title:"Polygon Brush"},t.SlideCanvas.prototype.activeDrawingTools.push("PolygonBrush")}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.RectangleBrush=t.util.createClass(t.BaseBrush,{resultObjectType:"Rect",type:"rectangle-brush",initialize:function(t){this.callSuper("initialize",t)},onMouseDown:function(e){delete this.p2,this.p1=new t.Point(e.x,e.y),this._setBrushStyles(),this._setShadow(),this.canvas.contextTop.moveTo(this.p1.x,this.p1.y),this._render()},onMouseMove:function(e){if(this.p2=new t.Point(e.x,e.y),this.drawingObject){var i=this._getRect();this.drawingObject.set(i),this.drawingObject.fire("scaling")}else if(this.p1.x===this.p2.x&&this.p1.y===this.p2.y)delete this.p2;else if(this.resultObjectType){var i=this._getRect();this.drawingObject=this._createRectangle(i)}this.canvas.renderLayer("lower")},onMouseUp:function(){if(this.drawingObject){var t=this._getRect(),e=this._checkRectangle(t);this.canvas.layers.lower.objects.splice(this.canvas.layers.lower.objects.indexOf(this.drawingObject),1),this.drawingObject.set(e),this.canvas.add(this.drawingObject),this.canvas.setActiveObject(this.drawingObject),this.drawingObject.setCoords(),delete this.drawingObject}this.canvas.renderAll()},_render:function(){if(this.canvas.fire("before:brush:render",{target:this}),this.p2){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;this.p1,this.p2;if(e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.beginPath(),this.application){var n=this.application.getDefaultProperties(t[this.resultObjectType].prototype)||{};e.lineWidth=n.strokeWidth,e.strokeStyle=n.stroke,e.fillStyle=n.fill}var a=this._getRect();e.rect(a.left,a.top,a.width,a.height),e.fill(),e.stroke(),e.restore(),this.canvas.fire("brush:render",{target:this})}},_getRect:function(){var t,e,i,n;return this.p1.x<this.p2.x?(t=this.p1.x,e=this.p2.x):(e=this.p1.x,t=this.p2.x),this.p1.y<this.p2.y?(i=this.p1.y,n=this.p2.y):(n=this.p1.y,i=this.p2.y),{left:t,top:i,width:e-t,height:n-i}},drawingLimits:null,minHeight:50,minWidth:50,_checkRectangle:function(t){var e=this.drawingLimits;if(e&&"backgroundImage"==e&&(e=this.canvas.backgroundImage),t={left:t.left,top:t.top,width:t.width,height:t.height},e){if(t.left+t.width<e.left||t.top+t.height<e.top||t.left>e.width||t.top>e.height)return!1;t.top<e.top&&(t.height+=t.top,t.top=e.top),t.left<e.left&&(t.width+=t.left,t.left=e.left)}if(this.minWidth&&t.width<this.minWidth&&(t.width=this.minWidth),this.minHeight&&t.height<this.minHeight&&(t.height=this.minHeight),e){var i=t.left+t.width-e.width;i>0&&(t.width-=i,this.minWidth&&t.width<this.minWidth&&(t.left-=this.minWidth-t.width,t.width=this.minWidth));var n=t.top+t.height-e.height;n>0&&(t.height-=n,this.minHeight&&t.height<this.minHeight&&(t.top-=this.minHeight-t.height,t.height=this.minHeight))}return t},_createRectangle:function(e){this.canvas.setActiveObject(!1),e.active=!0,e.application=this.application,e.canvas=this.canvas;var i=t.util.createObject(this.resultObjectType,e);return this.canvas.layers.lower.objects.push(i),i.updateResponsiveBorder(),this.canvas.renderAll(),i}}),t.SlideCanvas.prototype.drawingTools.RectangleBrush={className:"fa fa-pencil-square",title:"select-brush"},t.SlideCanvas.prototype.activeDrawingTools.push("RectangleBrush")}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Application=function(t){this.init(t)},t.Application.prototype=t.util.object.extend({},t.Observable,{defaultOptions:{canvasContainer:null},credentials:!1,ready:!1,canvasClass:"Canvas",optionsOrder:["canvasContainer","*","objects","slide"],plugins:{preloaders:[],configuration:[],canvas:[]},eventListeners:{"canvas:created":[],"entity:created":[function(t){if(t.target.eventListeners)for(var e in t.target.eventListeners){var i=t.target.eventListeners[e];if(i.constructor==Array)for(var n in i)t.target.on(e,i[n]);else t.target.on(e,i)}if(t.options.eventListeners)for(var e in t.options.eventListeners)t.target.on(e,t.options.eventListeners[e]);if(delete t.options.eventListeners,t.target._default_event_listeners)for(var e in t.target._default_event_listeners)t.target.on(e,t.target._default_event_listeners[e])}]},onSlideLoaded:function(){},onCanvasCreated:function(){},callback:function(){},init:function(e){this.initEventListeners(),e=t.util.object.deepExtend({},this.defaultOptions,e||{}),this.fire("loading:begin",{options:e}),this._options=e,$(document).ready(function(){t.util.order([this.preloader,this.loadConfiguration,this.initOptions,this.initialize,this.onApplicationCreated,this.postloader,this.callback&&function(){setTimeout(this.callback.bind(this),0)},function(){this.fire("ready")}.bind(this)],this)}.bind(this))},onApplicationCreated:function(){this.ready=!0,this.fire("loading:end",{})},setCredentials:function(t){},initOptions:function(t,e){this.set(this._options,t)},loadConfiguration:function(e,i){if(!this._options.configuration)return e();var n=this;t.util.promise.map(this._options.configuration,function(e){return new Promise(function(i,n){t.util.data.loadJson(e,i,n)})}).then(function(e){t.util.object.extend(n._options,e)}).then(e,i)},setCanvasContainer:function(e){if(this.canvasContainer=e,e.constructor==String)var i=document.getElementById(e);else i=e;this.canvas=new t[this.canvasClass](i,{application:this}),this.fire("canvas:created"),this.onCanvasCreated()},dispose:function(){this.canvas.dispose()},setEventListeners:function(t){this.on(t)},initEventListeners:function(){this.__eventListeners||(this.__eventListeners={});for(var t in this.eventListeners)this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t]=this.__eventListeners[t].concat(this.eventListeners[t])},__set:t.Object.prototype.__set,_setObject:t.Object.prototype._setObject,set:t.Object.prototype.set,setOptions:t.Object.prototype.setOptions,actions:{save:{title:"save project",className:"fa fa-floppy-o",action:function(){var t=this.toObject();this.application.api.save(t)}}}}),t.app=function(e){return new t.Application(e)}}).call(e,i(0))},function(t,e,i){(function(t){t.util.object.extend(t.Application.prototype,{optionsOrder:function(){var e=t.Application.prototype.optionsOrder;return e.splice(e.indexOf("canvasContainer"),0,"prototypes"),e}(),getDefaultProperties:function(e){if(this.prototypes){var i=t.util.string.capitalize(t.util.string.camelize(e.type),!0),n=e.__proto__&&e.__proto__.type&&this.getDefaultProperties(e.__proto__)||{},a=t.util.object.clone(this.prototypes[i]);return t.util.object.extend(n,a),n}},prototypes:{Object:{includeDefaultValues:!1},Canvas:{includeDefaultValues:!1}},setUtils:function(e){e&&(t.util.object.extend(this.util||{},e),this.options.util&&t.util.object.extend(t.util,this.options.util),this.options.fabric&&t.util.object.extend(t,this.options.fabric),delete this.options.fabric,delete this.options.util)},setPrototypes:function(e){var i=t.util.object.deepExtend({},this.prototypes,e);this.prototypes=i,this.klasses={},i.eventListeners&&(i.eventListeners.$extend="array");for(var n in i){var a=i[n];for(var o in a)if(a[o]&&a[o].$extend){var s=a[o].$extend;a[o]="array"==s?t.util.object.extendArraysObject(t[n].prototype[o],a[o]):"deep"==s?t.util.object.deepExtend(t[n].prototype[o],a[o]):t.util.object.extend(t[n].prototype[o],a[o]),delete a[o].$extend}if(a.$super){var r=t[a.$super||n];delete a.$super;var c=a.fromObject||r.fromObject;delete a.fromObject;var u=this.klasses[n]=t.util.createClass(r,a);u.fromObject=c.bind(u)}}i.Application&&t.util.object.deepExtend(this,i.Application),this.actions&&this.actions.constructor==Function&&(this.actions=this.actions.call(this))},eventListeners:t.util.object.extendArraysObject(t.Application.prototype.eventListeners,{"entity:created":function(e){var i=e.target;i.application=this,t.util.object.defaults(e.options,this.getDefaultProperties(i,e.options));for(var n in e.options){var a=e.options[n];if("+"==n[0]){var o=n.substr(1),s=i.get(o);s=s instanceof Array?s.slice().concat(a):t.util.object.extend({},s,a),e.options[o]=s,delete e.options[n]}}delete e.options.type,delete e.options.application}})})}).call(e,i(0))},function(t,e,i){(function(t){t.Slide=function(e,i){if(t.isLikelyNode){var n=i.slideWidth,a=i.slideHeight,o=t.SlideCanvas.prototype.zoom||1;this.canvas=t.createCanvasForNode(n*o,a*o)}else this.canvas=new t.SlideCanvas({application:e,interactive:!1});this.object=i,this.application=e,this.id=++t.Slide._slides_id_counter},t.Slide.prototype=t.util.object.extend({},t.Observable,{title:"Новый Слайд"}),t.Slide._slides_id_counter=1,t.util.object.extend(t.Application.prototype,{defaultOptions:t.util.object.extend(t.Application.prototype.defaultOptions,{activeSlide:0}),optionsOrder:function(){var e=t.Application.prototype.optionsOrder;return e.push("activeSlide","slides"),e}(),activeSlide:0,setSlides:function(e){e=t.util.object.cloneDeep(e),this.slides=[],this.canvas&&(this.canvas._objects.length=0),e.forEach(function(t){this.addSlide(t)}.bind(this)),this.preload(),this.lazyLoad()},setActiveSlide:function(t){return},unloadUnactiveSlides:!1,lazyLoadEnabled:!0,lazyLoad:function(){var t=this;this.lazyLoadEnabled?this.slides.forEach(function(e){e.canvas.loaded||e.canvas.processing||e.canvas.load(e.object,function(){e.fire("loaded"),t.activeSlide==e.id&&this.setActiveSlide(e),t.fire("slide:loading:end",{target:this});for(var i in t.slides)if(!t.slides[i].canvas.loaded)return;t.fire("loading:end",{})}.bind(e))}):t.fire("loading:end",{})},addSlide:function(e){var i=new t.Slide(this,e);return this.slides.push(i),i},removeSlide:function(t){var e=this.slides,i=e.indexOf(t);e.splice(i,1),t==this.activeSlide&&delete this.activeSlide},moveSlide:function(t,e){var i=this.slides,n=i.indexOf(t);e=parseInt(e),i.splice(n,1),i.splice(e,0,t)},replaceSlide:function(t,e){var i=this.slides,n=i[e],a=i.indexOf(t);a<e?(i.splice(e,1,t),i.splice(a,1,n)):(i.splice(a,1,n),i.splice(e,1,t))},preload:function(){for(var t in this.slides){this.slides[t]}},setActiveSlideByIndex:function(t){this.setActiveSlide(this.slides[t])},setActiveSlideById:function(e){this.setActiveSlide(t.util.object.findWhere(this.slides,{id:e}))},duplicateSlide:function(t){t=t.canvas.toObject();var e=this.addSlide(t);e.canvas.load(e.object)},nextSlide:function(){var t=this.slides.indexOf(this.activeSlide);t<this.slides.length-1&&this.setActiveSlide(t+1)},prevSlide:function(){var t=this.slides.indexOf(this.activeSlide);t>0&&this.setActiveSlide(t-1)},gotoSlide:function(t){this.setActiveSlide(t-1)},nextSlideAvailable:function(){return this.slides.indexOf(this.activeSlide)<this.slides.length-1},prevSlideAvailable:function(){return this.slides.indexOf(this.activeSlide)>0}}),t.util.object.extend(t.SlideCanvas.prototype,{mirror:function(t){this.discardActiveGroup(),this.discardActiveObject(),this.setOriginalSize({width:t.originalWidth||t.width,height:t.originalHeight||t.height}),this.backgroundImage=t.backgroundImage,this.resizable?(this.originalWidth=t.originalWidth,this.originalHeight=t.originalHeight):(this.setWidth((t.originalWidth||t.width)*this.viewportTransform[0]),this.setHeight((t.originalHeight||t.height)*this.viewportTransform[0])),this._onResize(),this.activeArea=t.activeArea,this.originalSlide=t,this.template=t.template,this.offsets=t.offsets,this.backgroundImage&&(this.backgroundImage.canvas=this);for(var e in t.layers)this.layers[e].objects=[];if(this._objects=this.layers.lower.objects,t.layers){for(var e in t.layers){for(var i in t.layers[e].objects)this.add(t.layers[e].objects[i]);t.layers[e].objects=this.layers[e].objects}t._objects=this._objects}else{if(t._objects)for(var i in t._objects)this.add(t._objects[i]);t._objects=this._objects}var n=this;t.on("object:added",function(t){n.add(t.target)}),this.fire("changed",{target:t})},project:null,unique:!1,required:!1,stateProperties:["unique","required"],removeSlide:function(){this.project.removeSlide(this)},duplicateSlide:function(){this.project.duplicateSlide(this)}})}).call(e,i(0))},function(t,e,i){(function(t){Object.values||Object.defineProperty(Object,"values",{enumerable:!1,configurable:!1,writable:!1,value:function(t){var e=[];return Object.keys(t).forEach(function(i){e.push(t[i])}),e}}),t.util.object.extend(t,{errors:[]}),t.util.order=function(t,e){!function i(){if(t.length){var n=t.shift();n?n.length?n.call(e,i):(n.call(e),i()):i()}}()},t.util.promise={map:function(t,e){if(t.constructor==Array)return Promise.all(t.map(e)).then(function(t,e){return e?Promise.reject(e):Promise.resolve(t)});var i=Object.keys(t),n=Object.values(t);return Promise.all(n.map(e)).then(function(t,e){if(e)return Promise.reject(e);for(var n={},a=0;a<t.length;a++)n[i[a]]=t[a];return Promise.resolve(n)})},wrap:function(t){return function(e){return function(){Array.prototype.slice.call(arguments,1);return e.length?new Promise(e.bind(t)):new Promise(function(i,n){var a=e.call(t);a||void 0===a?i():n()})}}}},t.Object.prototype.set=function(t,e){return"object"==typeof t?this._setObject(t,e):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},t.Object.prototype._setObject=function(e,i){var n=Object.keys(e);if(this.optionsOrder){for(var a,o,s=this.optionsOrder.indexOf("*")||-1,r=s;a=this.optionsOrder[--r];)-1!==(o=n.indexOf(a))&&(n.splice(o,1),n.unshift(a));for(r=s;a=this.optionsOrder[++r];)-1!==(o=n.indexOf(a))&&(n.splice(o,1),n.push(a))}for(var r=0;r<n.length;r++){var a=n[r];"function"==typeof e[a]&&(n.splice(r,1),n.unshift(a))}var c;for(var r in n){var u=n[r];if(void 0!==e[u]&&null!==e[u]){var l="set"+t.util.string.capitalize(u,!0);this[l]&&this[l].name&&"anonymous"!=this[l].name?2==this[l].length?(c?c.total++:c=t.util.queueLoad(2,i),this[l](e[u],function(t){c()}.bind(this,u))):this[l](e[u]):this.__set(u,e[u])}}c?c():i&&i()};var e=t.Canvas.prototype.getPointer;t.util.object.extend(t.Canvas.prototype,{setWidth:function(t){return this.setDimensions({width:t},{})},setHeight:function(t){return this.setDimensions({height:t},{})},_setObject:t.Object.prototype._setObject,originalState:{},stateProperties:[],editingObject:null,getObjectByID:function(t){var e=this.layers||[{objects:this._objects}];for(var i in e)for(var n in e[i].objects)if(e[i].objects[n].id===t)return e[i].objects[n];return null},getPointer:function(t,i,n){var a=e.call(this,t,i,n);return t._group?this._normalizePointer(t._group,a):a},__set:t.Object.prototype._set,getModifiedStates:function(t){var e={original:{},modified:{}};for(var i in t.originalState)if(t.originalState[i]!==t[i]){if(t.originalState[i]instanceof Object&&JSON.stringify(t.originalState[i])==JSON.stringify(t[i]))continue;e.original[i]=t.originalState[i],e.modified[i]=t[i]}return e},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this._restoreOriginXY(e),this.fireModifiedIfChanged(e)},fireModifiedIfChanged:function(t){if(this.stateful){var e=t.hasStateChanged();e&&(this.fire("object:modified",{target:t,states:e}),t.fire("modified",{states:e}))}},get:t.Object.prototype.get,set:t.Object.prototype.set,hasStateChanged:t.Object.prototype.hasStateChanged,_createLowerCanvas:function(e){"string"==typeof e?this.lowerCanvasEl=t.util.getById(e)||this._createCanvasElement():e?this.lowerCanvasEl=e:(this.virtual=!0,this.lowerCanvasEl=t.util.createCanvasElement()),this._initCanvasElement(this.lowerCanvasEl),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},findTarget:function(t,e){if(!this.skipTargetFind){var i=this.getPointer(t,!0),n=this.getActiveGroup(),a=this.getActiveObject();if(n&&!e&&this._checkTarget(i,n))return n;if(a&&this._checkTarget(i,a))return this._fireOverOutEvents(a,t),a;this.targets=[];var o=this._searchPossibleTargets(this._objects,i);return this._fireOverOutEvents(o,t),o}}}),t.util.object.extend(t.Object.prototype,{setAngle:function(t){this.angle=t},__set:t.Object.prototype._set,get:t.Object.prototype.get,_set:function(e,i,n){var a="set"+t.util.string.capitalize(e,!0);return this[a]&&this[a].name&&"anonymous"!=this[a].name?this[a](i,n):this.__set(e,i),this},disable:function(){this.set({selectable:!1,evented:!1,hasControls:!1,lockMovementX:!0,lockMovementY:!0})},stored:!0,saveState:function(e){return this.stateProperties.forEach(function(e){var i=this.get(e);i instanceof Object?this.originalState[e]=t.util.object.cloneDeep(i):this.originalState[e]=i},this),e&&e.stateProperties&&e.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},hasStateChanged:function(){var t=0,e={original:{},modified:{}};for(var i in this.originalState)if(this.originalState[i]!==this[i]){if(this.originalState[i]instanceof Object&&JSON.stringify(this.originalState[i])==JSON.stringify(this[i]))continue;e.original[i]=this.originalState[i],e.modified[i]=this[i],t++}return t&&e}}),t.util.getProportions=function(t,e,i){i=i||"fit";var n=t.naturalWidth||t.width,a=t.naturalHeight||t.height;if(!e.height&&!e.width)return{scale:1,width:n,height:a};if(!t.height&&!t.width)return{scale:.001,width:e.width,height:e.height};var o,s=e.width&&e.width/n||999,r=e.height&&e.height/a||999;return"cover"===i&&(o=Math.max(s,r)),"fit"===i&&(o=Math.min(s,r)),"center"===i&&(o=1),{scale:o,width:Math.floor(n*o),height:Math.floor(a*o)}},t.util.Utf8ArrayToStr=function(t){var e,i,n,a,o,s;for(e="",n=t.length,i=0;i<n;)switch((a=t[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(a);break;case 12:case 13:o=t[i++],e+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=t[i++],s=t[i++],e+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}return e},t.util.createObject=function(e,i,n){"string"!=typeof e?(n=i,i=e,e=null):i.type=e;var a=i.application;a&&a.fire("entity:load",{options:i});var o=t.util.string.camelize(t.util.string.capitalize(e||i.type||a.prototypes.Object.type,!0)),s=t[o]||a.klasses[o];if(!s)return n(new t.Rect(i));var r=s.fromObject(i,function(t){n&&n(t),n=null});return r&&(n&&n(r),n=null),r},t.util.dataURItoBlob=function(t,e){for(var i=atob(t.split(",")[1]),n=[],a=0;a<i.length;a++)n.push(i.charCodeAt(a));return new Blob([new Uint8Array(n)],{type:e})},t.util.blobToDataURL=function(t,e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(t)},t.util.createCanvasElementWithSize=function(e){var i=t.util.createCanvasElement();return i.width=e.width,i.height=e.height,i},t.util.string.toDashed=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.util.string.uncapitalize=function(t){return t.charAt(0).toLowerCase()+t.slice(1)}}).call(e,i(0))},function(t,e,i){(function(t){var e=t.Group.prototype.remove;t.util.object.extend(t.Group.prototype,{remove:function(){return 0===arguments.length?this.canvas&&this.canvas.remove(this):e.apply(this,arguments),this}})}).call(e,i(0))},function(t,e,i){(function(t){i(7),t.util.object.extend(t.Image.prototype,t.ImageMixin,{async:!0,toObjectNative:t.Image.prototype.toObject,toObject:function(){var e=t.Image.prototype.toObjectNative.apply(this,arguments);return 0==e.src.indexOf(t.util.mediaRoot)&&(e.src=e.src.replace(t.util.mediaRoot,"")),e},initialize:function(e,i,n){i||(i={}),this.filters=[],this.resizeFilters=[],i.originalSrc&&(this._edited=!0,t.util.loadImage(i.originalSrc,function(t){this._originalElement=t}.bind(this))),this._initElement(e,i,n&&function(){t.Object.prototype.initialize.call(this,i,n)}.bind(this))},_initElement:function(e,i,n){this.setElement(t.util.getById(e),n,i),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},setCrossOrigin:function(t){return this.crossOrigin=t,this._element&&(this._element.crossOrigin=t),this},setElement:function(t,e,i){var n,a;return this._element=t,this._originalElement=t,this._initConfig(i),0===this.resizeFilters.length?n=e:(a=this,n=function(){a.applyFilters(e,a.resizeFilters,a._filteredEl||a._originalElement,!0)}),0!==this.filters.length?this.applyFilters(n):n&&n(this),this.canvas.renderAll(),this},actions:{source:{type:"effect",className:"fa fa-file-image-o",title:"source",actionParameters:function(t,e){e.target.application.createGallery(e.target,t)}}}}),t.util.initFilters=function(e,i,n){t.Image.prototype._initFilters.call(i,i.filters,function(a){i.filters=a||[],t.Image.prototype._initFilters.call(i,i.resizeFilters,function(t){i.resizeFilters=t||[],n(e,i)})})},t.util.initImageAndFilters=function(e,i){if(e.image){var n=e.image;delete e.src,delete e.image,t.util.initFilters(n,e,i)}else e.src?t.util.loadImage(e.src,function(n){t.util.initFilters(n,e,i)},null,e.crossOrigin):t.util.initFilters(null,e,i)},t.Image.fromObject=function(e,i){t.util.initImageAndFilters(e,function(e,n){new t.Image(e,n,i)})},t.Image.prototype._to_object_overwritten=t.Image.prototype.toObject,t.Image.prototype.setSrc=function(t){},t.Image.prototype.toObject=function(e){var i=t.Image.prototype._to_object_overwritten.call(this,e);return this._edited?(i.originalSrc=this._original_src||this._originalElement.src||this._element.src,i.src=this._element.src):i.src=this._original_src||this._originalElement.src||this._element.src,this.contentOffsets&&(i.contentOffsets=this.contentOffsets),this.includeDefaultValues||i.filters.length||delete i.filters,i}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.INCLUDE_ALL="*";var e=t.Object.prototype.toObject;t.util.object.extend(t.Object.prototype,{storeProperties:["*"],eventListeners:{},toObject:function(i){i==t.INCLUDE_ALL&&(i=[t.INCLUDE_ALL]),i=i||[],i=i.concat(this.storeProperties);var n=e.call(this,i);if(i[0]!==t.INCLUDE_ALL&&(this.includeDefaultValues||this._removeDefaultValues(n)),-1==this.storeProperties.indexOf("*"))for(var a in n)-1==this.storeProperties.indexOf(a)&&delete n[a];return this.fire("before:object",{object:n}),n},setOptions:function(t){this._setObject(t)},_initEntity:function(t){t.application&&t.application.fire("entity:created",{target:this,options:t})},initialize:function(t,e){t=t||{},this._initEntity(t);var i=this;this._setObject(t,function(){i.loaded=!0,i.fire("loaded"),e&&e(i)})},add:function(t){t.add(this)},set:function(t,e){return"object"==typeof t?this._setObject(t):"&"==t[0]?(t=t.substr(1),this._set(t,e(this.get(t)))):this._set(t,e),this}}),t.util.object.extend(t.Object.prototype,{hasBoundsControls:!0,flipTools:!1,orderTools:!1,stroke:"transparent",onTop:function(){return this.canvas._objects.indexOf(this)==this.canvas._objects.length-1},flop:function(){this.flipY=!this.flipY,this.canvas.renderAll()},flip:function(){this.flipX=!this.flipX,this.canvas.renderAll()},onBottom:function(){return 0==this.canvas._objects.indexOf(this)},duplicate:function(){var e=this.toObject(t.INCLUDE_ALL);return e.active=!0,e.cloneSync&&e.cloneSync()||this.canvas.createObject(e)},minStrokeWidth:0,maxStrokeWidth:function(){return Math.min(this.width,this.height)/2},actions:{boundingRect:{type:"label",template:'<dt>L:</dt><dd class="{leftClass}" title="{left}">{roundLeft}</dd><dt>T:</dt><dd class="{topClass}"  title="{top}">{roundTop}</dd><dt>R:</dt><dd class="{rightClass}" title="{right}">{roundRight}</dd><dt>B:</dt><dd class="{bottomClass}"  title="{bottom}">{roundBottom}</dd>',value:{observe:"modified scaling moving rotating",get:function(){var t=this.getBoundingRect();if(this.movementLimits){if(this.movementLimits==this.canvas)var e=this.canvas.viewportTransform,i={left:e[4],top:e[5],width:(this.canvas.originalWidth||this.canvas.width)*e[0],height:(this.canvas.originalHeight||this.canvas.height)*e[3],right:0,bottom:0};else i=this.movementLimits.getBoundingRect();t.bottom=this.movementLimits.height-t.height;var n=t.top-i.top,a=t.left-i.left,o=i.width-t.width-a,s=i.height-t.height-n}else n=t.top,a=t.left,s=this.canvas.height-t.height-t.top,o=this.canvas.width-t.width-t.left;return{topClass:n>0?"positive":n<0?"negative":"zero",bottomClass:s>0?"positive":s<0?"negative":"zero",leftClass:a>0?"positive":a<0?"negative":"zero",rightClass:o>0?"positive":o<0?"negative":"zero",top:n,left:a,bottom:s,right:o,roundTop:Math.round(n),roundLeft:Math.round(a),roundBottom:Math.round(s),roundRight:Math.round(o)}}}},position:{title:"position",type:"menu",menu:{objectLeft:{type:"number",title:"left",value:{set:function(t){this.left=t,this.fire("modified"),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll()},get:function(){return this.left},observe:"modified"}},objectTop:{type:"number",title:"top",value:{set:function(t){this.top=t,this.fire("modified"),this.canvas.fire("object:modified",{target:this}),this.canvas.renderAll()},get:function(){return this.top},observe:"modified"}}}},dimensions:{title:"dimensions",type:"menu",menu:{objectWidth:{type:"number",title:"width",value:{set:function(t){this.saveState(),this.dimensionsWidthValue=t,this.scaleToWidth(t*this.canvas.getZoom()),this.canvas.fireModifiedIfChanged(this),this.canvas.renderAll(),delete this.dimensionsWidthValue},get:function(){return this.dimensionsWidthValue?this.dimensionsWidthValue:Math.round(this.getBoundingRect().width/this.canvas.getZoom())},observe:"modified"}},objectHeight:{type:"number",title:"height",value:{set:function(t){this.saveState(),this.scaleToHeight(t*this.canvas.getZoom()),this.dimensionsHeightValue=t,this.canvas.fireModifiedIfChanged(this),this.canvas.renderAll(),delete this.dimensionsHeightValue},get:function(){return this.dimensionsHeightValue?this.dimensionsHeightValue:Math.round(this.getBoundingRect().height/this.canvas.getZoom())},observe:"modified"}}}},center:{className:"fa fa-bullseye",title:"Center",action:function(){this.center(),this.setCoords()}},objectFlip:{className:"fa fa-arrows-h",title:"flip",action:"flip"},flop:{className:"fa fa-arrows-v",title:"flop"},bringForward:{title:"bring forward",className:"fa fa-level-up",disabled:"onTop"},sendBackwards:{title:"send backwards",className:"fa fa-level-down",disabled:"onBottom"},remove:{className:"fa fa-trash",title:"remove",key:"Delete"},duplicate:{className:"fa fa-clone",title:"duplicate"}}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function e(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i.splice(i.indexOf(e),1):i.length=0}}t.Canvas.prototype.stopObserving=t.Object.prototype.stopObserving=function(t,i){if(this.__eventListeners){if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in t)e.call(this,n,t[n]);else e.call(this,t,i);return this}},t.Observable.on=t.Canvas.prototype.on=t.Object.prototype.on=function(t,e,i){if(t.constructor==Object){for(var n in t)this.on(n,t[n],i);return this}var a=t.split(" ");for(var n in a)t=a[n],this.observe(t,e),i&&this.__eventListeners[t].unshift(this.__eventListeners[t].pop());return this},t.Canvas.prototype.off=t.Object.prototype.off=function(t,e){var i=t.split(" ");for(var n in i)this.stopObserving(i[n],e);return this},t.Canvas.prototype.fire=t.Object.prototype.fire=function(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i)for(var n=0,a=i.length;n<a;n++)i[n].call(this,e||{});var o=this.__eventListeners["*"];if(o)for(e=e||{},e.eventName=t,e.listeners=i,n=0,a=o.length;n<a;n++)o[n].call(this,e);return this}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(6),t.SlideCanvas=t.util.createClass(t.Canvas,t.PluginsMixin,{type:"slide-canvas",width:160,height:90,dotsPerUnit:1,scale:1,loaded:!1,interactive:!0,addTextTool:!1,defaultText:"text",defaultTextType:"text",thumbSize:{width:50,height:100},storeProperties:["*","backgroundImage","width","height"],contextTopImageSmoothingEnabled:!0,plugins:{initialize:[],preloaders:[],loaders:[],savers:[function(e,i){if(-1!==e.indexOf("thumb")){var n=t.util.getProportions(this.getOriginalSize(),this.thumbSize,"fit"),a=t.util.createCanvasElement();a.width=n.width,a.height=n.height,this.renderThumb(a),i.thumb=a.toDataURL()}},function(t,e){if(-1!==t.indexOf("template")&&this.template){for(var i in e.template)JSON.stringify(e[i])==JSON.stringify(e.template[i])&&delete e[i];e.template=this.template.id}}]},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,function(){this.renderAll(),e&&e()}.bind(this))},setInteractive:function(t){this.interactive=t},_initOptions:function(t){this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createUpperCanvas:function(){t.Canvas.prototype._createUpperCanvas.call(this);var e=this.contextTop;if(e.imageSmoothingEnabled)return void(e.imageSmoothingEnabled=this.contextTopImageSmoothingEnabled);e.webkitImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,e.mozImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,e.msImageSmoothingEnabled=this.contextTopImageSmoothingEnabled,e.oImageSmoothingEnabled=this.contextTopImageSmoothingEnabled},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore();var e=this.getPointer(t);this.freeDrawingBrush.onMouseUp(e),this._handleEvent(t,"up")},initialize:function(e,i,n){e&&e.constructor==Object&&(i,i=e,e=null),i=i||{},i.application&&i.application.fire("entity:created",{target:this,options:i}),this.id=t.SlideCanvas.__idcounter++,this._objects=[],this._createLowerCanvas(e),this.virtual?this.initLayers():(this.created=!0,this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.calcOffset(),this.initLayers(),this._createCacheCanvas(),this._setImageSmoothing(),this._initRetinaScaling()),this.plugins.initialize.forEach(function(t){t.call(this,i)}.bind(this)),i["+actions"]&&this.set("+actions",i["+actions"]),i.actions&&this.set("actions",i.actions),i&&i.onResize&&(this.onResize=i.onResize),this.requestAnimFrame&&this.addVideosSupport(),this._initOptions(),this._setObject(i),this.calcOffset(),this.fire("created")},initLayers:function(){this.upperCanvasEl&&this.wrapperEl.appendChild(this.upperCanvasEl)},create:function(){this.created=!0,this._initInteractive(),this._createCacheCanvas()},toObject:function(e){e=(e||[]).concat(this.storeProperties);var i=this,n=this.getObjects();n=t.util.object.filter(n,{stored:!0}),n=n.map(function(t){return t.toObject(i.objectsPropertiesToInclude)});var a={objects:n};return t.util.populateWithProperties(this,a,this.propertiesToInclude),-1!==e.indexOf("backgroundImage")&&t.util.object.extend(a,this.__serializeBgOverlay()),-1!==e.indexOf("width")&&this.originalWidth&&(a.width=this.originalWidth),-1!==e.indexOf("height")&&this.originalHeight&&(a.height=this.originalHeight),this.plugins.savers.forEach(function(t){t.call(this,e,a)}.bind(this)),this.fire("before:object",{object:a}),a},setTemplate:function(e){this.template=e,e&&(this.setWidth(this.slideWidth||e.width),this.setHeight(this.slideHeight||e.height),this.originalHeight=this.height,this.originalWidth=this.width,this.set(t.util.object.rearrange(e,["areas","helpers","offsets"])),this._update_clip_rect(),this._update_background_image(),this.fire("modified",{type:"template"}),this.renderAll())},addText:function(t,e){this.createObject({position:"center",text:t,type:this.defaultTextType,clipTo:this.activeArea,movementLimits:this.activeArea})},eventListeners:{"object:moving":function(t){this.fire("target:modified",this,t)},"selection:cleared":function(t){this.target&&(this.target.fire("deselected",t),this.target=null,this.fire("target:cleared",t))},"object:selected":function(t){t.previous=this.target,this.target=t.target,t.previous&&t.previous.fire("deselected",t),this.fire("target:changed",t)},"group:selected":function(t){this.target=t.target,this.fire("target:changed",t)}}}),t.SlideCanvas.__idcounter=0,t.SlideCanvas.fromJson=function(e,i,n){t.util.data.loadJson(e,function(e){new t.SlideCanvas(n,e,i)})},t.SlideCanvas.prototype.actions=t.util.object.extend({},{selectAll:{title:"selectAll",type:"key"},backgroundColor:{type:"color"},addText:{className:"fa fa-font",title:"text",action:function(){this.addText(this.defaultText,{})}}}),t.util.object.extend(t.Application.prototype,{setSlide:function(t,e){var i=this.canvas;i.load?i.load(t,e):i.createObjects(t,e)}}),t.Application.prototype.canvasClass="SlideCanvas"}).call(e,i(0))},function(t,e,i){(function(t){var e=t.Text.prototype.initialize;t.util.object.extend(t.Text.prototype,{textInitialize:e,editTool:!1,advancedColorsTools:!1,textFontSizeTools:!1,textAligmentTools:!1,advancedTextStyleTools:!1,rasterizeTool:!1,rasterizeKlass:t.Image,initialize:function(t,e){this._initEntity(e),this.textInitialize(t,e)},_render_cache:function(t){t.save(),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1)),this.transform(t),this._setShadow(t),t.translate(-this.width/2,-this.height/2),t.drawImage(this._cache,0,0,this.width,this.height),t.restore()},updateCache:function(){var e={width:this.width*this.canvas.dotsPerUnit,height:this.height*this.canvas.dotsPerUnit},i=this.clipTo;delete this.clipTo,this._cache=t.util.createCanvasElementWithSize(e);var n=this._cache.getContext("2d");n.scale(this.canvas.dotsPerUnit,this.canvas.dotsPerUnit),n.translate(this.width/2,this.height/2),this.render(n,!0),this.render=this._render_cache,this.clipTo=i},rasterizeText:function(){this.updateCache();var e=t.util.createImage();e.onload=function(){var t=this.toObject();t.width=e.width,t.height=e.height,t.scaleX=this.scaleX*(this.height/e.height),t.scaleY=this.scaleY*(this.width/e.width),t.rasterizedType=t.type,delete t.type;var i=new this.rasterizeKlass(e,t);this.canvas.add(i),this.canvas.remove(this),setTimeout(function(){this.canvas.setActiveObject(i),this.canvas.renderAll()}.bind(this))}.bind(this),e.src=this._cache.toDataURL()},getStyle:function(t){var e=this;return e.getSelectionStyles&&e.isEditing?e.getSelectionStyles()[t]||e[t]:e[t]||e["__"+t]||""},getPattern:function(t){var e=this.getStyle("fill ");return e&&e.source},setPattern:function(e){if(e){var i=this;t.util.loadImage(e,function(e){i.setStyle("fill",new t.Pattern({source:e,repeat:"repeat"}))})}else this.setStyle("fill")},getOpacity:function(){return 100*this.getStyle("opacity")},setOpacity:function(t){this.setStyle("opacity",parseInt(t,10)/100)},getRadius:function(){return this.get("radius")},setShadow:function(e){return this.setProperty("shadow",e?new t.Shadow(e):null)},setProperty:function(t,e){this[t]=e,this.canvas&&this.canvas.renderAll()},setRadius:function(t){this.setProperty("radius",t)},getSpacing:function(){return this.get("spacing")},setSpacing:function(t){this.setProperty("spacing",t)},getReverted:function(){return this.get("reverted")},setReverted:function(t){this.setProperty("reverted",t)},getFill:function(){return this.getStyle("fill")},setFill:function(t){this.setStyle("fill",t)},getText:function(){return this.get("text")},setText:function(t){this.setProperty("text",t)},getTextAlign:function(){return this.get("textAlign")},setTextAlign:function(t){this.setProperty("textAlign",t.toLowerCase())},getFontFamily:function(){return this.get("fontFamily")},setFontFamily:function(t){this.setStyle("fontFamily",t)},getStyles:function(){return this.styles||{fill:this.fill,fontSize:this.fontSize,textBackgroundColor:this.textBackgroundColor,textDecoration:this.textDecoration,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontStyle:this.fontStyle,stroke:this.stroke,strokeWidth:this.strokeWidth}},getBgColor:function(){return this.get("backgroundColor")},setBgColor:function(t){this.setProperty("backgroundColor",t)},getTextBgColor:function(){return this.get("textBackgroundColor")},setTextBgColor:function(t){this.setProperty("textBackgroundColor",t)},getStroke:function(){return this.getStyle("stroke")},setStroke:function(t){this.setStyle("stroke",t)},getStrokeWidth:function(){return this.getStyle("strokeWidth")},setStrokeWidth:function(t){this.setStyle("strokeWidth",parseInt(t,10))},decreaseFontSize:function(){this.setStyle("fontSize",parseInt(this.getStyle("fontSize"))-1)},increaseFontSize:function(){this.setStyle("fontSize",parseInt(this.getStyle("fontSize"))+1)},getFontSize:function(){return this.getStyle("fontSize")},setFontSize:function(t){this.setStyle("fontSize",parseInt(t,10))},getLineHeight:function(){return this.getStyle("lineHeight")},setLineHeight:function(t){this.setStyle("lineHeight",parseFloat(t,10))},addText:function(e,i){var n=this.text.match(/\n/g),a=n&&n.length||0,o=this.text.length-this.text.lastIndexOf("\n")-1;this.styles[a]||(this.styles[a]={}),this.styles[a][o]||(this.styles[a][o]={}),t.util.object.extend(this.styles[a][o],i),this.text+=e},getBold:function(){return"bold"===this.getStyle("fontWeight")},setBold:function(t){this.setStyle("fontWeight",t?"bold":"")},getItalic:function(){return"italic"===this.getStyle("fontStyle")},setItalic:function(t){this.setStyle("fontStyle",t?"italic":"")},getUnderline:function(){return this.getStyle("textDecoration").indexOf("underline")>-1},setUnderline:function(t){t=t?this.getStyle("textDecoration")+" underline":this.getStyle("textDecoration").replace("underline",""),this.setStyle("textDecoration",t)},getLinethrough:function(){return this.getStyle("textDecoration").indexOf("line-through")>-1},setLinethrough:function(t){t=t?this.getStyle("textDecoration")+" line-through":this.getStyle("textDecoration").replace("line-through",""),this.setStyle("textDecoration",t)},getOverline:function(){return this.getStyle("textDecoration").indexOf("overline")>-1},setOverline:function(t){t=t?this.getStyle("textDecoration")+" overline":this.getStyle("textDecoration").replace("overlin",""),this.setStyle("textDecoration",t)},setStyle:function(e,i){var n=this,a=t.util.object.cloneDeep(n.getStyles());if(n.setSelectionStyles&&n.isEditing){var o={};void 0!==i?o[e]=i:delete o[e],n.setSelectionStyles(o),n.setCoords()}else{void 0!==i?n[e]=i:delete n[e];for(var s in n.styles)for(var r in n.styles[s])void 0!==n.styles[s][r][e]&&delete n.styles[s][r][e]}var c=n.getStyles();"text"!=this.type&&(this.styles=t.util.object.cloneDeep(c)),this.setCoords(),this.fire("styles:modified",{original:a,modified:c}),this.canvas&&this.canvas.renderAll()},generateTextStyle:function(){return{"font-style":this.isItalic()?"italic":"normal","font-weight":this.isBold()?700:400,"text-decoration":(this.isLinethrough()?"line-through ":"")+(this.isOverline()?"overline ":"")+(this.isUnderline()?"underline ":"")}},actions:{rasterizeText:{insert:"rasterizeTool",className:"button-easel",title:"rasterizeText"},fill:{type:"color",title:"fill",insert:"!advancedColorsTools",value:"fill"},textBgcolor:{type:"color",title:"bgColor",value:"bgColor"},textTextbgcolor:{type:"color",title:"textBgColor",value:"textBgColor"},textFill:{type:"color",title:"fill",value:"fill"},textBold:{type:"checkbox",title:"bold",value:"bold",className:"fa fa-bold"},textItalic:{type:"checkbox",title:"italic",value:"italic",className:"fa fa-italic"},textUnderline:{type:"checkbox",title:"Underline",value:"underline",className:"fa fa-underline"},textLinethrough:{type:"checkbox",insert:"advancedTextStyleTools",title:"Linethrough",value:"linethrough",className:"text-linethrough fa fa-strikethrough"},textOverline:{type:"checkbox",insert:"advancedTextStyleTools",title:"overline",value:"overline",className:"text-overline fa fa-overline"},textAlign:{type:"options",title:"text align",insert:"textAligmentTools",value:"textAlign",menu:{textAlignCenter:{title:"align center",option:"center",className:"fa fa-align-center"},textAlignLeft:{title:"align left",option:"left",className:"fa fa-align-left"},textAlignRight:{title:"align right",option:"right",className:"fa fa-align-right"},textAlignJustify:{title:"align justify",option:"justify",className:"fa fa-align-justify"}}},fontFamily:{type:"fontFamily",title:"font family",className:"fa fa-text",value:"fontFamily",data:function(){return this.application._fonts}},textFontSize:{insert:"textFontSizeTools",type:"number",title:"fontSize",value:"fontSize"},advancedColorsTools:{className:"colors",type:"menu",title:"colors",toggled:!0,menu:["fill","textBgcolor","textTextbgcolor","textFill"]},textStyle:{type:"menu",title:"text style",toggled:!0,className:"fa fa-font",style:"generateTextStyle",menu:["textBold","textItalic","textUnderline","textLinethrough","textOverline","textAlign","fontFamily","textFontSize"]}}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea_native:t.IText.prototype.initHiddenTextarea,initHiddenTextarea:function(){this.initHiddenTextarea_native(),this.hiddenTextarea.style.width="9999px"},exitEditing:function(){return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),this.canvas.fireModifiedIfChanged(this)),this},maxStrokeWidth:function(){return Math.ceil(this.getFontSize()/10)},actions:{enterEditing:{insert:"editTool",className:"fa fa-pencil-square-o",title:"edit"}}})}).call(e,i(0))},function(t,e,i){(function(e){e.debug=!1,e.extensions=[],e.util.data=i(12),e.util.path=i(5),e.util.compile=i(4),e.util.loader=i(13),e.util.syntax=i(14),e.util.object.extend(e.util.object,i(2)),e.util.object.extend(e.util,i(3)),i(11),e.isLikelyNode||(e.media={error:"data:image/svg+xml;base64,"+i(10)}),t.exports=e}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.RemoveWhiteDP=t.Image.filters.RemoveWhiteDP=t.util.createClass(t.Image.filters.BaseFilter,{type:"RemoveWhiteDP",initialize:function(e){e&&delete e.type,this.options=t.util.object.defaults(e||{},{fromCorners:!0,blurRadius:2,colorThreshold:32}),this.pathfinder=new t.Pathfinder(this.options)},applyTo:function(e){var i=this.pathfinder;if(i.colorThreshold=this.options.colorThreshold,i.setPicture(e),i.selectBackground(this.options.fromCorners),i.mask.count)if(i._fill([0,0,0,0]),i.mask=t.MagicWand.invertMask(i.mask),i.mask.count){var n=i.mask.bounds.maxX-i.mask.bounds.minX+1,a=i.mask.bounds.maxY-i.mask.bounds.minY+1,o=e.getContext("2d"),s=i.editedImageCanvas.getContext("2d").getImageData(i.mask.bounds.minX,i.mask.bounds.minY,n,a);e.width=n,e.height=a,o.putImageData(s,0,0),this.bounds=i.mask.bounds}else{var o=e.getContext("2d");e.width=1,e.height=1,o.clearRect(0,0,1,1),this.bounds={maxX:0,maxY:0,minX:0,minY:0}}i.clearMemory()},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),this.options)}}),t.Image.filters.RemoveWhiteDP.fromObject=function(e){return new t.Image.filters.RemoveWhiteDP(e)}}).call(e,i(0))},function(t,e,i){(function(t){t.CacheMixin={caching:!0,dirty:!0,render:function(e){if(e.save(),this.transformMatrix&&e.transform.apply(e,this.transformMatrix),this.transform(e),this._setShadow(e),this.clipTo&&t.util.clipContext(this,e),e.translate(-this.width/2,-this.height/2),this.caching){if(this._cache||(this._cache=t.util.createCanvasElementWithSize(this)),this.dirty){this._cache.width=this.width,this._cache.height=this.height;var i=this._cache.getContext("2d");i.clearRect(0,0,this._cache.width,this._cache.height),this._render(i),this.dirty=!1}e.drawImage(this._cache,0,0,this.width,this.height,0,0,this.width,this.height)}else this._render(e);this.clipTo&&e.restore(),e.restore()}}}).call(e,i(0))},function(t,e,i){(function(t){t.StrokeMixin={shape:{strokeWidthFull:0,strokeWidthEmpty:2,strokeWidthActive:2,strokeDashArray:[5,5],fill:"transparent",strokeEmpty:"red",strokeFull:"red",strokeActive:"green"},setShape:function(e,i){e=t.util.object.extend({strokeWidthFull:this.shape.strokeWidthFull,strokeWidthEmpty:this.shape.strokeWidthEmpty,strokeWidthActive:this.shape.strokeWidthActive,dashArray:this.shape.dashArray,strokeEmpty:this.shape.strokeEmpty,strokeFull:this.shape.strokeFull,strokeActive:this.shape.strokeActive},e);var n=this;e&&e.src&&!e.paths?t.loadSVGFromURL(e.src,function(a,o){e.paths=a,t.util.object.extend(e,o),n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),i&&i()}):(n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),i&&i())},initShape:function(e){var i=t.util.object.extend(e.shape||{},this.shape);this._fabric_shape=new t.Rect(t.util.object.extend({},i,{width:e.width,height:e.height,stroke:i.strokeEmpty,strokeWidth:i.strokeWidthEmpty}))},_apply_shape:function(){var t=this.shape,e=t&&t.offsets;e||(e=[0,0,0,0]);var i=t&&t.offsets_units;i||(i=[1,1,1,1]),e={top:e[0]*(i[0]?this.height/100:1)||0,right:e[1]*(i[1]?this.width/100:1)||0,bottom:e[2]*(i[2]?this.height/100:1)||0,left:e[3]*(i[3]?this.width/100:1)||0};var n=this.width-e.left-e.right,a=this.height-e.top-e.bottom;if(this.shape.path||this.shape.paths||this.shape.offsets){var o=this.shape.width||this._fabric_shape.width,s=this.shape.height||this._fabric_shape.height;this._fabric_shape.strokeWidth&&(o+=this._fabric_shape.strokeWidth,s+=this._fabric_shape.strokeWidth);var r={left:-this.width/2+e.left,top:-this.height/2+e.top,scaleX:n/100/(o/100),scaleY:a/100/(s/100),angle:0}}else var r={left:-this.width/2+e.left,top:-this.height/2+e.top,width:n,height:a,angle:0};this._fabric_shape.set(r),this.updateStroke(),this.canvas&&this.canvas.renderAll()},_set_shape:function(e){this._fabric_shape&&(this.remove(this._fabric_shape),delete this._fabric_shape);var i,n={fill:"transparent",strokeDashArray:this.shape.dashArray};if(this.shape=e,e)if(e.paths){for(var a in e.paths)e.paths[a].set(n);i=t.util.groupSVGElements(e.paths,e)}else{var o;e.radius?(o=t.util.getRadiusClipPath(e.radius,e.radius_units,this.width,this.height),i=new t.Path(o,n)):e.path?i=new t.Path(e.path,n):(o="M 0 0 L {width} 0 L {width} {height} L 0 {height} z".format(t.util.object.extend({width:100,height:100},e)),i=new t.Path(o,n))}else i=new t.Rect({width:this.width,height:this.height}),i.set(n);i.set({scaleX:this.width/i.width,scaleY:this.height/i.height,perPixelTargetFind:!0,selectable:!1,originX:"left",originY:"top"}),this._fabric_shape=i,this.element&&(this.element.clipTo=this._fabric_shape),this.updateStroke()},updateStroke:function(){var t=this.shape.stroke,e=0;(this._activated||this._clipmode)&&this.shape.strokeWidthActive?e=this.shape.strokeWidthActive:this.element&&this.shape.strokeWidthFull?e=this.shape.strokeWidthFull:!this.element&&this.shape.strokeWidthEmpty&&(e=this.shape.strokeWidthEmpty),(this._activated||this._clipmode)&&this.shape.strokeActive?t=this.shape.strokeActive:this.element&&this.shape.strokeFull?t=this.shape.strokeFull:!this.element&&this.shape.strokeEmpty&&(t=this.shape.strokeEmpty);var i=e/Math.max(this._fabric_shape.scaleX,this._fabric_shape.scaleY);if(this.shape)if(this.shape.paths)for(var n in this._fabric_shape.paths)this._fabric_shape.paths[n].setStrokeWidth(i),this._fabric_shape.paths[n].setStroke(t);else this._fabric_shape.setStrokeWidth(i),this._fabric_shape.setStroke(t)},activate:function(){this._activated=!0,this._fabric_shape.setOpacity(1),this.updateStroke(),this.canvas.renderAll()},deactivate:function(){this._activated=!1,this.updateStroke(),this.canvas.renderAll()}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.drawBorderImage=function(e,i,n){function a(t,e,n,a,o){var g;0==t&&(g=[u[3]+e,0,n,u[0],l[3]+a,0,o,l[0]]),2==t&&(g=[u[3]+e,r-u[2],n,u[2],l[3]+a,d-l[2],o,l[2]]),1==t&&(g=[s-u[1],u[0]+e,u[1],n,h-l[1],l[0]+a,l[1],o]),3==t&&(g=[0,u[0]+e,u[3],n,0,l[0]+a,l[3],o]),c.drawImage(i,g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7])}function o(t){var e,i,o;if(0==t||2==t?(e=h-l[1]-l[3],i=s-u[1]-u[3],o=n.repeat[0]):(e=d-l[0]-l[2],i=r-u[0]-u[2],o=n.repeat[1]),"stretch"==o)return a(t,0,i,0,e);var c=u[t]/l[t],g=i*l[t]/u[t],f=1,p=0;if("repeat"==o){var m=g-e%g/2,v=c*m;f=Math.floor(e/g),m>0&&a(t,v,i-v,0,g-m),p=g-m;for(var b=0;b<f;b++)a(t,0,i,p,g),p+=g;m>0&&a(t,0,i-v,p,g-m)}if("round"==o)for(p=0,f=Math.max(1,Math.round(e/g)),g=e/f;p<e;)a(t,0,i,p,g),p+=g}var n=t.util.object.extend({slice:[25,25,25,25],width:[25,25,25,25],fill:!1,repeat:["round","round"],outset_values:[0,0,0,0],slice_units:[0,0,0,0],width_units:[0,0,0,0],outset_units:[0,0,0,0],size:[e.width,e.height]},n),s=i.width,r=i.height,c=e.getContext("2d"),u=n.slice,l=n.width,h=n.size[0],d=n.size[1];1==n.slice_units[0]&&(u[0]*=r/100),1==n.slice_units[1]&&(u[1]*=s/100),1==n.slice_units[2]&&(u[2]*=r/100),1==n.slice_units[3]&&(u[3]*=s/100),1==n.width_units[0]&&(l[0]*=d/100),1==n.width_units[1]&&(l[1]*=h/100),1==n.width_units[2]&&(l[2]*=d/100),1==n.width_units[3]&&(l[3]*=h/100),o(0),o(2),o(1),o(3),c.drawImage(i,0,0,u[3],u[0],0,0,l[3],l[0]),c.drawImage(i,s-u[1],0,u[1],u[0],h-l[1],0,l[1],l[0]),c.drawImage(i,0,r-u[2],u[3],u[2],0,d-l[2],l[3],l[2]),c.drawImage(i,s-u[1],r-u[2],u[1],u[2],h-l[1],d-l[2],l[1],l[2])},t.util.getOffsetsClipPath=function(t){return["M",t[3],t[0],"L",100-t[1],t[0],"L",100-t[1],100-t[2],"L",t[3],100-t[2],"z"].join(" ")},t.util.getRadiusClipPath=function(t,e,i,n){var a=t,o=e||[1,1,1,1,1,1,1,1],s={"top-left-h":a[0]*(o[0]?n/100:1),"top-left-w":a[1]*(o[1]?i/100:1),"top-right-h":a[2]*(o[2]?n/100:1),"top-right-w":a[3]*(o[3]?i/100:1),"bottom-right-w":a[4]*(o[4]?i/100:1),"bottom-right-h":a[5]*(o[5]?n/100:1),"bottom-left-w":a[6]*(o[6]?i/100:1),"bottom-left-h":a[7]*(o[7]?n/100:1)};return["M",0,s["top-left-h"],"C",0,s["top-left-h"],0,0,s["top-left-w"],0,"H",i-s["top-right-w"],"C",i-s["top-right-w"],0,i,0,i,s["top-right-h"],"V",n-s["bottom-right-h"],"C",i,n-s["bottom-right-h"],i,n,i-s["bottom-right-w"],n,"H",s["bottom-left-w"],"C",s["bottom-left-w"],n,0,n,0,n-s["bottom-left-h"],"Z"].join(" ")}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype._bindEvents,i=t.Canvas.prototype._onMouseDown,n=t.Canvas.prototype._onMouseUp,a=t.Canvas.prototype._initEventListeners,o=t.Canvas.prototype.removeListeners;t.util.object.extend(t.Canvas.prototype,{tapholdThreshold:2e3,_bindEvents:function(){e.call(this),this._onClick=this._onClick.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onTapHold=this._onTapHold.bind(this)},_onDoubleClick:function(t){var e=this,i=e.findTarget(t);e.fire("mouse:dblclick",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("dblclick",{e:t})},_onDrop:function(t){var e=this.getZoom();t.x/=e,t.y/=e,t.offsetX/=e,t.offsetY/=e,t.width=t.helper.width()/e,t.height=t.helper.height()/e;var i=this;t.target=i.findTarget(t.originalEvent),i.fire("mouse:drop",t),t.target&&!i.isDrawingMode&&t.target.fire("object:drop",t)},_onDragMove:function(t){var e=this,i=e.findTarget(t.originalEvent);e.fire("mouse:dragmove",{target:i,e:t,data:t.data}),i&&!e.isDrawingMode&&i.fire("object:dragmove",{e:t,data:t.data}),this._last_target!=i&&(this._last_target&&(e.fire("mouse:dragleave",{target:this._last_target,e:t,data:t.data}),this._last_target.fire("object:dragleave",{e:t,data:t.data}),this._last_target=!1),i&&(e.fire("mouse:dragenter",{target:i,e:t,data:t.data}),i.fire("object:dragenter",{e:t,data:t.data}),this._last_target=i))},_onClick:function(t){var e=this,i=e.findTarget(t);e.fire("mouse:click",{target:i,e:t}),i&&!e.isDrawingMode&&i.originalState.left==i.left&&i.originalState.top==i.top&&i.originalState.scaleX==i.scaleX&&i.originalState.scaleY==i.scaleY&&i.originalState.angle==i.angle&&i.fire("object:click",{e:t})},_onTapHold:function(t){var e=this,i=e.findTarget(t);e.fire("touch:taphold",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("taphold",{e:t}),"touchend"===t.type&&null!=e.touchStartTimer&&clearTimeout(e.touchStartTimer)},_onMouseDown:function(t){i.call(this,t);var e=this;if("touchstart"===t.type){var n=setTimeout(function(){e._onTapHold(t),e.isLongTap=!0},e.tapholdThreshold);return void(e.touchStartTimer=n)}if(3===t.which){var a=this.findTarget(t);e.fire("mouse:down",{target:a,e:t}),a&&!e.isDrawingMode&&a.fire("mousedown",{e:t})}},_onMouseUp:function(t){if(n.call(this,t),"touchend"===t.type){null!=this.touchStartTimer&&clearTimeout(this.touchStartTimer),this.isLongTap&&(this._onLongTapEnd(t),this.isLongTap=!1);var e=(new Date).getTime(),i=this.lastTouch||e+1,a=e-i;a<300&&a>0?(this.lastTouch=null,this._onDoubleTap(t)):this.lastTouch=e}},_onDoubleTap:function(t){var e=this,i=e.findTarget(t);e.fire("touch:doubletap",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:doubletap",{e:t})},_onLongTapEnd:function(t){var e=this,i=e.findTarget(t);e.fire("touch:longtapend",{target:i,e:t}),i&&!e.isDrawingMode&&i.fire("object:longtapend",{e:t})},_initEventListeners:function(){var e=this;a.call(e),t.util.addListener(e.upperCanvasEl,"click",e._onClick),t.util.addListener(e.upperCanvasEl,"dblclick",e._onDoubleClick),e.on("object:scaling",function(t){t.target&&t.target._scaling_events_enabled&&t.target.fire("scaling",t.e)}),e.on("object:selected",function(t){t.target&&t.target.fire("object:selected",t.e)}),e.on("mouse:over",function(t){t.target&&t.target.fire("mouse:over",t.e)}),e.on("mouse:out",function(t){t.target&&t.target.fire("mouse:out",t.e)})},removeListeners:function(){var e=this;o.call(e),t.util.removeListener(e.upperCanvasEl,"click",e._onClick),t.util.removeListener(e.upperCanvasEl,"dblclick",e._onDoubleClick)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t,{debugTimeout:0}),t.util.object.extend(t.Application.prototype,{setDebug:function(){this.on("ready",function(){this.enableDebugging()})},enableDebugging:function(){if(t.debug){window.app=this,window.canvas=this.canvas,window.project=this.project,window.target=null,this.canvas&&this.canvas.on("target:changed",function(){window.target=this.target})}}}),t.Object.prototype.debug=function(t){var e=document.createElement("canvas");e.width=t?this.width:this.width+2,e.height=t?this.height:this.height+2;var i=e.getContext("2d");t||(i.lineWidth=1,i.strokeStyle="yellow",i.strokeRect(0,0,this.width+2,this.height+2),i.setLineDash([4,4]),i.strokeStyle="#000000",i.strokeRect(0,0,this.width+2,this.height+2)),i.translate(this.width/2+1,this.height/2+1);var n=this.clipTo;delete this.clipTo,this.render(i,!0),this.clipTo=n,window.open(e.toDataURL(),"_blank")},t.Application.prototype.logEvents=t.Object.prototype.logEvents=function(t){var e={};for(var i in t)e[i]=0,this.on(t[i],function(t,e){}.bind(this,i))}}).call(e,i(0))},function(t,e,i){(function(t){"undefined"==typeof WebFont?t.webFontsLoader=i(24):t.webFontsLoader=WebFont,t.util.object.extend(t.Application.prototype,{setFonts:function(e,i){if(this.fonts=e,t.isLikelyNode)return i();this.fire("loading",{type:"webfonts"}),this._fonts=[];for(var n in this.fonts)this._fonts=this._fonts.concat(this.fonts[n]);if(this._fonts=t.util.object.sortBy(this._fonts,function(t){return t}),t.webFontsLoader&&(this.fonts.google&&this.fonts.google.length||this.fonts.custom&&this.fonts.custom.length)){var a={active:function(){i()}};this.fonts.google&&this.fonts.google.length&&(a.google={families:this.fonts.google}),this.fonts.custom&&this.fonts.custom.length&&(a.custom={families:this.fonts.custom}),t.webFontsLoader.load(a)}else i();this.waitForWebfonts&&t.util.fonts.waitFor(this.waitForWebfonts,i)},fonts:{standart:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Lucida Console","Tahoma","Times New Roman","Geneva","sans-serif","serif","monospace","cursive"],google:[],custom:[]}}),t.util.fonts={waitFor:function(t,e){for(var i=0,n=0,a=t.length;n<a;++n)!function(n){function a(){if(o&&o.offsetWidth!=s&&(++i,o.parentNode.removeChild(o),o=null),i>=t.length&&(r&&clearInterval(r),i==t.length))return setTimeout(function(){e()},50),!0}var o=document.createElement("span");o.innerHTML="giItT1WQy@!-/#",o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",o.style.fontSize="300px",o.style.fontFamily="sans-serif",o.style.fontVariant="normal",o.style.fontStyle="normal",o.style.fontWeight="normal",o.style.letterSpacing="0",document.body.appendChild(o);var s=o.offsetWidth;o.style.fontFamily=n;var r;a()||(r=setInterval(a,50))}(t[n])}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t,e){t.util.mediaRoot="",t.util.addNoCache=!1,t.util._loadImage_overwritten=t.util.loadImage,t.util.object.extend(t.Application.prototype,{optionsOrder:function(){var e=t.Application.prototype.optionsOrder;return e.splice(e.indexOf("canvasContainer"),0,"mediaRoot"),e}(),setMediaRoot:function(i){if(i){var n;n=t.isLikelyNode?e:t.util.path.getParentDirectoryUrl(window.location.href);var a=i[i.length-1];"/"!=a&&"\\"!=a&&(i+="/"),i=t.util.path.resolve(n+i),t.util.mediaRoot=i}}}),t.util.loadResources=function(e,i,n,a){var o={},s=t.util.queueLoad(Object.keys(e).length,function(){i(o)});for(var r in e)!function(i){t.util.loadImage(e[i],function(t){o[i]=t,s()},n,a)}(r)},t.util.loadImage=function(e,i,n,a){function o(e){e?i.call(this,e):(t.errors.push({type:"image",message:"Image was not loaded"}),t.util._loadImage_overwritten(t.media.error,i,n,a||"Anonymous"))}e=t.util.getURL(e),t.debugTimeout?setTimeout(t.util._loadImage_overwritten.bind(this,e,o,n,a||"Anonymous"),t.debugTimeout):t.util._loadImage_overwritten(e,o,n,a||"Anonymous")},t.util.getURL=function(e){return 0!==e.indexOf("blob")&&0!==e.indexOf("data")&&-1==e.indexOf("://")&&(e=t.util.mediaRoot+e),t.util.addNoCache&&/^(http|https)\:\/\//.test(e)&&(e+="?no-cache="+(new Date).getTime()),e},t.util.loadVideo=function(e,i,n,a){function o(e){s.src=t.util.getURL(e),s.addEventListener("loadeddata",function(){i(s)},!0),s.load()}var s=document.createElement("video");for(var r in e)if("yes"==s.canPlayType(r))return this.mediaType=r,void o(e[r]);for(var r in e)if("maybe"==s.canPlayType(r))return this.mediaType=r,void o(e[r])},t.util._loadSVGFromURL_overwritten=t.loadSVGFromURL,t.loadSVGFromURL=function(e,i,n){0!==e.indexOf("data")&&-1==e.indexOf("://")&&(e=t.util.mediaRoot+e),t.util.addNoCache&&/^(http|https)\:\/\//.test(e)&&(e+="?no-cache="+moment().format("x")),t.util._loadSVGFromURL_overwritten(e,function(e){if(e)return i(e);var a=jQuery.parseXML(atob(t.media.error.substr(26)));t.parseSVGDocument(a.documentElement,function(t,e){i&&i(t,e)},n)},n)}}).call(e,i(0),"/")},function(t,e,i){(function(t){t.Application.prototype.setElementFromMenu=function(t){this.canvas.createImageObject(t.image,this.uploadClass)},t.Application.prototype.createGallery=function(e,i,n){i.constructor===String&&(i=$("#"+i)),n=n||{},e.galleryCategory&&(n.category=e.galleryCategory),i.empty();var a=this.getLibraryElements(n);_.each(a,function(a){var o=new Image;o.src=t.util.mediaRoot+a.src;var s=$(o).width(100).height(100).click(function(){var t={image:o,data:a,options:n};e.setElementFromMenu(t)});i.append(s)})}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=i(66);e.prototype.insertRecords=!1,e.prototype.actions={undo:{keyCode:"z",ctrlKey:!0,observe:"changed",className:"fa fa-undo",title:"undo",enabled:"canUndo",action:function(){this.undo()}},records:{title:"records",itemClassName:"filters-selector",className:"fa fa-history",type:"select",templateSelection:function(t,e){return t.any?t.text:$("<span>"+t.id+":"+t.type+"</span>")},templateResult:function(e,i,n){if(e.type){var a=e.originalState&&Object.keys(e.originalState).join(",")||"",o=e.object&&e.object.type||"";return $("<span>{id}:{type}({otype} {keys})</span>".format(t.util.object.extend({keys:a,otype:o},e)))}},value:{observe:"changed",set:function(t,e){this.goto(t)},get:function(){return this.records[this.current].id},options:function(){return this.records}}},redo:{keyCode:"y",ctrlKey:!0,observe:"changed",className:"fa fa-repeat",title:"redo",enabled:"canRedo",action:function(){this.redo()}}},t.util.object.extend(t.SlideCanvas.prototype.actions,{history:{title:"history",type:"menu",target:function(){return this.history},menu:function(){return this.actions}}}),t.util.object.extend(t.Canvas.prototype,{insertHistory:!1,onObjectModified:function(t){if(!this.history.enabled||this.processing||this.history.processing)return!1;t.target.canvas||t.target.wrapperEl&&t.target;this.history.add({canvas:t.target.canvas.originalSlide||t.target.canvas,originalState:t.states.original,modifiedState:t.states.modified,object:t.target,type:"object:modified",undo:function(t){if(t.object.set(t.originalState),t.canvas.mirrorSlide==this.canvas){t.object.setCoords();(this.canvas||this).renderAll()}t.canvas.fire("object:modified",{target:t.object}),t.object.fire("modified"),t.canvas.renderAll()},redo:function(t){if(t.object.set(t.modifiedState),t.object.setCoords(),t.canvas.mirrorSlide==this.canvas){t.object.setCoords();(this.canvas||this).renderAll()}t.canvas.fire("object:modified",{target:t.object}),t.object.fire("modified"),t.canvas.renderAll()}})},clearHistory:function(){this.history.clear()},disableHistory:function(){this.history.enabled=!1},_add_object_history_action:function(t){var e=this.canvas||this;this.canvas&&t.canvas.mirrorSlide==this.canvas?(e.add(t.object),e.setActiveObject(t.object),e.renderAll()):t.canvas.add(t.object),t.canvas.renderAll()},_remove_object_history_action:function(t){t.canvas.remove(t.object),t.canvas.renderAll(),this.canvas&&t.canvas.mirrorSlide==this.canvas&&this.canvas.renderAll()},onObjectRemoved:function(t){if(!this.history.enabled||this.processing||this.history.processing)return!1;this.history.add({canvas:t.target.canvas.originalSlide||t.target.canvas,object:t.target,type:"object:removed",redo:this._remove_object_history_action,undo:this._add_object_history_action})},onDrawAfter:function(t){if(!this.history.enabled||this.processing||this.history.processing)return!1;this.history.add(this.freeDrawingBrush.getHistoryRecord(t))},onObjectAdded:function(t){if(!this.history.enabled||this.processing||this.history.processing)return!1;this.history.add({canvas:t.target.canvas.originalSlide||t.target.canvas,object:t.target,type:"object:added",undo:this._remove_object_history_action,redo:this._add_object_history_action})},initHistory:function(t){t||(t=new e(this),t.application=this.application),this.history=t,this.on({"loading:begin":this.clearHistory,"draw:after":this.onDrawAfter,"object:modified":this.onObjectModified,"object:added":this.onObjectAdded,"object:removed":this.onObjectRemoved});this.history.on("changed",function(t){this.activeAction.canvas&&(this.activeAction.canvas.moment=t.action.moment)});var i=this.application.prototypes.History;i&&i.eventListeners&&t.on(i.eventListeners)},enableHistory:function(){this.history.enabled=!0}}),t.HISTORY_OPTIONS={INDIVIDUAL:0,SHARED:1},t.util.object.extend(t.Application.prototype,{history:!0,setHistory:function(i){i===t.HISTORY_OPTIONS.SHARED&&(this.history=new e(this),this.enableHistory(),this.on("ready",function(){this.canvas&&this.canvas.initHistory(this.history)})),t.HISTORY_OPTIONS.INDIVIDUAL},actions:t.util.object.extend(t.Application.prototype.actions,{history:{insert:"historyTools",title:"history",type:"menu",target:function(){return this.history},menu:function(){return this.actions}}}),_default_event_listeners:{"slide:change:begin":function(){this.processing=!0,this.history&&(this.history.processing=!0)},"slide:changed":function(){this.processing=!1,this.history&&(this.history.processing=!1)}},historyTools:!1,enableHistory:function(){this.history.enabled=!0}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Image.filters.Sharpen=t.util.createClass(t.Image.filters.Convolute,{type:"Sharpen",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,-1,0,-1,5,-1,0,-1,0]}}),t.Image.filters.Sharpen.fromObject=function(e){return new t.Image.filters.Sharpen(e)},t.Image.filters.Blur=t.util.createClass(t.Image.filters.Convolute,{type:"Blur",initialize:function(t){t=t||{};var e=1/9;this.opaque=t.opaque,this.matrix=t.matrix||[e,e,e,e,e,e,e,e,e]}}),t.Image.filters.Blur.fromObject=function(e){return new t.Image.filters.Blur(e)},t.Image.filters.Emboss=t.util.createClass(t.Image.filters.Convolute,{type:"Emboss",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[1,1,1,1,.7,-1,-1,-1,-1]}}),t.Image.filters.Emboss.fromObject=function(e){return new t.Image.filters.Emboss(e)},t.Image.filters.Mask.prototype.maskFilter=!0;var e={Brightness:{brightness:{value:100,min:0,max:255}},Noise:{noise:{value:100,min:0,max:1e3}},Convolute:{opaque:{value:!0,type:"boolean"},matrix:{value:[1,1,1,1,1,1,1,1,1],type:"matrix"}},Blur:{},Sharpen:{},Emboss:{},Multiply:{color:{type:"color",value:"#F0F"}},Pixelate:{blocksize:{value:4,min:2,max:20}},Tint:{color:{type:"color",value:"#3513B0"},opacity:{value:1,min:0,max:1,step:.1}},Mask:{mask:{type:"image",value:{src:"photos/explosion.png"}},channel:{value:0}},Blend:{color:{type:"color",value:"#3513B0"},mode:{value:"add",options:[{value:"add",title:"Add"},{value:"diff",title:"Diff"},{value:"subtract",title:"Subtract"},{value:"multiply",title:"Multiply"},{value:"screen",title:"Screen"},{value:"lighten",title:"Lighten"},{value:"darken",title:"Darken"}]}}};for(var i in e)t.Image.filters[i].prototype.options=e[i];t.Image.getFiltersList=function(e){e=e||t.Image.prototype;var i=[];for(var n in e.availableFilters){var a=t.Image.filters[e.availableFilters[n]],o={type:e.availableFilters[n]};if((!a.prototype.custom||e.customFilters)&&(!a.prototype.maskFilter||e.maskFilter)){if(a.prototype.caman){if(!e.camanFilters)continue;o.caman=!0}else if(!e.fabricFilters)continue;a.prototype.options&&(o.options=t.util.object.clone(a.prototype.options)),o.text=a.prototype.title||e.availableFilters[n],i.push(o)}}return i},t.util.object.extend(t.Image.prototype,{camanFilters:!1,fabricFilters:!0,customFilters:!1,maskFilter:!1,getFiltersData:function(){var e=t.Image.getFiltersList(this);for(var i in this.filters){var n=t.util.object.findWhere(e,{type:t.util.string.capitalize(this.filters[i].type)});n&&(n.enabled=!0)}return e},availableFilters:["Grayscale","Sepia","Sepia2","Invert","Blur","Sharpen","Emboss","Blend","Tint","Multiply","Noise","Brightness","Pixelate","GradientTransparency","Mask"],getFilter:function(e){e=t.util.string.uncapitalize(e);for(var i in this.filters)if(t.util.string.uncapitalize(this.filters[i].type)===e)return this.filters[i];return!1},setFilter:function(e){var i=!1;if(e.replace?this.filters=[]:(i=t.util.object.findWhere(this.filters,{type:e.type}),i=i&&i.toObject()||!1),e.type)var n=t.util.string.capitalize(e.type,!0),a=e.options&&t.util.object.clone(e.options);else n=!1,a=!1;this._set_filter(n,a,i)},_set_filter:function(e,i){if(e)var n=this.getFilter(e);if(n&&i)for(var a in i)n[a]=i[a];else n&&!i&&this.filters.splice(this.filters.indexOf(n),1);!n&&i&&this.filters.push(new t.Image.filters[e](i)),this.applyFilters(this.canvas.renderAll.bind(this.canvas))},insertImageFilters:!1,actions:t.util.object.extend(t.Image.prototype.actions,{imageFilters:{title:"фильтр",itemClassName:"filters-selector",className:"fa fa-filter",type:"select",templateSelection:function(t,e){return t.any?t.text:$('<span><span class="color-span" style="background-color:'+t.text+'"></span>'+t.text+"</span>")},templateResult:function(e,i,n){var a=$("<span>"+e.text+"</span>");if("none"!=e.id){var o=$("<canvas>");t.util.drawFilter(o[0],n.target._element,e.id,{height:22}),a.prepend(o)}return a},value:{set:function(t,e){var i=!1;if("none"==t)t=!1;else{var n=_.findWhere(e,{id:t});n.enabled=!n.enabled;for(var a in n.options)$.isNumeric(n.options[a])&&(n.options[a]=parseFloat(n.options[a]));if(n.enabled){i={};for(var a in n.options)i[a]=n.options[a].value}}this.setFilter({type:t,options:i,replace:!0})},get:function(){return this.filters.length?t.util.string.capitalize(this.filters[0].type,!0):"none"},options:function(){var t=this.getFiltersData();for(var e in t)t[e].id=t[e].type;return[{id:"none",text:"original",enabled:!this.filters||!this.filters.length}].concat(t)}}}})}),t.util.drawFilter=function(e,i,n,a){i.constructor===String?t.util.loadImage(i,function(i){t.util._drawFilter(e,i,n,a)}):t.util._drawFilter(e,i,n,a)},t.util._drawFilter=function(e,i,n,a){var o=e.getContext("2d");if(a&&(a.width&&a.height?(e.width=a.width,e.height=a.height):a.width?(e.width=a.width,e.height=a.width*(i.height/i.width)):a.height&&(e.height=a.height,e.width=a.height*(i.width/i.height))),o.drawImage(i,0,0,e.width,e.height),n){if(n=t.util.string.capitalize(n,!0),t.Image.filters[n])var s=new t.Image.filters[n];else var s=t.Image.filters[n].create({});if(s){var r=t.Image.filters[n].prototype.options,c={};for(var u in r)c[u]=r[u].value;t.util.object.extend(s,c),s.imageData=o.getImageData(0,0,e.width,e.height),s.applyTo(e)}}}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype._onMouseDown,i=t.Canvas.prototype._onMouseUp,n=t.Canvas.prototype._onMouseMove;t.util.object.extend(t.SlideCanvas.prototype,{_initEventListeners_overwritten:t.Canvas.prototype._initEventListeners,_initEventListeners:function(){this._initEventListeners_overwritten(),this.___onKeyDown=this._onKeyDown.bind(this),t.util.addListener(t.window,"keydown",this.___onKeyDown)},_removeListeners_overwritten:t.Canvas.prototype.removeListeners,removeListeners:function(){this._removeListeners_overwritten(),t.util.removeListener(t.window,"keydown",this.___onKeyDown)},_onKeyDown:function(t){return this._applyMixedMode(t)},getInteractiveMode:function(){return this.interactiveMode},setInteractiveMode:function(t){this.isDrawingMode="draw"===t,this.isHandMode="hand"===t,this.interactive="disabled"!==t,this.isMixedMode="mixed"===t,this.interactive||(this.upperCanvasEl.style.cursor="default"),this.interactiveMode=t},interactiveMode:"default",isHandMode:!1,_handModeCursorMove:!1,_handModeCursorDown:!1,_handModeCursorPosition:{x:0,y:0},_handModeMouseMove:function(t){if(!0===this._handModeCursorDown){if(t.pageY===this._handModeCursorPosition.y&&t.pageX===this._handModeCursorPosition.x)return;this._handModeCursorMove=!0;var e={x:this.viewportTransform[4],y:this.viewportTransform[5]},i={x:e.x-(this._handModeCursorPosition.x-t.pageX),y:e.y-(this._handModeCursorPosition.y-t.pageY)};this.size.width,this.zoom,this.lowerCanvasEl.width,this.size.height,this.zoom,this.lowerCanvasEl.height;this.viewportTransform[4]=i.x,this.viewportTransform[5]=i.y,this.fire("viewport:translate"),this.renderAll();for(var n=0,a=this._objects.length;n<a;n++)this._objects[n].setCoords();this._handModeCursorPosition.y=t.pageY,this._handModeCursorPosition.x=t.pageX}},_handModeMouseUp:function(){this._handModeCursorDown=!1,this._handModeCursorMove},_handModeMouseDown:function(t){this._handModeCursorMove=!1,this._handModeCursorDown=!0,this._handModeCursorPosition={y:t.pageY,x:t.pageX}},handModeEnabled:!1,handModeKey:"Alt",_applyMixedMode:function(t){if(this._current_target=this.findTarget(t),this.handModeEnabled&&t.altKey||t.key===this.handModeKey)this.isHandMode||(this.isHandMode=!0,this.isDrawingMode=!1,this.setCursor("pointer"));else if(!this.isMixedMode||this._isCurrentlyDrawing||this._currentTransform)this.isHandMode=!1;else if(this.isHandMode=!1,this._current_target)if(this.freeDrawingBrush&&this._current_target.allowDrawing){var e=this._current_target._findTargetCorner(this.getPointer(t,!0));this.isDrawingMode=!e}else this.isDrawingMode&&(this.isDrawingMode=!1);else this.freeDrawingBrush&&!this.isDrawingMode&&(this.setCursor(this.freeDrawingCursor),this.isDrawingMode=!0)},_onMouseMove:function(t){if(this.interactive)return this._applyMixedMode(t),this.isHandMode?(this._current_target&&this._current_target.selectable_overwritten&&(this._current_target.selectable=!0),this._handModeActive?this._handModeMouseMove(t):(this.fire("mouse:move",{target:this._current_target,e:t}),this._current_target&&this._current_target.fire("mousemove",{e:t}),!0)):n.call(this,t)},_onScale:function(t,e,i,n){return(t.shiftKey^this.shiftInverted||this.uniScaleTransform)&&!e.target.get("lockUniScaling")?(e.currentAction="scale",this._scaleObject(i,n)):(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t),e.currentAction="scaleEqually",this._scaleObject(i,n,"equally"))},shiftInverted:!1,_setCursorFromEvent_overwritten:t.Canvas.prototype._setCursorFromEvent,_setCursorFromEvent:function(t,e){this.isHandMode?this.setCursor("pointer"):this._setCursorFromEvent_overwritten(t,e)},_onMouseDown:function(t){this.interactive&&(t.preventDefault(),t.stopPropagation(),this._applyMixedMode(t),this.isHandMode&&this._current_target&&(this._current_target.selectable_overwritten=this._current_target.selectable,this._current_target.selectable=!1),e.call(this,t),this.isHandMode&&(this._current_target&&this._current_target.selectable_overwritten&&(this._current_target.selectable=!0),this._handModeActive=!0,this._handModeMouseDown(t)))},_onMouseUp:function(t){this.interactive&&(t.preventDefault(),t.stopPropagation(),i.call(this,t),this.isHandMode&&(this._handModeActive=!1))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.objectsLibrary={text:{title:"Text",type:"i-text",text:"Текст"},line:{type:"line",strokeWidth:5,stroke:"black",scaleX:1,scaleY:1,x1:0,x2:100,y1:0,y2:50},triangle:{type:"triangle",width:function(t,e){return Math.min(t,e)-4},height:function(t,e){return Math.min(t,e)-4}},rectangle:{type:"rect",width:function(t,e){return Math.min(t,e)-4},height:function(t,e){return Math.min(t,e)-4}},polygon:{scaleX:1,scaleY:1,type:"polygon",points:function(t,e){return[{x:25,y:1},{x:31,y:18},{x:49,y:18},{x:35,y:29},{x:40,y:46},{x:25,y:36},{x:10,y:46},{x:15,y:29},{x:1,y:18},{x:19,y:18}]}},path:{type:"path",path:"m581.077942,2.537359c-2.053223,0.047071 -4.04071,0.188348 -6.108093,0.352907c-33.05542,2.663918 -62.235901,19.640541 -77.057678,44.925953l-7.8573,19.135319c1.698822,-6.633144 4.302979,-13.065384 7.8573,-19.135319c-26.430695,-22.16293 -63.531677,-32.388445 -100.192383,-27.574373c-36.661469,4.788353 -68.503082,24.041758 -85.901978,51.935225c-49.116486,-24.490013 -110.34288,-22.999454 -157.711807,3.860092c-47.369164,26.86068 -72.61673,74.40551 -64.941162,122.38308l5.021355,19.49968c-2.263329,-6.38501 -3.960793,-12.887695 -5.021355,-19.49968l-0.761948,1.798569c-41.179165,3.625244 -74.945375,29.465134 -83.716398,64.059235c-8.771805,34.597748 9.46701,70.085876 45.185621,87.96701l55.776558,10.973114c-19.480217,1.291962 -38.915543,-2.534515 -55.776558,-10.973114c-27.5478,24.96817 -33.888516,61.935303 -15.71492,92.467834c18.173733,30.524719 56.988899,48.110687 97.030457,44.11734l24.339722,-5.21109c-7.827499,2.651611 -15.960983,4.379059 -24.339722,5.21109c22.730042,33.857269 60.428192,58.556244 104.66893,68.383514c44.2491,9.81366 91.240952,4.014771 130.425949,-16.094604c31.96701,40.793823 88.707642,62.217468 145.596313,54.99707c56.902466,-7.219666 103.833984,-41.81427 120.501343,-88.770996l5.781433,-26.239532c-0.863708,8.909546 -2.742249,17.681366 -5.781433,26.239532c39.133301,20.753662 88.353333,21.927307 128.785095,3.049316c40.439819,-18.874084 65.665771,-54.869049 66.036133,-94.078247l-14.495605,-58.580597l-57.105713,-39.630768c44.163452,22.374573 71.992615,56.467255 71.601318,98.211365c52.49707,0.448181 97.103394,-35.956573 117.112427,-77.726288c20.011597,-41.769836 12.443604,-89.396759 -19.864929,-125.164642c13.401184,-26.637695 12.609985,-56.937332 -2.183472,-83.034088c-14.786194,-26.097893 -42.065491,-45.476891 -74.873047,-53.098335c-7.341431,-34.580929 -37.602661,-62.404482 -77.600708,-71.526293c-39.998474,-9.121368 -82.584839,2.123992 -109.364807,28.926123l-16.258179,22.19817c4.157959,-8.018612 9.583923,-15.495213 16.258179,-22.19817c-18.876953,-21.060713 -48.486023,-32.954061 -79.348938,-32.155401l0,0z",width:function(t,e){return t-4},height:function(t,e){return e-4}},ellipse:{type:"ellipse",rx:function(t,e){return t/2-4},ry:function(t,e){return e/2-4}},circle:{type:"circle",radius:function(t,e){return Math.min(t,e)/2-4}}},t.getObjectsList=function(e,i){var n=[];for(var a in this.objectsLibrary){var o=n[a]=t.util.object.cloneDeep(this.objectsLibrary[a]);o.title=o.title||o.type,0===o.width&&(o.width=e),0===o.height&&(o.height=i);for(var s in o)o[s].constructor==Function&&(o[s]=o[s].call(o,e,i))}return n}}).call(e,i(0))},function(t,e,i){(function(t){t.util.object.extend(t.Application.prototype,{loaderIcon:"data:image/svg+xml;base64,"+i(18),loaderContainer:null,_showMainLoaderIndicator:function(){this.loaderEl.show(),this.loaderContainer.addClass("processing")},_hideMainLoaderIndicator:function(){this.loaderEl.hide(),this.loaderContainer.removeClass("processing")},setLoaderTemplate:function(t){if(this.virtual)return!1;this.loaderTemplate=t.replace("{loaderIcon}",this.loaderIcon),t&&(this.loaderContainer=$(this.loaderContainer),this.loaderEl=$(this.loaderTemplate).hide(),this.loaderContainer.append(this.loaderEl),this.on("project:changed",function(){this.project.on("slide:change:begin",this._showMainLoaderIndicator.bind(this)),this.project.on("slide:changed",this._hideMainLoaderIndicator.bind(this))}))}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){function e(t){this.initialize(t)}t.MagicWand=i(8);var n=t.MagicWand;e.prototype={type:"pathfinder",keepOldSelection:!0,alphaChannel:!0,pathfinderMode:"new",selectionTool:"magic",adjacentPixels:!0,async:!1,pathfinderTools:!1,blurRadius:0,hatchLength:4,colorThreshold:15,simplifyTolerant:0,simplifyCount:30,hatchOffset:0,imageInfo:null,mask:null,downPoint:null,allowDraw:!1,shapeSelectionTools:!1,initialize:function(t){t.application&&t.application.fire("entity:created",{target:this,options:t});for(var e in t)this[e]=t[e]},asyncronous:function(t){this.async?setTimeout(t):t()},fillWithCurrentColor:function(){this.fill(this.color)},clearMemory:function(){delete this.resultCanvas,delete this.editedImageCanvas,delete this.test_picture,delete this.mask},hide:function(){this.editedImageCanvas&&(this.editedImageCanvas.remove(),this.resultCanvas.remove(),clearInterval(this.interval),this.clearMemory(),this.fire("hidden"))},setContainer:function(t){return t.constructor===String&&(t=document.getElementById(t)),this.container=t,this.test_picture=new Image,this.test_picture.onload=this.initCanvas.bind(this),this},getSelectionTool:function(){return this.selectionTool},setSelectionTool:function(t){this.selectionTool=t,this.downPoint=!1,this.fire("tool:changed",t)},getThreshold:function(){return this.colorThreshold},setThreshold:function(t){void 0!==t&&(this.colorThreshold=t),this.downPoint&&this.drawMask(this.downPoint.x,this.downPoint.y,this.adjacentPixels),this.fire("threshold:changed",{threshold:this.colorThreshold})},setPicture:function(e){this.setImage(e);var i=t.util.createCanvasElement();i.onmouseup=this.onMouseUp.bind(this),i.onmousedown=this.onMouseDown.bind(this),i.onmousemove=this.onMouseMove.bind(this),i.oncontextmenu=function(){return!1},this.initCanvas(i)},load:function(t){if(t)if(t.constructor===String)e.test_picture.setAttribute("src",t);else{var i=new FileReader;i.onload=function(t){this.test_picture.setAttribute("src",t.target.result)}.bind(this),i.readAsDataURL(t)}},initCanvas:function(t){var e=this.editedImageCanvas;this.resultCanvas&&$(this.resultCanvas).remove(),this.resultCanvas=t,this.createSelectionDrawCanvas(),this.context=t.getContext("2d"),t.width=e.width,t.height=e.height},setImage:function(e){this._test_todo_img=e,this.editedImageCanvas=t.util.createCanvasElement(),this.editedImageCanvas.width=e.width,this.editedImageCanvas.height=e.height,this.editedImageCanvas.getContext("2d").drawImage(e,0,0),this.initCanvas(t.util.createCanvasElement())},getInfo:function(){var t=this.editedImageCanvas.getContext("2d"),e=t.getImageData(0,0,this.editedImageCanvas.width,this.editedImageCanvas.height);return e.bytes=4,e},getMousePosition:function(t){var e=this.resultCanvas.width/$(this.resultCanvas).width(),i=t.target||t.srcElement,n=i.getBoundingClientRect(),a=t.clientX-n.left,o=t.clientY-n.top;return{x:Math.round(a*e),y:Math.round(o*e)}},radius:20,resetSelectionDrawCanvas:function(){this.selectionDrawContext.fillStyle="black",this.selectionDrawContext.fillRect(0,0,this.selectionDrawCanvas.width,this.selectionDrawCanvas.height),this.selectionDrawContext.fillStyle="white",this.selectionDrawContext.strokeStyle="white"},createSelectionDrawCanvas:function(){this.selectionDrawCanvas&&$(this.selectionDrawCanvas).remove(),this.selectionDrawCanvas=t.util.createCanvasElement(),this.selectionDrawCanvas.width=this.resultCanvas.width,this.selectionDrawCanvas.height=this.resultCanvas.height,this.selectionDrawContext=this.selectionDrawCanvas.getContext("2d"),this.resetSelectionDrawCanvas()},_onMouseDown:function(t){t.x=Math.min(Math.max(0,parseInt(t.x)),this.resultCanvas.width-1),t.y=Math.min(Math.max(0,parseInt(t.y)),this.resultCanvas.height-1),this.allowDraw=!0,this.drawingTools[this.selectionTool].mouseDown.call(this,t)},onMouseDown:function(t){t.preventDefault(),t.stopPropagation(),this._onMouseDown(this.getMousePosition(t))},_onMouseMove:function(t){t.x=Math.min(Math.max(0,parseInt(t.x)),this.resultCanvas.width-1),t.y=Math.min(Math.max(0,parseInt(t.y)),this.resultCanvas.height-1),this.drawingTools[this.selectionTool].mouseMove.call(this,t)},onMouseMove:function(t){var e=this.getMousePosition(t);this._onMouseMove(e)},color:[255,0,0,255],onMouseUp:function(t){this.allowDraw=!1,this.drawingTools[this.selectionTool].mouseUp.call(this,t)},applyMask:function(t,e,i){if(0===t.width||0===t.height)return delete this.mask,void this.render();var a=(this.getInfo(),n.maskSelection(t,e,i));this.mask=a,this.fire("selection:changed",{mask:a,target:this.target})},setPathfinderMode:function(t){this.pathfinderMode=t},getPathfinderMode:function(){return this.pathfinderMode},modifySelection:function(t,e,i){this.shouldModify=!1,this.selectionObject&&this.selectionObject.remove(),this.downPoint=!1,void 0===t&&(t=this.mask),void 0===e&&(e=this.pathfinderMode),"new"!==e&&this.oldMask&&(t=n[e](t,this.oldMask)),this.blurRadius&&(t=n.gaussBlurOnlyBorder(t,this.blurRadius)),t&&t.count&&this.keepOldSelection?(t.makeCache(),this.oldMask=t):delete this.oldMask,this.mask=n.createMask(this.editedImageCanvas.width,this.editedImageCanvas.height),i||this.fire("selection:changed",{mask:t,target:this.target}),this.render()},createSelection:function(t){this.shouldModify&&this.modifySelection(),this.mask=t||n.createMask(this.editedImageCanvas.width,this.editedImageCanvas.height),this.render()},setSelection:function(t){this.mask=t,this.render(),this.fire("selection:changed",{mask:t,target:this.target})},fill:function(t,e){this.asyncronous(function(){this._fill(t,!1),e&&e.call(this)}.bind(this),0)},_fill:function(t,e,i){if(this.mask){i=i||this.editedImageCanvas;var a=i.getContext("2d");n.fillMask(a,this.mask,t),this.fire("image:changed",this.editedImageCanvas)}},hatchTick:function(){this.hatchOffset=(this.hatchOffset+1)%(2*this.hatchLength),this.render(!0)},show:function(){for(;this.container.lastChild;)this.container.removeChild(this.container.lastChild);this.container.appendChild(this.editedImageCanvas),this.container.appendChild(this.resultCanvas),this.interval=setInterval(this.hatchTick.bind(this),300),this.fire("show")},clear:function(t,e,i){this.asyncronous(function(){this._fill([0,0,0,0],t,e),i&&i.call(this)}.bind(this),0)},render:function(t){if(this.context&&this.mask){var e=this.context;t||(this.mask.cacheInd=n.getBorderIndices(this.mask)),e.clearRect(0,0,this.mask.width,this.mask.height);var i,a=this.oldMask&&"new"!=this.pathfinderMode&&"add"!=this.pathfinderMode&&"exclude"!=this.pathfinderMode?this.removedMaskColor:this.newMaskColor;i="add"==this.pathfinderMode||"new"==this.pathfinderMode||"intersect"==this.pathfinderMode?this.newMaskColor:this.removedMaskColor;var o;o="exclude"==this.pathfinderMode||"substract"==this.pathfinderMode||"add"==this.pathfinderMode?this.newMaskColor:this.removedMaskColor,this.oldMask&&this.oldMask.render(e,{fill:o}),this.mask.render(e,{fill:a,intersectionColor:i,outerIntersectionColor:o}),this.renderBorder&&(this.oldMask&&this.oldMask.renderBorder(e,{}),this.mask.renderBorder(e,{hatchOffset:this.hatchOffset}))}},renderBorder:!0,intersectionRemovedMaskColor:"#ffaaaa",removedMaskColor:"#aaaaff",newMaskColor:"#aaFFaa",renderMask:function(t,e,i,n,a){(e=e||this.mask)&&e.render(t,{intersectionColor:"#fff",outerIntersectionColor:"#000",fill:i||"#fff",left:n,top:a})},getContours:function(){return this.__cs||(this.__cs=n.traceContours(this.mask),this.__cs=n.simplifyContours(this.__cs,this.simplifyTolerant,this.simplifyCount)),this.__cs},traceInner:function(t){var e=this.getContours(),t=t||this.context;t.beginPath();for(var i=0;i<e.length;i++)if(e[i].inner){var n=e[i].points;t.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)t.lineTo(n[a].x,n[a].y)}t.stroke()},getColor:function(){return"rgba("+this.color.join(", ")+")"},setColor:function(t){var e=t.substring(t.indexOf("(")+1,t.length-1).split(", ");for(var i in e)e[i]=parseFloat(e[i]);e[3]=Math.round(255*e[3]),this.color=e},trace:function(t){var e=this.getInfo(),i=n.traceContours(this.mask);i=n.simplifyContours(i,this.simplifyTolerant,this.simplifyCount);var t=t||this.context;t.clearRect(0,0,e.width,e.height),t.beginPath();for(var a=0;a<i.length;a++)if(i[a].inner){var o=i[a].points;t.moveTo(o[0].x,o[0].y);for(var s=1;s<o.length;s++)t.lineTo(o[s].x,o[s].y)}t.strokeStyle="red",t.stroke(),t.beginPath();for(var a=0;a<i.length;a++)if(!i[a].inner){var o=i[a].points;t.moveTo(o[0].x,o[0].y);for(var s=1;s<o.length;s++)t.lineTo(o[s].x,o[s].y)}t.strokeStyle="blue",t.stroke()},removeNoise:function(t){if(this.mask&&this.mask.count){this.createSelectionDrawCanvas();var e=n.traceContours(this.mask);e=n.simplifyContours(e,this.simplifyTolerant,this.simplifyCount);var i=this.selectionDrawContext;this.canvas.viewportTransform;i.save(),i.translate(.5,.5),i.fillStyle="#fff",i.strokeStyle="#fff";for(var a=0;a<e.length;a++)if(!e[a].inner&&e[a].points.length>t){var o=e[a].points;i.beginPath(),i.moveTo(o[0].x,o[0].y);for(var s=1;s<o.length;s++)i.lineTo(o[s].x,o[s].y);i.closePath(),i.fill()}this.mask=n.maskSelection(this.selectionDrawCanvas),this.setSelection(this.mask),i.restore()}},tools:["adjacentPixels","pathfinderRadius","pathfinderThreshold","selectionTool","pathfinder","fillWithCurrentColor","clear","pathfinderColor"],actions:{cancelSelection:{visible:!1,key:"Escape",action:function(){delete this.shouldModify,this.mask=n.createMask(this.editedImageCanvas.width,this.editedImageCanvas.height)}},modifySelection:{visible:!1,key:"Enter",action:function(){this.shouldModify&&this.modifySelection()}},adjacentPixels:{className:"button-adjacent",title:"selet all",type:"checkbox",value:"adjacentPixels",visible:function(){return"magic"===this.selectionTool},observe:"tool:changed"},pathfinderRadius:{title:"radius",type:"range",value:{get:function(){return this.radius},set:function(t){this.radius=t},min:1,max:255},visible:function(){return"brush"===this.selectionTool},observe:"tool:changed"},pathfinderThreshold:{title:"Threshold",type:"range",value:{observe:"threshold:changed",get:function(){return this.colorThreshold},set:function(t){this.setThreshold(t)},min:0,max:255},visible:function(){return"magic"===this.selectionTool},observe:"tool:changed"},selectionTool:{title:"selection-tool",type:"options",value:"selectionTool",menu:{selectionToolBrush:{className:"fa fa-paint-brush",title:"select-brush",option:"brush"},selectionToolRectangle:{className:"fa fa-square",title:"select-rectangle",option:"rectangle"},selectionElliptical:{className:"fa fa-circle",title:"select-circle",option:"circle"},selectionToolMagic:{className:"fa fa-magic",title:"select-magic",option:"magic"},selectionToolLasso:{use:"shapeSelectionTools",title:"select-lasso",option:"lasso",icon:"data:image/svg+xml;base64,"+i(17)}}},pathfinder:{title:"pathfinder",type:"options",value:"pathfinderMode",menu:{pathfinderNew:{title:"pathfinder-new",option:"new"},pathfinderExclude:{title:"pathfinder-exclude",option:"exclude"},pathfinderSubstract:{title:"pathfinder-substract",option:"substract"},pathfinderAdd:{title:"pathfinder-add",option:"add"},pathfinderIntersect:{title:"pathfinder-intersect",option:"intersect"}}},fillWithCurrentColor:{title:"fillWithCurrentColor",className:"fa fa-paint-brush"},clear:{className:"fa fa-eraser",id:"Pathfinder-clear",title:"clear"},pathfinderColor:{title:"color",type:"color",value:"color"}}},t.util.observable(e.prototype),t.util.object.extend(e.prototype,{selectBackground:function(t){var e,i=this.getInfo();if(t){var a=n.selectBackground(i,[255,255,255,!1],this.colorThreshold),o=n.selectBackground(i,[!1,!1,!1,0],this.colorThreshold);e=n.add(a,o)}else e=n.selectAllByColor(i,[255,255,255,255],this.colorThreshold);this.blurRadius&&(e=n.gaussBlurOnlyBorder(e,this.blurRadius)),this.setSelection(e)},colorSelection:function(e,i){var a,o=this.getInfo(),s=n.createMask(o.width,o.height);for(var r in e){var c=new t.Color(e[r])._source;c[3]=Math.round(255*c[3]),a=n.selectAllByColor(o,c,i[r]),s=n.add(s,a)}delete this.oldMask,this.modifySelection(s)},smartSelection:function(t){var e,i=this.getInfo();e=n.selectBackground(i,null,t||this.colorThreshold),e=n.invertMask(e),delete this.oldMask,this.modifySelection(e)}}),e.prototype.drawingTools={brush:{mouseUp:function(){this.modifySelection(),this.resetSelectionDrawCanvas()},mouseMove:function(t){this.allowDraw&&this.drawCircle(t.x,t.y,this.radius)},mouseDown:function(t){this.createSelection(),this.downPoint=t,this.createSelectionDrawCanvas(),this.drawCircle(t.x,t.y,this.radius)},utils:{drawCircle:function(t,e,i){var a=this.selectionDrawContext;this.canvas.viewportTransform;a.save(),a.beginPath(),a.arc(t,e,this.radius,0,2*Math.PI,!1),a.closePath(),a.fill(),a.restore(),n.maskSelection(this.selectionDrawCanvas,0,0,this.mask,"add"),this.setSelection(this.mask)}}},magic:{mouseUp:function(){this.shouldModify=!0},mouseMove:function(t){if(this.allowDraw){var e=t.x-this.downPoint.x,i=this._init_thres+e,n=Math.min(Math.max(i,1),255);n!=this.colorThreshold&&this.setThreshold(n)}},mouseDown:function(t){return this.shouldModify&&this.modifySelection(),this.downPoint=t,this.colorThreshold=15,this.fire("threshold:changed",{threshold:this.colorThreshold}),this._init_thres=this.colorThreshold,this.drawMask(this.downPoint.x,this.downPoint.y,this.adjacentPixels),!1},utils:{drawMask:function(t,e,i){this.asyncronous(this._drawMask.bind(this,t,e,i),0)},_drawMask:function(t,e,i){n.alphaChannel=this.alphaChannel;var a,o=this.getInfo();i?n.floodFill(o,t,e,this.colorThreshold,{},null,function(t){this.setSelection(t)}.bind(this)):(a=n.selectAll(o,t,e,this.colorThreshold),this.setSelection(a))}}},rectangle:{mouseDown:function(t){this.shouldModify&&this.modifySelection(),this.downPoint=t,this.shouldModify=!0},mouseUp:function(){},mouseMove:function(t){this.allowDraw&&this.drawRectangle(this.downPoint.x,this.downPoint.y,t.x,t.y)},utils:{drawRectangle:function(t,e,i,a){var o=this.getInfo(),s=n.selectRectangle(o,t,e,i,a);this.setSelection(s)}}},circle:{mouseDown:function(e){this.shouldModify&&this.modifySelection(),this.downPoint=e,this.createSelectionDrawCanvas(),this.selectionObject=new t.Ellipse({left:e.x+this.target.left,top:e.y+this.target.top,rx:1,ry:1,hasBorders:!1,originX:"center",originY:"center",strokeWidth:1,fill:"transparent",stroke:"transparent"}),this.canvas.add(this.selectionObject),this.updateShape()},mouseUp:function(){this.canvas.setInteractiveMode("mixed"),this.selectionObject.setCoords();var t=this;this.selectionObject.on("scaling moving rotating",function(){t.updateShape()}),this.canvas.setActiveObject(this.selectionObject),this.shouldModify=!0},mouseMove:function(t){this.allowDraw&&(this.selectionObject.set({rx:Math.abs(t.x+this.target.left-this.selectionObject.get("left")),ry:Math.abs(t.y+this.target.top-this.selectionObject.get("top"))}),this.updateShape())},utils:{updateShape:function(){this.resetSelectionDrawCanvas(),this.selectionObject.fill="white",this.selectionDrawContext.save(),this.selectionDrawContext.translate(-this.target.left,-this.target.top),this.selectionObject.render(this.selectionDrawContext),this.selectionDrawContext.restore(),this.selectionObject.fill="transparent",this.mask=n.maskSelection(this.selectionDrawCanvas),this.setSelection(this.mask)}}},lasso:{mouseUp:function(){this.readyToClosePath&&this._closePath()},mouseMove:function(t){this.allowDraw&&(this.drawLine(this._last_point,t),this._points.push(t),this._last_point=t)},mouseDown:function(t){this.downPoint||(this.createSelection(),this.createSelectionDrawCanvas(),this._path_out=!1,this.downPoint=t,this._points=[],this.selectionDrawContext.beginPath(),this.canvas.on("mouse:move",this._changeCursorOverClosePoint)),this._last_point?this.readyToClosePath?this._closePath():(this.drawLine(this._last_point,t),this._last_point=t,this._points.push(t)):(this.drawLine({x:t.x-.5,y:t.y},{x:t.x+.5,y:t.y}),this._last_point={x:t.x+.5,y:t.y},this._points.push(t),this.shouldModify=!0)},utils:{drawLine:function(t,e){var i=this.selectionDrawContext;this.canvas.viewportTransform;i.save(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore(),n.maskSelection(this.selectionDrawCanvas,0,0,this.mask,"add"),this.setSelection(this.mask)},_closePath:function(t){this.allowDraw=!1;var e=this.selectionDrawContext;e.beginPath(),e.moveTo(this._points[0].x,this._points[0].y);for(var i=1;i<this._points.length;i++)e.lineTo(this._points[i].x,this._points[i].y);e.closePath(),e.fill(),n.maskSelection(this.selectionDrawCanvas,0,0,this.mask,"add"),this.setSelection(this.mask),this.resetSelectionDrawCanvas(),this._points=[],delete this.downPoint,delete this.readyToClosePath,delete this._last_point,this.canvas.off("mouse:move",this._changeCursorOverClosePoint),this.canvas.freeDrawingCursor="crosshair",this.canvas.setCursor(this.canvas.freeDrawingCursor)},_changeCursorOverClosePoint:function(e){var i=this,n=i.pathfinder;if(n.target){var a=t.util.invertTransform(i.viewportTransform),o=t.util.transformPoint(i.getPointer(e.e,!0),a);if(o.x-=n.target.left,o.y-=n.target.top,n.downPoint&&n.downPoint.distanceFrom(o)<10){if(!n._path_out)return;n.readyToClosePath=!0,i.freeDrawingCursor=i.targetCursor,i.setCursor(i.freeDrawingCursor)}else n._path_out=!0,n.readyToClosePath=!1,i.freeDrawingCursor="crosshair",i.setCursor(i.freeDrawingCursor)}}}}};for(var a in e.prototype.drawingTools)t.util.object.extend(e.prototype,e.prototype.drawingTools[a].utils);t.Pathfinder=e,t.util.object.extend(t.SlideCanvas.prototype,{pathfinder:!1,setPathfinder:function(e){e&&(this.pathfinder=new t.Pathfinder("pathfinder"),this.pathfinder.canvas=this)},getPathfinder:function(){return this.pathfinder||this.application&&this.application.pathfinder}}),t.util.object.extend(t.Application.prototype,{initPathfinder:function(){this.pathfinder=new t.Pathfinder({application:this}),this.pathfinder.on("image:changed",function(t){var e=t.toDataURL();this.target._originalElement||(this.target._originalElement=this.target._element),this.target._element=new Image,this.target._element.onload=function(){this.target.fire("content:modified"),this.target.canvas&&this.target.canvas.renderAll()}.bind(this),this.target._element.src=e,this.target._edited=!0,"undefined"!==this.target.dirty&&(this.target.dirty=!0)})}}),t.util.object.extend(t.Application.prototype,{eventListeners:t.util.object.extendArraysObject(t.Application.prototype.eventListeners,{ready:function(){this.initPathfinder()}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.Canvas.prototype.setBackgroundImage;t.util.object.extend(t.Canvas.prototype,{backgroundPosition:"manual",setBackgroundPosition:function(t){return this.backgroundPosition=t,this._update_background_image(),this},offsets:{left:0,right:0,bottom:0,top:0},fillBackgroundColorOverCanvas:!1,_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"];i&&(t.fillStyle=i.toLive?i.toLive(t):i,this.fillBackgroundColorOverCanvas?t.fillRect(i.offsetX||0,i.offsetY||0,this.originalWidth,this.originalHeight):t.fillRect(i.offsetX||this.viewportTransform[4]/this.viewportTransform[0],i.offsetY||this.viewportTransform[5]/this.viewportTransform[0],this.width*this.viewportTransform[0],this.height*this.viewportTransform[0])),(i=this[e+"Image"])&&i.constructor!==String&&i.constructor!==Object&&i.render(t)},getImageData:function(e){e=t.util.object.extend({clipped_area:!1,clipped_area_only:!1,draw_background:!0,format:"png",quality:.8},e||{});var i;if(e.clipped_area){i=e.clipped_area.getBoundingRect();var n=this.getZoom();i.left/=n,i.top/=n,i.width/=n,i.height/=n,t.util.object.extend(e,i)}else i={width:e.width||this.originalWidth||this.width,height:e.height||this.originalHeight||this.height},e.clipped_area_only&&(i.width-=this.offsets.left+this.offsets.right,i.height-=this.offsets.top+this.offsets.bottom);e.zoom&&(i.width*=e.zoom,i.height*=e.zoom);var a=t.util.createCanvasElement();a.width=i.width,a.height=i.height,e.left=Math.floor(e.left),e.top=Math.floor(e.top),e.height=Math.ceil(e.height),e.width=Math.ceil(e.width),this.renderThumb(a,e);var o=a.toDataURL(e),s=t.util.dataURItoBlob(o,"image/"+e.format);return{dataURL:o,blob:s,url:URL.createObjectURL(s),canvas:a}},getOriginalSize:function(){return{width:this.originalWidth,height:this.originalHeight}},renderThumb:function(e,i){if(i=i||{objects:!0,clipped_area_only:!1,draw_background:!0},i.zoom)var n=i.zoom;else if(e.width)var n=e.width/(this.originalWidth||this.width);else var n=1;var a=this.viewportTransform[0],o=this.viewportTransform[4],s=this.viewportTransform[5];this.viewportTransform[4]=this.viewportTransform[5]=0,this.viewportTransform[0]=this.viewportTransform[3]=1,this.viewportTransform[0]=this.viewportTransform[3]=n,this.clipRect&&this.clipRect.setOpacity(0);var r={width:this.originalWidth||this.width,height:this.originalHeight||this.height};r.width=Math.ceil(r.width*n),r.height=Math.ceil(r.height*n);var c=t.util.createCanvasElement();c.width=r.width,c.height=r.height;var u=c.getContext("2d");this.clearContext(u),u.save(),u.transform.apply(u,this.viewportTransform),i.draw_background&&this._renderBackground(u),!i.clipped_area_only&&this.clipTo&&t.util.clipContext(this,u);var l;if(l=i.objects&&i.objects.constructor===Array?i.objects:!1!==i.objects?this._objects:[],i.clipped_area){l=t.util.object.clone(l);for(var h=l.length;h--;)l[h].clipTo!==i.clipped_area&&l.splice(h,1)}this._renderObjects(u,l),u.restore(),!i.clipped_area_only&&this.clipTo&&u.restore(),this._renderOverlay(u),u.restore(),this.clipRect&&this.clipRect.setOpacity(1);var d=e.getContext("2d");if(d.clearRect(0,0,e.width,e.height),i.clipped_area_only&&this.clipRect)var g={left:this.clipRect.left*n,top:this.clipRect.top*n,width:this.clipRect.width*n,height:this.clipRect.height*n};else var g={left:i.left*n||0,top:i.top*n||0,width:i.width*n||r.width,height:i.height*n||r.height};return i.angle?(d.rotate(-i.angle*Math.PI/180),d.drawImage(c,0,0,g.width+g.left+c.width,g.height+g.top+c.height,-g.left,-g.top,e.width+g.left+c.width,e.height+g.top+c.height)):d.drawImage(c,g.left,g.top,g.width,g.height,0,0,e.width,e.height),this.viewportTransform[0]=this.viewportTransform[3]=a,this.viewportTransform[4]=o,this.viewportTransform[5]=s,e},getRect:function(e){var i={},n=this.originalWidth||this.width,a=t.util.flex(n,[{value:e.left,flex:0},{value:e.width,flex:1},{value:e.right,flex:0}]);i.left=a[0],i.width=a[1],i.right=a[2];var o=this.originalHeight||this.height,a=t.util.flex(o,[{value:e.top,flex:0},{value:e.height,flex:1},{value:e.bottom,flex:0}]);return i.top=a[0],i.height=a[1],i.bottom=a[2],i}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){var e=t.Canvas.prototype._setObjectScale,i=t.Canvas.prototype._setupCurrentTransform;t.util.object.extend(t.Canvas.prototype,{_setupCurrentScaleTransform:i,_setupCurrentTransform:function(t,e){if(e)return e.setupCurrentTransform?e.setupCurrentTransform(t):e.resizable?this._setupCurrentResizeTransform(t,e):this._setupCurrentScaleTransform.call(this,t,e)},_setObjectScale:function(t,i,n,a,o,s,r){var c=i.target;if(!r){var u=c.stroke?c.strokeWidth:0;r={x:c.width+u/2,y:c.height+u/2}}return c.setObjectScale?c.setObjectScale(t,i,n,a,o,s,r):c.resizable?this._setObjectSize(t,i,n,a,o,s,r):e.call(this,t,i,n,a,o,s,r)},_setObjectSize:function(t,e,i,n,a,o,s){var r=e.target,c=!1,u=!1,l=e.target.strokeWidth||0;return e.newWidth=this.width*(t.x/e.scaleX/(this.width+l)),e.newHeight=this.height*(t.y/e.scaleY/(this.height+l)),(this.wholeCoordinates||r.wholeCoordinates)&&(e.newWidth=Math.round(e.newWidth),e.newHeight=Math.round(e.newHeight)),e.newHeight<0&&(r.top=e.top-e.newHeight),r.minWidth&&e.newWidth<=r.minWidth&&(e.newWidth=r.minWidth),r.minHeight&&e.newHeight<=r.minHeight&&(e.newHeight=r.minHeight),o&&e.newWidth<r.width&&(c=!0),o&&e.newHeight<r.height&&(u=!0),"equally"===a?c||u||this._resizeObjectEqually(t,r,e,s):a?"x"!==a||r.get("lockUniScaling")?"y"!==a||r.get("lockUniScaling")||u||r.setHeight(e.newHeight):c||r.setWidth(e.newWidth):(c||r.setWidth(e.newWidth),u||r.setHeight(e.newHeight)),!c&&!u},_setupCurrentResizeTransform:function(t,e){this._setupCurrentScaleTransform(t,e),this._currentTransform.original.height=e.height,this._currentTransform.original.width=e.width},_resizeObjectEqually:function(t,e,i,n){var a=t.y+t.x,o=n.y*i.original.height/e.height+n.x*i.original.width/e.width;i.newWidth=i.original.width*a/o,i.newHeight=i.original.height*a/o;var s=i.original.height/i.original.width;s>1?e.minWidth&&i.newWidth<=e.minWidth&&(i.newWidth=e.minWidth,i.newHeight=e.minHeight*s):e.minHeight&&i.newHeight<=e.minHeight&&(i.newHeight=e.minHeight,i.newWidth=e.minWidth/s),e.setWidth(i.newWidth),e.setHeight(i.newHeight)}})}).call(e,i(0))},function(t,e,i){(function(t){"undefined"==typeof saveAs?t.saveAs=i(23).saveAs:t.saveAs=saveAs,t.util.object.extend(t.SlideCanvas.prototype,{insertRenderArea:!1,insertRenderFull:!1}),t.util.object.extend(t.SlideCanvas.prototype.actions,{renderArea:{className:"fa fa-download",title:"download",action:function(){t.saveAs(this.getImageData({clipped_area:this.activeArea,zoom:this.dotsPerUnit,clipped_area_only:!0,draw_background:!0}).blob,this.title)}},renderFull:{title:"download with background",action:function(){t.saveAs(this.getImageData({zoom:this.dotsPerUnit,clipped_area_only:!1,draw_background:!0}).blob,this.title)}}})}).call(e,i(0))},function(t,e,i){(function(t){t.util.object.extend(t.SlideCanvas.prototype,{activeDrawingTools:[],drawingTools:{},insertDrawingTool:!1,actions:t.util.object.extend(t.SlideCanvas.prototype.actions,{drawingTool:{title:"drawing-tool",type:"options",value:"freeDrawingBrush",menu:function(){var e={};for(var i in this.activeDrawingTools){var n=this.activeDrawingTools[i];e[n]=t.util.object.extend({option:n},this.drawingTools[n])}return e}}}),freeDrawingBrush:"PencilBrush",drawingColor:[0,0,0,255],_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.freeDrawingBrush.target||this.discardActiveObject(e).renderAll(),this.clipTo&&t.util.clipContext(this,this.contextTop);var i=this.getPointer(e);this.freeDrawingBrush.onMouseDown(i),this._handleEvent(e,"down")},getFreeDrawingBrush:function(){return this.freeDrawingBrush?t.util.string.capitalize(t.util.string.camelize(this.freeDrawingBrush.type),!0):"Selection"},setFreeDrawingBrush:function(e){if("Selection"==e)return this.isDrawingMode=!1,void(this.freeDrawingBrush="");var i=t.util.string.capitalize(t.util.string.camelize(e),!0);this["__"+i]?this.freeDrawingBrush=this["__"+i]:this.freeDrawingBrush=this["__"+i]=new t[i](this),this.fire("brush:changed",{brush:this.freeDrawingBrush})},drawZoomedArea:function(t,e,i,n,a,o){n=n||90,a=a||90,t.save(),t.translate(e||0,i||0),t.fillStyle="black",t.strokeStyle="#fff",t.strokeWidth=1,t.setLineDash([2,2]),t.drawImage(this.backgroundImage._element,Math.floor(o.x)-4,Math.floor(o.y)-4,9,9,0,0,n,n),t.strokeRect(0,0,n,n),t.strokeRect(40,40,10,10),t.restore()}}),t.SlideCanvas.prototype.drawingTools.Selection={className:"fa fa-mouse-pointer",title:"Selection"},t.SlideCanvas.prototype.activeDrawingTools.push("Selection")}).call(e,i(0))},function(t,e,i){(function(t){t.util.createThumb=function(e,i){function n(){if(c.processing||!c.loaded)return!1;c.renderThumb(i),r=c.modified}function a(){if(this.canvas)return void(this.canvas.loaded&&this.canvas.renderThumb(i));if(u&&this.data.thumb){var e=new Image;return e.onload=function(){var t=i.getContext("2d");t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0,i.width,i.height),r=this.modified},void(e.src=this.data.thumb)}if("true"===attrs.force)var n=new t.SlideCanvas(null,this.data,function(){n.renderThumb(i)})}function o(){var a={width:l,height:h},o={width:e.canvas.originalWidth||e.canvas.width,height:e.canvas.originalHeight||e.canvas.height},s=t.util.getProportions(o,a,"fit");i.width=s.width,i.height=s.height,i.style.width=s.width+"px",i.style.height=s.height+"px",n()}function s(){this.canvas.on("after:render",n),this.canvas.on("dimensions:modified",o),this.canvas.on("loading:end",o)}var r,c=e.canvas,u=!0,l=+i.getAttribute("width"),h=+i.getAttribute("height");h&&(i.style.height=i.height),i.setAttribute("title",e.title),e.on("canvas:changed",s),e.on("modified",a),o.call(e),a.call(e),s.call(e)}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){if(!e){var e=i(1);i(72),i(74),i(75),i(76),i(73)}e.prototype.setFunctionCallback=function(t){return t.canvas?t.canvas.renderAll():t.renderAll?t.renderAll():void 0},t.util.object.extend(t.Object.prototype,{_getTools:function(e,i){var n=-1;if(-1==(n=e.indexOf("*")))return e;var a=t.util.string.capitalize(t.util.string.camelize(i.type),!0),o=t[a].prototype,s=this.application.prototypes[a],r=s&&s.tools||o.tools;return r&&e.splice.apply(e,[n,1].concat(r)),this._getTools(e,o.__proto__)},setTools:function(t){this.tools=this._getTools(t,this.__proto__.__proto__)},makeActions:function(){e.makeActions(this)}}),t.util.object.extend(t.Application.prototype,{toolbar:!1,setApplicationToolbarContainer:function(t){this.applicationToolbarContainer=t,new e(this,t)},setCanvasToolbarContainer:function(t){this.canvasToolbarContainer=t,new e(this.canvas,t)},setObjectsToolbarOptions:function(t){t=_.defaults(t||{originX:"left",originY:"top",marginX:0,marginY:0}),this.objectsToolbarOptions=t},setObjectsToolbarContainer:function(t){this.objectsToolbarContainer=t;var e=this.canvas;t?this.$menu=$(document.getElementById(t)).hide():(this.$menu=this.$menu||$("<div>"),$(this.wrapperEl).prepend(this.$menu)),this.$menu.hide();var i=e.target;e.on({"object:moving":function(t){var i=this.getToolbarContainer();e.setToolbarCoords(i,e.target,e.application.objectsToolbarOptions)},"target:cleared":function(t){if(i){this.getToolbarContainer().hide(),e.objectToolbar.destroy(),delete e.objectToolbar,i=null}},"target:changed":function(t){i&&e.objectToolbar.destroy(),e.createFloatedMenu(this.application.objectsToolbarOptions),i=t.target}})},setToolbarOptions:function(i){t.util.object.deepExtend(e.tools,i.tools);for(var n in i.actions){var a=i.actions[n];t[n].prototype.actions||(t[n].prototype.actions={});var o=t[n].prototype.actions;a=a.constructor==Function?a.call(t[n].prototype):t.util.object.cloneDeep(a);for(var s in a)o[s]?(a[s].$clone&&(o[s]=t.util.object.deepExtend({},o[s]),delete a[s].$clone),t.util.object.deepExtend(o[s],a[s])):o[s]=a[s]}},eventListeners:t.util.object.extendArraysObject(t.Application.prototype.eventListeners,{})}),t.Toolbar=e,t.util.object.extend(t.Canvas.prototype,{setToolbarCoords:function(e,i,n){n=t.util.object.extend({originX:"left",originY:"top",marginX:0,marginY:0},n),i.setCoords();var a,o=i.getBoundingRect();switch(n.originX){case"left":a=o.left;break;case"right":a=o.left+o.width;break;case"center":a=o.left+o.width/2}var s;switch(n.originY){case"top":s=o.top-e.height();break;case"bottom":s=o.top+o.height;break;case"center":s=o.top+o.height/2-e.height()/2}s+=n.marginY,a+=n.marginX;var r=$(e.parents()[0]).offset(),c=$(this.wrapperEl).offset();s+=c.top-r.top,a+=c.left-r.left;var u={top:Math.max(3,s),left:Math.min(Math.max(3,a),$(this.wrapperEl).width()-e.width()-5)};return $(this.wrapperEl).offset(),e.css(u),u},getToolbarContainer:function(t,e){return $(document.getElementById(this.application.objectsToolbarContainer))},createFloatedMenu:function(t){var i=this.getToolbarContainer();i.show(),this.target.actions&&(this.objectToolbar=new e(this.target,i,t)),this.setToolbarCoords(i,this.target,this.application.objectsToolbarOptions)}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.uploadImageMaxSize={width:400,height:400},t.util.uploadImageMinSize={width:100,height:100},t.util.multiUpload=!1,t.util.readFile=function(e,i){var n=new FileReader;n.onload=function(n){var a=n.target.result,o=a.substr(11,a.indexOf(";")-11),s=new Image;s.type=o,s.name=e.name,s.onload=function(){t.util.multiUpload?i():t.util.uploadPreprocessor?t.util.uploadPreprocessor([this],function(t){i(t)},options):i(this)},s.src=a},n.readAsDataURL(e)},t.util.createUploadInput=function(e,i,n){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("multiple",!0),a.className="hidden",$(a).change(function(){if(a.files&&a.files.length)for(var o=t.util.queueLoad(a.files.length,function(n){t.util.multiUpload?t.util.uploadPreprocessor?t.util.uploadPreprocessor(n,function(t){i(t,e)},e):i(n,e):i(n[0],e)},function(e,i,a){t.util.multiUpload&&n&&n(e,i,a)}),s=0;s<a.files.length;s++)t.util.readFile(a.files[s],o)}),t.util.uploadInput=a},t.util.uploadPreprocessor=null,t.util.uploadImage=function(e,i,n){t.util.createUploadInput(n,e,i),$(t.util.uploadInput).trigger("click")},t.util.resizeUploadedImage=function(e,i){if("svg+xml"===e.type)return void i(e);if(e.width<t.util.uploadImageMinSize.width||e.height<t.util.uploadImageMinSize.height)return alert("Logo is too small. MInimum size is "+t.util.uploadImageMinSize.width+"x"+t.util.uploadImageMinSize.height),void i(!1);if(e.width>t.util.uploadImageMaxSize.width||e.height>t.util.uploadImageMaxSize.height){var n=t.util.getProportions(e,t.util.uploadImageMaxSize,"fit"),a=new t.Image.filters.ResizeDP,o=t.util.createCanvasElementWithSize(e);o.getContext("2d").drawImage(e,0,0),a.applyTo(o,n.width,n.height),i(o)}else i(e)},t.util.object.extend(t.Canvas.prototype,{uploadClass:"Image",uploadImageTool:!1,createImageObject:function(t,e){t&&this.createObject({position:"center",active:!0,type:this.uploadClass,image:t,clipTo:this.activeArea,movementLimits:this.activeArea})},actions:t.util.object.extend(t.SlideCanvas.prototype.actions,{uploadImage:{className:"fa fa-upload",key:"U",title:"upload image",action:function(){t.util.uploadImage(function(t){this.createImageObject(t,this.uploadClass)}.bind(this))}}})})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){t.util.object.extend(t.Object.prototype,{responsiveBorders:!1}),t.SlideCanvas.prototype._default_event_listeners||(t.SlideCanvas.prototype._default_event_listeners={}),t.Object.prototype.updateResponsiveBorder=function(){this.responsiveBorders&&(this.originalStrokeWidth||(this.originalStrokeWidth=this.strokeWidth),this.strokeWidth=this.canvas?this.originalStrokeWidth/this.canvas.viewportTransform[0]:0)},t.util.object.extend(t.SlideCanvas.prototype,{_default_event_listeners:{"dimensions:modified":function(){this.centerAndZoomOut()},"viewport:scaled":function(){this.backgroundImage&&this.backgroundImage.updateResponsiveBorder();for(var t in this._objects)this._objects[t].updateResponsiveBorder()},"background-image:loaded":function(t){this.autoCenterAndZoomOutEnabled&&this.centerAndZoomOut()},"loading:end":function(t){this.autoCenterAndZoomOutEnabled&&(this.originalHeight||this.originalWidth)&&this.centerAndZoomOut()},"object:added":function(t){t.target.updateResponsiveBorder()}}}),t.util.object.extend(t.SlideCanvas.prototype,{zoomCtrlKey:!0,mouseWheelEnabled:!1,_setZoomNative:t.Canvas.prototype.setZoom,_zoomToPointNative:t.Canvas.prototype.zoomToPoint,changeDimensionOnZoom:!1,drawZoomArea:function(e,i,n,a,o){e.save(),e.translate(i||0,n||0);var s=this.getZoom(),r=t.util.getProportions(this.backgroundImage,{width:a||100,height:o||100});e.globalAlpha=.5,e.fillRect(0,0,r.width,r.height),e.strokeStyle="red";var c=this.viewportTransform,u=-c[4]*r.scale/s,l=-c[5]*r.scale/s,h=u+this.width*r.scale/s,d=l+this.height*r.scale/s;u=Math.max(u,0),l=Math.max(l,0),h=Math.min(h,r.width),d=Math.min(d,r.height),e.globalAlpha=1,e.beginPath(),e.moveTo(u,l),e.lineTo(h,l),e.lineTo(h,d),e.lineTo(u,d),e.lineTo(u,l),e.fill(),e.clip(),e.drawImage(this.backgroundImage._element,0,0,r.width,r.height),e.stroke(),e.strokeRect(0,0,r.width,r.height),e.restore()},setZoom:function(e){if(this.changeDimensionOnZoom){var i=Math.round(this.originalWidth*e),n=Math.round(this.originalHeight*e);this.setDimensions({width:i,height:n})}this._zoomToPointNative(new t.Point(0,0),e),this.fire("viewport:scaled",{scale:e})},zoomToPoint:function(t,e){var i=this.getMaxZoom(),n=this.getMinZoom().scale;e>i&&(e=i),e<n&&(e=n),this._zoomToPointNative(t,e);for(var a in this._objects)this._objects[a].setCoords();this.fire("viewport:scaled",{scale:e})},resetViewport:function(){_canvas.viewportTransform[0]=1,_canvas.viewportTransform[3]=1,_canvas.viewportTransform[4]=0,_canvas.viewportTransform[5]=0,_canvas.renderAll();for(var t in this._objects)this._objects[t].setCoords()},zoomToPointEnabled:!0,minZoomFactor:1,maxZoom:20,autoCenterAndZoomOutEnabled:!1,getMaxZoom:function(){return this.maxZoom},getMinZoom:function(){var e={width:$(this.wrapperEl).width(),height:$(this.wrapperEl).height()},i={width:this.originalWidth,height:this.originalHeight},n={width:e.width*this.minZoomFactor,height:e.height*this.minZoomFactor};return t.util.getProportions(i,n,"fit")},centerAndZoomOut:function(){if(!this.virtual){var t=this.getMinZoom(),e={width:$(this.wrapperEl).width(),height:$(this.wrapperEl).height()},i=this.viewportTransform.slice(0);i[0]=t.scale,i[3]=t.scale,i[4]=(e.width-t.width)/2,i[5]=(e.height-t.height)/2,this.setViewportTransform(i),this._update_background_image()}},centerOnObject:function(e){var i=e.getBoundingRect(),n=this.viewportTransform;i.width/=n[0],i.height/=n[3];var a={width:1.1*i.width,height:1.1*i.height},o=t.util.getProportions(a,this),s=(this.width/o.scale-a.width)/2,r=(this.height/o.scale-a.height)/2,c=(i.left-n[4])/n[0],u=(i.top-n[5])/n[3],l=(o.scale,o.scale,e.left,o.scale,e.width,o.scale,e.top,o.scale,e.height,o.scale,[o.scale,0,0,o.scale,-c*o.scale+(.05*i.width+s)*o.scale,-u*o.scale+(.05*i.height+r)*o.scale]);this.setViewportTransform(l),this.fire("viewport:scaled",{scale:o.scale}),this.renderAll()},__onMouseWheel:function(e){if(this.mouseWheelEnabled&&(!this.zoomCtrlKey||e.ctrlKey)){var i;i=e.deltaY<0?1.1:.9;var n=this.getZoom()*i,a=this.getMinZoom().scale;if(this.zoomToPointEnabled){var o=new t.Point(e.offsetX,e.offsetY),s=this.viewportTransform[4],r=this.viewportTransform[5],c=this.originalWidth*this.getZoom()+s,u=this.originalHeight*this.getZoom()+r;o.x<s&&(o.x=s),o.y<r&&(o.y=r),o.x>c&&(o.x=c),o.y>u&&(o.y=u),a>n?this.autoCenterAndZoomOutEnabled&&this.centerAndZoomOut():this.zoomToPoint(o,n)}else this.setZoom(n);for(var l in this._objects)this._objects[l].setCoords();return this.renderAll(),e.stopPropagation(),e.preventDefault(),!1}},scaleFactor:1.1,getOrignalCenter:function(){var t=this.getCenter();return t.left+=this.viewportTransform[4],t.top+=this.viewportTransform[5],t}}),t.util.object.extend(t.SlideCanvas.prototype.actions,{zoomOut:{className:"fa fa-search-minus",title:"zoom-out",action:function(t){var e=this.getOrignalCenter(),i=this.getZoom()/this.scaleFactor;this.zoomToPoint({x:e.left,y:e.top},i)}},zoomNumber:{type:"number",value:{min:function(){return.01},max:function(){return 10},set:function(t){this.setZoom(t)},get:function(){return this.getZoom()},observe:"viewport:scaled"}},zoomIn:{className:"fa fa-search-plus",title:"zoom-in",action:function(t){var e=this.getOrignalCenter(),i=this.getZoom()*this.scaleFactor;this.zoomToPoint({x:e.left,y:e.top},i)}}})}).call(e,i(0))},function(t,e,i){var n=i(3);n.object=i(2);var a=function(t,e){this.parent=t,this.clear(e)};a.prototype.setRecords=function(t,e){return this.canUndo=t.length,this.canRedo=!1,t.length||(t=[{type:"initialized",id:0,text:"initialized"}]),this.records=t,this.length=this.records.length,this.current=void 0===e?t.length-1:e,this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this},a.prototype.restore=function(){return this.setRecords(this.saved.records,this.saved.current),this},a.prototype.save=function(){return this.saved={current:this.current,records:n.object.cloneDeep(this.records)},this},a.prototype.clear=function(t){return t?t.id=0:t={type:"initialized",id:0,text:"initialized"},this.records=[t],this.current=0,this.canUndo=!1,this.canRedo=!1,this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this},a.prototype.add=function(t){return!(!this.enabled||this.processing)&&(t.moment=(new Date).getTime(),this.canUndo=!0,this.canRedo=!1,this.records.splice(this.current+1),this.records.push(t),this.length=this.records.length,t.id=this.length-1,t.text=t.type||t.text,this.current=this.length-1,this.activeAction=this.records[this.current],this.fire("changed",{action:t}),this)},a.prototype.disable=function(){return this.enabled=!1,this},a.prototype.enable=function(){return this.enabled=!0,this},a.prototype.undo=function(t){this.canRedo=!0;var e=this.records[this.current];return this.current--,this.processing=!0,e.undo.call(this.parent,e),this.processing=!1,0==this.current&&(this.canUndo=!1),t||(this.activeAction=this.records[this.current],this.fire("changed",{action:e})),this},a.prototype.goto=function(t){if(t!=this.current){if(t<this.current)for(var e=this.current-t;e--;)this.undo(!0);if(t>this.current)for(var e=t-this.current;e--;)this.redo(!0);return this.activeAction=this.records[this.current],this.fire("changed",{action:this.activeAction}),this}},a.prototype.redo=function(t){if(this.current!=this.length-1){this.processing=!0,this.canUndo=!0,this.current++;var e=this.records[this.current];return e.redo.call(this.parent,e),this.current==this.length-1&&(this.canRedo=!1),this.processing=!1,t||(this.activeAction=this.records[this.current],this.fire("changed",{action:e})),this}},n.observable(a.prototype),t.exports=a},function(t,e,i){(function(t){t.util.object.extend(t.PathGroup.prototype,{initialize_overwritten:t.PathGroup.prototype.initialize,initialize:function(t,e){t.constructor!=Array&&(e=t.toObject(),delete e.paths,t=t.paths),this.initialize_overwritten(t,e)},extractColors:function(){var t={},e=this.paths;for(var i in e)if(e[i].fill.type)for(var n in e[i].fill.colorStops){var a=e[i].fill.colorStops[n].color;t[a]||(t[a]=[]),t[a].push({object:e[i],stop:e[i].fill.colorStops[n]})}else{var a=e[i].fill;t[a]||(t[a]=[]),t[a].push({object:e[i],color:e[i]})}return t}}),t.PathGroup.fromElements=function(e,i,n){var a={toBeParsed:!0};if(e.length){var o=1/0,s=1/0;for(var r in e)o=Math.min(e[r].left,o),s=Math.min(e[r].top,s);o=Math.max(o,0),s=Math.max(s,0)}var c=t.util.groupSVGElements(e,a,n),u=i.width?i.width/c.width:null,l=i.height?i.height/c.height:null;return u&&!l&&(l=u),l&&!u&&(u=l),l||u||(u=l=1),delete i.height,delete i.width,c.set(t.util.object.extend(i,{scaleX:u,scaleY:l})),c.setLeft(i.left),c.setTop(i.top),c},t.PathGroup.fromURL=function(e,i,n){t.loadSVGFromURL(e,function(e){var a=new t.PathGroup(e,{toBeParsed:!0}),o=n.width?n.width/a.width:null,s=n.height?n.height/a.height:null;o&&!s&&(s=o),s&&!o&&(o=s),s||o||(o=s=1),a.set({scaleX:o,scaleY:s}),i(a)})}}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(45),i(44),i(67),i(7),i(59),t.Clipart=t.util.createClass(t.Group,t.StrokeMixin,t.CacheMixin,t.ImageMixin,{type:"clipart",colors:null,format:"svg",resizable:!0,processing:!1,stateProperties:t.Group.prototype.stateProperties.concat(["colors"]),optionsOrder:["*","colors","element"],getOriginalSize:function(){return{width:this.element.width,height:this.element.height}},initialize:function(t){if(t||(t={}),t.constructor!=Object){var e=t.toObject();t.element&&(e.element=t.element.cloneSync(),e.element.clipTo=e._fabric_shape),e.shape=t.shape,t=e}this.on({scaling:this.updateElement}),this.initShape(t),this._fabric_shape.set({opacity:0,originX:"center",originY:"center"}),this.callSuper("initialize",[this._fabric_shape],t),this._setWidthHeight(t)},setShape:function(e,i){e=t.util.object.extend({strokeWidthFull:this.shape.strokeWidthFull,strokeWidthEmpty:this.shape.strokeWidthEmpty,strokeWidthActive:this.shape.strokeWidthActive,dashArray:this.shape.dashArray,strokeEmpty:this.shape.strokeEmpty,strokeFull:this.shape.strokeFull,strokeActive:this.shape.strokeActive},e);var n=this;e&&e.src&&!e.paths?t.loadSVGFromURL(e.src,function(a,o){e.paths=a,t.util.object.extend(e,o),n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),i&&i()}):(n._set_shape(e),n.add(n._fabric_shape),n._apply_shape(),i&&i())},setElement:function(t){this.element&&this.remove(this.element),t&&(t.set({originX:"center",originY:"center"}),this.add(t),this.element=t,"png"===this.format||"image/png"===this.format||"jpeg"===this.format||"image/jpeg"===this.format?this._cache=this.element._element:this._init_color_array(),this.dirty=!0,this.canvas&&this.canvas.renderAll())},updateElement:function(){this.element&&(this.element.scaleX=this.width/this.element.width,this.element.scaleY=this.height/this.element.height),this._fabric_shape&&this._fabric_shape.set({width:this.width,height:this.height}),this.dirty=!0},_render:function(t){t.save(),t.scale(this.element.scaleX,this.element.scaleY);for(var e=0,i=this.element.paths.length;e<i;++e)this.element.paths[e].render(t,!0);t.restore()},activate:function(){this._activated=!0,this._fabric_shape.setOpacity(1),this.updateStroke(),this.canvas.renderAll()},deactivate:function(){this._activated=!1,this.updateStroke(),this.canvas.renderAll()},_init_color_array:function(){this.processing=!0,this._colors=this.element.extractColors(),this.colors=this.colors||{};for(var t in this.colors)this.setClipartColor(t,this.colors[t],!0)},setElementFromMenu:function(e){var i=this;t.PathGroup.fromURL(e.image.src,function(t){i.setElement(t),i.makeActions(),i.canvas.createFloatedMenu(i.application.objectsToolbarOptions)},{width:this.width,height:this.height})},setClipartColor:function(t,e,i){e?this.colors[t]=e:(e=t,delete this.colors[t]);var n=this._colors[t];for(var a in n)n[a].color&&(n[a].color.fill=e),n[a].stop&&(n[a].stop.color=e);this.dirty=!0,this.canvas&&this.canvas.renderAll()},toObject:function(t){var e=this.callSuper("toObject",["src","colors"].concat(t));return delete e.objects,e},actions:{source:{type:"effect",className:"fa fa-file-image-o",title:"source",actionParameters:function(t,e){e.target.application.createGallery(e.target,t,e)}},colors:{type:"menu",title:"color menu",menu:function(){var t=[];for(var e in this._colors)t.push({title:"Color ("+e+")",value:{defaultValue:e,value:this.colors[e]||e,get:function(t){return this.colors[t]||t}.bind(this,e),set:this.setClipartColor.bind(this,e)},type:"color"});return t}}}}),t.Clipart.async=!0,t.Clipart.fromObject=function(e,i){if("string"!=typeof e.src)return new t.Clipart(e);"png"===e.format||"image/png"===e.format||"jpeg"===e.format||"image/jpeg"===e.format?t.Image.fromURL(e.src,function(n){e.element=n,i(new t.Clipart(e))},{width:e.width||t.Clipart.prototype.width,height:e.height||t.Clipart.prototype.height}):t.PathGroup.fromURL(e.src,function(n){e.element=n,i(new t.Clipart(e))},{width:e.width||t.Clipart.prototype.width,height:e.height||t.Clipart.prototype.height})},t.util.createAccessors(t.Clipart),t.objectsLibrary&&t.util.object.extend(t.objectsLibrary,{clipart:{width:function(t,e){Math.min(285/365,t/e);return t},height:function(t,e){Math.min(285/365,t/e);return e},type:"clipart",src:"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeD0iMHB4IiB5PSIwcHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4Ij4KPGc+Cgk8cGF0aCBzdHlsZT0iZmlsbDojRkY4QzQ2OyIgZD0iTTE2My4xODksNjcuMTQ4QzEyOS42MTYsNjcuMTQ4LDEyMS4yMjIsMCw3OS4yNTUsMEM1Mi43MTMsMCwyOC44OTQsMTYuNzg3LDI4Ljg5NCw1MC4zNjEgICBzNTguNzU0LDUwLjM2MSw0MS45NjcsMTA5LjExNUwxNjMuMTg5LDY3LjE0OHoiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGRjhDNDY7IiBkPSJNMzQ3Ljg0NSw2Ny4xNDhDMzgxLjQxOSw2Ny4xNDgsMzg5LjgxMiwwLDQzMS43OCwwYzI2LjU0MiwwLDUwLjM2MSwxNi43ODcsNTAuMzYxLDUwLjM2MSAgIHMtNTguNzU0LDUwLjM2MS00MS45NjcsMTA5LjExNUwzNDcuODQ1LDY3LjE0OHoiLz4KPC9nPgo8Zz4KCTxwYXRoIHN0eWxlPSJmaWxsOiNGRkVCRDI7IiBkPSJNMzMxLjU0MSw0NjEuNjM5QzMzMS41NDEsNDg5LjQ1MywzMTEuNjI2LDUxMiwyNTYsNTEycy03NS41NDEtMjIuNTQ3LTc1LjU0MS01MC4zNjF2LTguMzkzaDE1MC41OTkgICBMMzMxLjU0MSw0NjEuNjM5eiIvPgoJPHBhdGggc3R5bGU9ImZpbGw6I0ZGRUJEMjsiIGQ9Ik00NTkuMzY4LDE4Mi45MWMzNC40NDYsNTYuMzAzLDQwLjA0MiwxMDIuNDY3LDQwLjA0MiwxMDIuNDY3aC0xNi43ODcgICBjMCwwLDE2Ljc4Nyw0MS40NDMsMTYuNzg3LDY3LjE0OGwtMjUuMTgtOC4zOTNjMCwwLDE2Ljc4NywzNy43NywxNi43ODcsNjcuMTQ4YzAsMC41MjUtMjUuMTgtOC4zOTMtMjUuMTgtOC4zOTMgICBzMTIuNTksMjguMzI4LDguMzkzLDQxLjk2N2MtMC4xNTQsMC41MDEtMjUuMTgtOC4zOTMtMjUuMTgtOC4zOTNzNy4zNDQsMTkuNTg1LDAsMzMuNTc0bC00MS45NjctMTYuNzg3ICAgYzAsMC03Ljg0NiwyNS42ODEtOC4zOTMsMjUuMThjLTE4LjM2MS0xNi43ODctNDEuOTY3LTI1LjE4LTQxLjk2Ny0yNS4xOEgxNTUuMjc5YzAsMC0yMy42MDcsOC4zOTMtNDEuOTY3LDI1LjE4ICAgYy0wLjU0OCwwLjUtOC4zOTMtMjUuMTgtOC4zOTMtMjUuMThsLTQxLjk2NywxNi43ODdjLTcuMzQ0LTEzLjk4OSwwLTMzLjU3NCwwLTMzLjU3NHMtMjUuMDI2LDguODk1LTI1LjE4LDguMzkzICAgYy00LjE5Ny0xMy42MzksOC4zOTMtNDEuOTY3LDguMzkzLTQxLjk2N3MtMjUuMTgsOC45MTgtMjUuMTgsOC4zOTNjMC0yOS4zNzcsMTYuNzg3LTY3LjE0OCwxNi43ODctNjcuMTQ4bC0yNS4xOCw4LjM5MyAgIGMwLTI1LjcwNSwxNi43ODctNjcuMTQ4LDE2Ljc4Ny02Ny4xNDhIMTIuNTljMCwwLDUuNTk1LTQ2LjE2NCw0MC4wNDItMTAyLjQ2N0g0NTkuMzY4eiIvPgo8L2c+CjxlbGxpcHNlIHN0eWxlPSJmaWxsOiNGRkE1NEI7IiBjeD0iMjU1LjUxNyIgY3k9IjIzMC44MiIgcng9IjIwOS44MzYiIHJ5PSIxOTcuMjQ2Ii8+CjxnPgoJCgkJPGVsbGlwc2UgdHJhbnNmb3JtPSJtYXRyaXgoLTAuNjA0MiAtMC43OTY4IDAuNzk2OCAtMC42MDQyIDYzLjk0NzUgNDk5Ljg5MjYpIiBzdHlsZT0iZmlsbDojRkZFQkQyOyIgY3g9IjE1Ni4xMjMiIGN5PSIyMzQuMDY1IiByeD0iMzcuNzY5IiByeT0iNDYuMTYzIi8+CgkKCQk8ZWxsaXBzZSB0cmFuc2Zvcm09Im1hdHJpeCgtMC42MDQyIDAuNzk2OCAtMC43OTY4IC0wLjYwNDIgNzU1LjkyMDQgOTIuNzAzMSkiIHN0eWxlPSJmaWxsOiNGRkVCRDI7IiBjeD0iMzU0LjkzNyIgY3k9IjIzNC4wODYiIHJ4PSIzNy43NjkiIHJ5PSI0Ni4xNjMiLz4KPC9nPgo8cGF0aCBzdHlsZT0iZmlsbDojRkY4QzQ2OyIgZD0iTTI1NS41MjQsMjYwLjE5N2gtMC4wMTNjLTI4LjcxMSwwLTU1LjA0NSwxOC4yNjgtNjguNTM2LDQ3LjUxMSAgYy0xOC4xNjMsMzkuMzc0LTQwLjU3Myw5MS45OTYtNDAuNTczLDExMS45NjRoMjE4LjIyOWMwLTE5Ljk2Ny0yMi40MDktNzIuNTktNDAuNTczLTExMS45NjQgIEMzMTAuNTY5LDI3OC40NjQsMjg0LjIzNCwyNjAuMTk3LDI1NS41MjQsMjYwLjE5N3oiLz4KPHBhdGggc3R5bGU9ImZpbGw6I0ZGREVCNzsiIGQ9Ik0zMDQuNzk1LDM2OS4zMTFjLTE5LjM5MywwLTM2Ljg1NSw2LTQ5LjI3OCwxNS41ODhjLTEyLjQyMi05LjU4OC0yOS44ODUtMTUuNTg4LTQ5LjI3OC0xNS41ODggIGMtMzcuNjgyLDAtNjguMjMsMjIuNTQ3LTY4LjIzLDUwLjM2MXMzMC41NDgsNTAuMzYxLDY4LjIzLDUwLjM2MWMxNS43MjgsMCwzMC4xODctMy45NDcsNDEuNzE2LTEwLjU1NCAgYzQuNzY0LTIuNzMsMTAuMzU3LTIuNzMsMTUuMTIyLDBjMTEuNTI5LDYuNjA3LDI1Ljk4OCwxMC41NTQsNDEuNzE2LDEwLjU1NGMzNy42ODIsMCw2OC4yMy0yMi41NDcsNjguMjMtNTAuMzYxICBTMzQyLjQ3OCwzNjkuMzExLDMwNC43OTUsMzY5LjMxMXoiLz4KPGc+Cgk8cGF0aCBzdHlsZT0iZmlsbDojNDY0NjU1OyIgZD0iTTIxNS4zNDQsMzc0Ljk5MWwzMy40OCw0NC4yMzJjMy4zNTgsNC40MzcsMTAuMDI2LDQuNDM3LDEzLjM4NCwwbDMzLjQ4LTQ0LjIzMiAgIGM0LjE4NC01LjUyOCwwLjI0MS0xMy40NTktNi42OTMtMTMuNDU5aC00LjVjLTIuNTIsMC01LjAyNiwwLjM3OC03LjQzMiwxLjEyMmwtMTQuMTE2LDQuMzYxYy00Ljg0MiwxLjQ5Ni0xMC4wMjMsMS40OTYtMTQuODY1LDAgICBsLTE0LjExNi00LjM2MWMtMi40MDgtMC43NDQtNC45MTMtMS4xMjItNy40MzItMS4xMjJoLTQuNDk5QzIxNS4xMDMsMzYxLjUzMiwyMTEuMTYsMzY5LjQ2MywyMTUuMzQ0LDM3NC45OTF6Ii8+Cgk8Y2lyY2xlIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBjeD0iMTU0Ljc5NiIgY3k9IjIzNS4wMTYiIHI9IjE2Ljc4NyIvPgoJPGNpcmNsZSBzdHlsZT0iZmlsbDojNDY0NjU1OyIgY3g9IjM1Ni4yMzkiIGN5PSIyMzUuMDE2IiByPSIxNi43ODciLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBkPSJNNzcuMzU4LDMzNS4wMDFsNDYuMjA2LTM3LjgwNWM0LjAxMi0zLjI4MywxLjEyMy05Ljc2MS00LjAwMS04Ljk2OWwtNjEuNDc4LDkuNSAgIEM2My4xMjMsMzEwLjg2LDY5LjYxOCwzMjMuMzMxLDc3LjM1OCwzMzUuMDAxeiIvPgoJPHBhdGggc3R5bGU9ImZpbGw6IzQ2NDY1NTsiIGQ9Ik0xMjEuNDkzLDM4Mi41NzdsMjUuMDUyLTY2LjgwN2MxLjkyMi01LjEyNS00LjQ5NC05LjI1Ni04LjM2NC01LjM4NWwtNDUuMTgzLDQ1LjE4MyAgIEMxMDEuNTU1LDM2NS40MDYsMTExLjA5OCwzNzQuNDU1LDEyMS40OTMsMzgyLjU3N3oiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBkPSJNMjI2LjQwNSwxMDkuMTQ5bC02LjYzMy03Mi42NjdjLTguMTA2LDEuMzA4LTE2LjA1MiwzLjA0NC0yMy44MTEsNS4yMDFsMjEuNTMyLDY5LjIzOSAgIEMyMTkuMTIsMTE2LjE1NywyMjYuOTAzLDExNC42MDksMjI2LjQwNSwxMDkuMTQ5eiIvPgoJPHBhdGggc3R5bGU9ImZpbGw6IzQ2NDY1NTsiIGQ9Ik0yOTEuMjYzLDM2LjQ4MmwtNi42MzMsNzIuNjY3Yy0wLjQ5OCw1LjQ2LDcuMjg0LDcuMDA3LDguOTEzLDEuNzcybDIxLjUzMi02OS4yMzkgICBDMzA3LjMxNSwzOS41MjcsMjk5LjM2OSwzNy43OSwyOTEuMjYzLDM2LjQ4MnoiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBkPSJNMzM3LjM4Nyw0OS4xNTZsLTIwLjUwOSw0Ny40NDljLTIuMTM3LDQuOTQ2LDQuNTQ5LDguODY4LDcuODIzLDQuNTg4bDMyLjczLTQyLjc5MSAgIEMzNTAuOTQ2LDU1LjAxLDM0NC4yNzEsNTEuOSwzMzcuMzg3LDQ5LjE1NnoiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBkPSJNMTk0LjE1Nyw5Ni42MDVsLTIwLjUwOS00Ny40NDljLTYuODg0LDIuNzQ1LTEzLjU1OSw1Ljg1My0yMC4wNDQsOS4yNDdsMzIuNzMsNDIuNzkgICBDMTg5LjYwOCwxMDUuNDczLDE5Ni4yOTUsMTAxLjU1MSwxOTQuMTU3LDk2LjYwNXoiLz4KCTxwYXRoIHN0eWxlPSJmaWxsOiM0NjQ2NTU7IiBkPSJNMjcyLjIyNCwzNC4yNTNjLTUuNTE4LTAuNDA4LTExLjA3Ny0wLjY3OS0xNi43MDctMC42NzljLTUuNjMsMC0xMS4xODksMC4yNzEtMTYuNzA3LDAuNjc5ICAgbDEyLjE2OSwxMDMuNDRjMC42MzMsNS4zOCw4LjQ0Miw1LjM4LDkuMDc1LDBMMjcyLjIyNCwzNC4yNTN6Ii8+Cgk8cGF0aCBzdHlsZT0iZmlsbDojNDY0NjU1OyIgZD0iTTQzNC44NjgsMzM1LjAwMWwtNDYuMjA2LTM3LjgwNWMtNC4wMTItMy4yODMtMS4xMjMtOS43NjEsNC4wMDEtOC45NjlsNjEuNDc4LDkuNSAgIEM0NDkuMTA0LDMxMC44Niw0NDIuNjA4LDMyMy4zMzEsNDM0Ljg2OCwzMzUuMDAxeiIvPgoJPHBhdGggc3R5bGU9ImZpbGw6IzQ2NDY1NTsiIGQ9Ik0zOTAuNzMzLDM4Mi41NzdsLTI1LjA1Mi02Ni44MDdjLTEuOTIyLTUuMTI1LDQuNDk0LTkuMjU2LDguMzY0LTUuMzg1bDQ1LjE4Myw0NS4xODMgICBDNDEwLjY3MSwzNjUuNDA2LDQwMS4xMjksMzc0LjQ1NSwzOTAuNzMzLDM4Mi41Nzd6Ii8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg=="}})}).call(e,i(0))},function(t,e,i){"use strict";(function(t){i(57),t.util.object.extend(t.Image.prototype,{contentOffsets:null,_render:function(t,e){var i,n,a,o=this._findMargins();i=e?this.left:-this.width/2,n=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(i,n,this.width,this.height),t.clip()),!1===this.isMoving&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,a=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):a=this._element,this._renderFill(t),a&&t.drawImage(a,i+o.marginX,n+o.marginY,o.width,o.height),this._stroke(t),this._renderStroke(t)},imageTools:!1,photoshopTools:!1,cloneSync:function(){var e=this.toObject();delete e.filters;var i=new t.Image(this._element,e);return i._filteredEl=this._filteredEl,i.filters=this.filters,i},revertChanges:function(){var t=this.canvas.getPathfinder();t.target&&t.target==this&&t.hide(),this._element!=this._originalElement&&(this.filters.length=0,this._filteredEl&&delete this._filteredEl,delete this._edited,this._element=this._originalElement,this.fire("content:modified",{bounds:{minX:0,minY:0,maxX:this._element.width,maxY:this._element.height}}),this.canvas.renderAll())},extractColors:function(){var e=t.MagicWand.extractColors(this._element),i={};for(var n in e){i["rgb("+e[n].join(",")+")"]={}}return i},actions:t.util.object.extend(t.Image.prototype.actions,{photoshopTools:{type:"effect",effectTpl:'<div id="editor-tools" class="inline-actions compact"></div><div class="checkboard" ><div id="pathfinder"></div></div>',className:"fa fa-pencil-square-o",title:"advanced tools",action:function(){var t=this.canvas.getPathfinder();t.target=this,t.setPicture(this._element),t.show()},actionParameters:function(e,i){var n=this.canvas.getPathfinder();n.canvas=this.canvas,new t.Toolbar(n,"editor-tools"),n.setContainer("pathfinder"),n.target=this,n.setPicture(this._element),n.show()}},revertChanges:{className:"fa fa-history",title:"revert to orignal image",action:"revertChanges",observe:"content:modified",visible:function(){return!!this._filteredEl||this._edited}}})})}).call(e,i(0))},function(t,e,i){(function(t){i(43),t.util.object.extend(t.Image.prototype,{removeWhite:function(e,i,n){var a=_.findWhere(this.filters,{type:"RemoveWhiteDP"});a?(a.options.colorThreshold=e,a.options.fromCorners=!i):(a=new t.Image.filters.RemoveWhiteDP({fromCorners:!i,blurRadius:2,colorThreshold:e}),this.filters.push(a));var o=this;this.applyFilters(function(){o.canvas.renderAll(),o.fire("content:modified",{filter:a,bounds:a.bounds}),n&&n()})},removeWhiteAll:!0,actions:t.util.object.extend(t.Image.prototype.actions,{removeWhiteFromBorders:{title:"Remove Background",type:"effect",className:"fa fa-dot-circle-o",effectTpl:'<button id="select-colors-action-button" class="fa fa-check"></button><input id="select-colors-checkbox" type="checkbox"><input id="select-colors-threshold" type="range"   min="1" max="255">',actionParameters:function(t,e){var i=t.find("#select-colors-checkbox"),n=t.find("#select-colors-action-button");e.thresholdEl=t.find("#select-colors-threshold"),e.removeWhiteAll=i.is(":checked"),i.change(function(){e.removeWhiteAll=i.is(":checked")}),n.click(function(){e.action()}),e.__action||(e.__action=e.action,e.action=function(){e.__action(parseInt(e.thresholdEl.val()),e.removeWhiteAll)})},action:"removeWhite",insert:"imageTools"}})})}).call(e,i(0))},function(t,e,i){(function(t){t.util.object.extend(t.Textbox.prototype,{listStyleType:"none",listStyleFormat:"N.",listTextPadding:40,textPadding:0,setTextPadding:function(t){this.textPadding=t,this._initDimensions()},setListStyleType:function(t){this.listStyleType=t,this.setTextPadding("none"===t?0:this.listTextPadding)},_wrapText:function(t,e){var i,n=e.split(this._reNewline),a=[];for(this._paragraphs={},i=0;i<n.length;i++)this._paragraphs[a.length]=this.listStyleFormat.replace("N",i+1),a=a.concat(this._wrapLine(t,n[i],i));return a},_wrapLine:function(t,e,i){var n=0,a=[],o="",s=e.split(" "),r="",c=0,u=0,l=0,h=0,d=!0,g=this._getWidthOfCharSpacing(),f=this.width;this.textPadding&&(f-=this.textPadding);for(var p=0;p<s.length;p++)r=s[p],u=this._measureText(t,r,i,c),c+=r.length,n+=l+u-g,n>=f&&!d?(a.push(o),o="",n=u,d=!0):n+=g,d||(o+=" "),o+=r,l=this._measureText(t," ",i,c),c++,d=!1,u>h&&(h=u);return p&&a.push(o),h>this.dynamicMinWidth&&(this.dynamicMinWidth=h-g),a},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2+this.textPadding/2:"right"===this.textAlign?this.width-t:this.textPadding},_renderTextCommon:function(t,e){for(var i=0,n=this._getLeftOffset(),a=this._getTopOffset(),o=0,s=this._textLines.length;o<s;o++){var r=this._getHeightOfLine(t,o),c=r/this.lineHeight,u=this._getLineWidth(t,o),l=this._getLineLeftOffset(u);this._renderTextLine(e,t,this._textLines[o],n+l,a+i+c,o),i+=r}},_renderTextLine:function(t,e,i,n,a,o){switch(a-=this.fontSize*this._fontSizeFraction,this.listStyleType){case"decimal":this._paragraphs[o]&&this._renderChars(t,e,this._paragraphs[o],n-this.textPadding,a,o,0)}var s=this._getLineWidth(e,o);if("justify"!==this.textAlign||this.width<s)return void this._renderChars(t,e,i,n,a,o);for(var r,c=i.split(/\s+/),u=0,l=this._getWidthOfWords(e,c.join(""),o,0),h=this.width-l-this.textPadding,d=c.length-1,g=d>0?h/d:0,f=0,p=0,m=c.length;p<m;p++){for(;" "===i[u]&&u<i.length;)u++;r=c[p],this._renderChars(t,e,r,n+f,a,o,u),f+=this._getWidthOfWords(e,r,o,u)+g,u+=r.length}},toggleListStyleType:function(){this.setListStyleType("none"==this.listStyleType?"decimal":"none"),this.canvas.renderAll()},actions:{toggleListStyleType:{className:"fa fa-list-ol",title:"ordered list"}}})}).call(e,i(0))},function(t,e,i){if($.minicolors||i(22),void 0===n)var n=i(1);n.prototype.colorpicker=function(t,e){e.format="rgb",e.opacity=!0,t.minicolors(e)},n.prototype.tools.color={template:'<div class="object-menu-item" title="{title}"><div class="btn button-{id} {className}"><input type="text" data-format="rgba" data-opacity="true" data-text="true" data-control="saturation" data-swatches="#fff|#000|#f00|#0f0|#00f|#ff0|#0ff"  value="{valueCurrent}" transclude>',post:function(t,e,i,n){var a=(e.target,!1);this.colorpicker(n,{defaultValue:e.value.get(),control:n.attr("data-control")||"hue",format:n.attr("data-format")||"hex",keywords:n.attr("data-keywords")||"",inline:"true"===n.attr("data-inline"),letterCase:n.attr("data-letterCase")||"lowercase",opacity:n.attr("data-opacity"),position:n.attr("data-position")||this.tools.color.colorpickerPosition||"right bottom",swatches:n.attr("data-swatches")?n.attr("data-swatches").split("|"):[],text:n.attr("data-text"),hide:function(){a=!1},show:function(){a=!0},change:function(t,i){e.value.set(t)}});var o=$(n.parents()[0]).find(".minicolors-panel"),s=function(t){a&&-1==$(t.target).parents().index(o)&&n.minicolors("hide")};$("body").on("mousedown",s)}}},function(t,e,i){if(void 0===n)var n=i(1);n.prototype.colorpicker=function(t,e){e.format="rgb",e.opacity=!0,t.minicolors(e)},n.prototype.tools.effect={scope:function(t,e){return{buttonsTitle:e.buttons&&e.buttons.title||!1,isParameters:!!t.actionParameters,buttonscClassName:e.buttons&&e.buttons.className||""}},template:'<div class="object-menu-item" title="{title}"><button class="btn button-{id} {className} {buttonscClassName}"><span dp-if="buttonsTitle" class="button-title">{title}</span></button><div dp-if="isParameters" class="menu-action-parameters" style="display: none" transclude></div></div>',post:function(t,e,i,n){e.container&&(n=$(document.getElementById(e.container)));var a,o=function(){return e.effectTpl&&(a=$(e.effectTpl),n.html(a)),e.actionParametersId&&(a=$("#"+e.actionParametersId).clone(),n.html(a)),e.actionParameters.call(e.target,n,e,i)};this.toggleByButton(t,n,o,e)}}},function(t,e,i){if($.fontSelector||i(21),void 0===n)var n=i(1);n.prototype.fonts=["Arial,Helvetica,sans-serif","Arial Black,Gadget,sans-serif","Comic Sans MS,cursive","Courier New,Courier,monospace","Georgia,serif","Impact,Charcoal,sans-serif","Lucida Console,Monaco,monospace","Lucida Sans Unicode,Lucida Grande,sans-serif","Palatino Linotype,Book Antiqua,Palatino,serif","Tahoma,Geneva,sans-serif","Times New Roman,Times,serif","Trebuchet MS,Helvetica,sans-serif","Verdana,Geneva,sans-serif","Gill Sans,Geneva,sans-serif"],n.prototype.tools.fontFamily={scope:function(t,e){return{onchange:function(e){t.value.set(parseFloat($(e.target).val()))}}},template:'<div class="object-menu-item object-menu-font-family" title="{title}"><div class="fontSelect" transclude><div class="arrow-down">',post:function(t,e,i,n){n.fontSelector({hide_fallbacks:!0,initial:e.value.get(),selected:e.value.set.bind(e.target),fonts:e.data})}}},function(t,e,i){if(void 0===n)var n=i(1);n.prototype.updateSelectedOption=function(t){var e=t.$item.find(":checked"),i=$(e.parents()[0]);t.$item.find(".btn-selected-option").html(i.find("label")[0].outerHTML)},n.prototype.tools.option={scope:function(t,e){var i=this;return{parentId:t.parent.id,valueCurrent:t.parent.value.get()===t.option,onchange:function(){var e=t.$item.find(":checked"),n=e.val();n==t.option&&t.parent.value.set(n),i.updateSelectedOption(t.parent)}}},template:'<div class="object-menu-item object-menu-option " title="{title}" ><input type="radio" id="tool-{id}" dp-checked="{valueCurrent}" name="{parentId}" value="{option}" onchange="onchange()"><label class="btn button-{id} {className}" for="tool-{id}"><img dp-if="icon" dp-src="icon"><span dp-include="svg" dp-if="svg"></span><span dp-if="title" class="option-title">{title}</span>'},n.prototype.tools.options={scope:function(t,e){return{className:t.className||"items-column",buttonsTitle:e.buttons&&e.buttons.title||!1,buttonsClassName:e.buttons.className||""}},template:'<div class="object-menu-item object-menu-options {className}" title="{title}"><div class="btn btn-selected-option"></div><div class="object-menu-options-container" transclude>',post:function(t,e,i,n){this.generateMenu(e.target,n,i,e.menu),this.updateSelectedOption(e)}}},function(t,e,i){if(void 0===n)var n=i(1);n.prototype.tools.select={scope:function(t,e){return{getInputValue:function(){return parseFloat(t.$item.find("input").val())},getValue:t.value.get,setValue:t.value.set,onchange:function(e,i){t.value.set(e.params.data.id,i)}}},template:'<div class="object-menu-item object-menu-select {itemClassName}" title="{title}" ><label for="xxx" class="btn button-{id} {className}"></label><select id="xxx">',post:function(t,e,i,n,a){var o=e.value.options(),s=e.value.get(),r=t.find("select");r.dpSelect({minimumResultsForSearch:1/0,dropdownParent:$("body"),data:o,templateSelection:function(t,i){return e.templateSelection(t,i,e)},templateResult:function(t,i){return e.templateResult(t,i,e)}}).on("select2:select",function(t){e.onchange(t,o)}),r.dpSelect("val",[s])}}},function(t,e){t.exports=require("fs")}]);